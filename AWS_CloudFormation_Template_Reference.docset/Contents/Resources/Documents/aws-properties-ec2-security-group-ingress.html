<!DOCTYPE html>
<html>
<head>
    <link href="css/awsdocs.css" rel="stylesheet" type="text/css">
    <script type="text/javascript" src="js/jquery.min.js"></script>
    <script type="text/javascript" src="js/awsdocs.min.js"></script>
    <meta charset="utf-8">
</head>
<body>
    <div id="content" style="padding: 10px 30px;">
    <div id="main-content" class="awsui-util-container">
            <div id="main-col-body">
               <awsdocs-language-banner data-service="$ctrl.pageService"></awsdocs-language-banner>
               <awsdocs-table-manager id="awsdocs-table-manager"></awsdocs-table-manager>
               <h1 class="topictitle" id="aws-properties-ec2-security-group-ingress">AWS::EC2::SecurityGroupIngress</h1>
               <div class="awsdocs-page-header-container">
                  <awsdocs-page-header></awsdocs-page-header>
                  <awsdocs-filter-selector id="awsdocs-filter-selector"></awsdocs-filter-selector>
               </div>
               <p>Adds an inbound rule to a security group.</p>
               <p>An inbound rule permits instances to receive traffic from the specified IPv4 or IPv6
                  CIDR address range, 
                  or from the instances associated with the specified security group.
               </p>
               <p>You specify a protocol for each rule (for example, TCP). 
                  For TCP and UDP, you must also specify a port or port range. 
                  For ICMP/ICMPv6, you must also specify the ICMP/ICMPv6 type and code. 
                  You can use -1 to mean all types or all codes.
               </p>
               <p>You must specify a source security group
                  (<code class="code">SourcePrefixListId</code>, <code class="code">SourceSecurityGroupId</code>, or <code class="code">SourceSecurityGroupName</code>) or a
                  CIDR range (<code class="code">CidrIp</code> or <code class="code">CidrIpv6</code>).
               </p>
               <p>Rule changes are propagated to instances within the security group as quickly as possible.
                  
                  However, a small delay might occur.
               </p>
               <h2 id="aws-properties-ec2-security-group-ingress-syntax">Syntax</h2>
               <p>To declare this entity in your AWS CloudFormation template, use the following syntax:</p>
               <div id="JSON" name="JSON" class="section langfilter">
                  <h3 id="aws-properties-ec2-security-group-ingress-syntax.json">JSON</h3><pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="json "><span>{</span>
  &quot;Type&quot; : &quot;AWS::EC2::SecurityGroupIngress&quot;,
  &quot;Properties&quot; : <span>{</span>
      &quot;<a href="#cfn-ec2-security-group-ingress-cidrip">CidrIp</a>&quot; : <code class="replaceable">String</code>,
      &quot;<a href="#cfn-ec2-security-group-ingress-cidripv6">CidrIpv6</a>&quot; : <code class="replaceable">String</code>,
      &quot;<a href="#cfn-ec2-security-group-ingress-description">Description</a>&quot; : <code class="replaceable">String</code>,
      &quot;<a href="#cfn-ec2-security-group-ingress-fromport">FromPort</a>&quot; : <code class="replaceable">Integer</code>,
      &quot;<a href="#cfn-ec2-security-group-ingress-groupid">GroupId</a>&quot; : <code class="replaceable">String</code>,
      &quot;<a href="#cfn-ec2-security-group-ingress-groupname">GroupName</a>&quot; : <code class="replaceable">String</code>,
      &quot;<a href="#cfn-ec2-security-group-ingress-ipprotocol">IpProtocol</a>&quot; : <code class="replaceable">String</code>,
      &quot;<a href="#cfn-ec2-securitygroupingress-sourceprefixlistid">SourcePrefixListId</a>&quot; : <code class="replaceable">String</code>,
      &quot;<a href="#cfn-ec2-security-group-ingress-sourcesecuritygroupid">SourceSecurityGroupId</a>&quot; : <code class="replaceable">String</code>,
      &quot;<a href="#cfn-ec2-security-group-ingress-sourcesecuritygroupname">SourceSecurityGroupName</a>&quot; : <code class="replaceable">String</code>,
      &quot;<a href="#cfn-ec2-security-group-ingress-sourcesecuritygroupownerid">SourceSecurityGroupOwnerId</a>&quot; : <code class="replaceable">String</code>,
      &quot;<a href="#cfn-ec2-security-group-ingress-toport">ToPort</a>&quot; : <code class="replaceable">Integer</code>
    }
}
</code></pre></div>
               <div id="YAML" name="YAML" class="section langfilter">
                  <h3 id="aws-properties-ec2-security-group-ingress-syntax.yaml">YAML</h3><pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="yaml ">Type: AWS::EC2::SecurityGroupIngress
Properties: 
  <a href="#cfn-ec2-security-group-ingress-cidrip">CidrIp</a>: <code class="replaceable">String</code>
  <a href="#cfn-ec2-security-group-ingress-cidripv6">CidrIpv6</a>: <code class="replaceable">String</code>
  <a href="#cfn-ec2-security-group-ingress-description">Description</a>: <code class="replaceable">String</code>
  <a href="#cfn-ec2-security-group-ingress-fromport">FromPort</a>: <code class="replaceable">Integer</code>
  <a href="#cfn-ec2-security-group-ingress-groupid">GroupId</a>: <code class="replaceable">String</code>
  <a href="#cfn-ec2-security-group-ingress-groupname">GroupName</a>: <code class="replaceable">String</code>
  <a href="#cfn-ec2-security-group-ingress-ipprotocol">IpProtocol</a>: <code class="replaceable">String</code>
  <a href="#cfn-ec2-securitygroupingress-sourceprefixlistid">SourcePrefixListId</a>: <code class="replaceable">String</code>
  <a href="#cfn-ec2-security-group-ingress-sourcesecuritygroupid">SourceSecurityGroupId</a>: <code class="replaceable">String</code>
  <a href="#cfn-ec2-security-group-ingress-sourcesecuritygroupname">SourceSecurityGroupName</a>: <code class="replaceable">String</code>
  <a href="#cfn-ec2-security-group-ingress-sourcesecuritygroupownerid">SourceSecurityGroupOwnerId</a>: <code class="replaceable">String</code>
  <a href="#cfn-ec2-security-group-ingress-toport">ToPort</a>: <code class="replaceable">Integer</code>
</code></pre></div>
               <h2 id="aws-properties-ec2-security-group-ingress-properties">Properties</h2>
               <div class="variablelist">
                  <dl>
                     <dt><a id="cfn-ec2-security-group-ingress-cidrip"></a><span class="term"><code class="code">CidrIp</code></span></dt>
                     <dd>
                        
                        <p>The IPv4 ranges.</p>
                        
                        <p><em>Required</em>: No
                        </p>
                        <p><em>Type</em>: String
                        </p>
                        <p><em>Update requires</em>: <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-update-behaviors.html#update-replacement">Replacement</a></p>
                     </dd>
                     <dt><a id="cfn-ec2-security-group-ingress-cidripv6"></a><span class="term"><code class="code">CidrIpv6</code></span></dt>
                     <dd>
                        
                        <p>[VPC only] The IPv6 ranges.</p>
                        
                        <p><em>Required</em>: No
                        </p>
                        <p><em>Type</em>: String
                        </p>
                        <p><em>Update requires</em>: <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-update-behaviors.html#update-replacement">Replacement</a></p>
                     </dd>
                     <dt><a id="cfn-ec2-security-group-ingress-description"></a><span class="term"><code class="code">Description</code></span></dt>
                     <dd>
                        
                        <p>Updates the description of an ingress (inbound) security group rule. You can replace
                           an
                           			existing description, or add a description to a rule that did not have one
                           			previously.
                        </p>
                        
                        <p><em>Required</em>: No
                        </p>
                        <p><em>Type</em>: String
                        </p>
                        <p><em>Update requires</em>: <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-update-behaviors.html#update-no-interrupt">No interruption</a></p>
                     </dd>
                     <dt><a id="cfn-ec2-security-group-ingress-fromport"></a><span class="term"><code class="code">FromPort</code></span></dt>
                     <dd>
                        
                        <p>The start of port range for the TCP and UDP protocols, or an ICMP/ICMPv6 type number.
                           			A value of <code class="code">-1</code> indicates all ICMP/ICMPv6 types. If you specify all
                           			ICMP/ICMPv6 types, you must specify all codes.
                        </p>
                        
                        <p>Use this for ICMP and any protocol that uses ports.</p>
                        
                        <p><em>Required</em>: No
                        </p>
                        <p><em>Type</em>: Integer
                        </p>
                        <p><em>Update requires</em>: <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-update-behaviors.html#update-replacement">Replacement</a></p>
                     </dd>
                     <dt><a id="cfn-ec2-security-group-ingress-groupid"></a><span class="term"><code class="code">GroupId</code></span></dt>
                     <dd>
                        
                        <p>The ID of the security group. You must specify either the security group ID or the
                           			security group name in the request. For security groups in a nondefault VPC, you
                           must
                           			specify the security group ID.
                        </p>
                        
                        <p>You must specify the <code class="code">GroupName</code> property or the <code class="code">GroupId</code> property. 
                           For security groups that are in a VPC, you must use the <code class="code">GroupId</code> property.
                        </p>
                        
                        <p><em>Required</em>: No
                        </p>
                        <p><em>Type</em>: String
                        </p>
                        <p><em>Update requires</em>: <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-update-behaviors.html#update-replacement">Replacement</a></p>
                     </dd>
                     <dt><a id="cfn-ec2-security-group-ingress-groupname"></a><span class="term"><code class="code">GroupName</code></span></dt>
                     <dd>
                        
                        <p>The name of the security group.</p>
                        
                        <p>Constraints: Up to 255 characters in length. Cannot start with
                           <code class="code">sg-</code>.
                        </p>
                        
                        <p>Constraints for EC2-Classic: ASCII characters</p>
                        
                        <p>Constraints for EC2-VPC: a-z, A-Z, 0-9, spaces, and ._-:/()#,@[]+=&amp;;<span>{</span>}!$*
                        </p>
                        
                        <p><em>Required</em>: No
                        </p>
                        <p><em>Type</em>: String
                        </p>
                        <p><em>Update requires</em>: <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-update-behaviors.html#update-replacement">Replacement</a></p>
                     </dd>
                     <dt><a id="cfn-ec2-security-group-ingress-ipprotocol"></a><span class="term"><code class="code">IpProtocol</code></span></dt>
                     <dd>
                        
                        <p>The IP protocol name (<code class="code">tcp</code>, <code class="code">udp</code>, <code class="code">icmp</code>, <code class="code">icmpv6</code>) 
                           or number (see <a href="http://www.iana.org/assignments/protocol-numbers/protocol-numbers.xhtml" target="_blank"><span>Protocol Numbers</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a>).
                        </p>
                        
                        <p>[VPC only] Use <code class="code">-1</code> to specify all protocols. When authorizing
                           security group rules, specifying <code class="code">-1</code> or a protocol number other than
                           <code class="code">tcp</code>, <code class="code">udp</code>, <code class="code">icmp</code>, or <code class="code">icmpv6</code> allows
                           traffic on all ports, regardless of any port range you specify. For <code class="code">tcp</code>,
                           <code class="code">udp</code>, and <code class="code">icmp</code>, you must specify a port range. For <code class="code">icmpv6</code>,
                           the port range is optional; if you omit the port range, traffic for all types and
                           codes is allowed.
                        </p>
                        
                        <p><em>Required</em>: Yes
                        </p>
                        <p><em>Type</em>: String
                        </p>
                        <p><em>Update requires</em>: <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-update-behaviors.html#update-replacement">Replacement</a></p>
                     </dd>
                     <dt><a id="cfn-ec2-securitygroupingress-sourceprefixlistid"></a><span class="term"><code class="code">SourcePrefixListId</code></span></dt>
                     <dd>
                        
                        <p>[EC2-VPC only] The prefix list IDs for an AWS service. This is the AWS service that
                           you
                           want to access through a VPC endpoint from instances associated with the security
                           group.
                        </p>
                        
                        <p><em>Required</em>: No
                        </p>
                        <p><em>Type</em>: String
                        </p>
                        <p><em>Update requires</em>: <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-update-behaviors.html#update-replacement">Replacement</a></p>
                     </dd>
                     <dt><a id="cfn-ec2-security-group-ingress-sourcesecuritygroupid"></a><span class="term"><code class="code">SourceSecurityGroupId</code></span></dt>
                     <dd>
                        
                        <p>The ID of the security group. You must specify either the security group ID or the
                           security group name. For security groups in a nondefault VPC, 
                           you must specify the security group ID.
                        </p>
                        
                        <p><em>Required</em>: No
                        </p>
                        <p><em>Type</em>: String
                        </p>
                        <p><em>Update requires</em>: <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-update-behaviors.html#update-replacement">Replacement</a></p>
                     </dd>
                     <dt><a id="cfn-ec2-security-group-ingress-sourcesecuritygroupname"></a><span class="term"><code class="code">SourceSecurityGroupName</code></span></dt>
                     <dd>
                        
                        <p>[EC2-Classic, default VPC] The name of the source security group.</p>
                        
                        <p>You must specify the <code class="code">GroupName</code> property or the <code class="code">GroupId</code> property. 
                           For security groups that are in a VPC, you must use the <code class="code">GroupId</code> property.
                        </p>
                        
                        <p><em>Required</em>: No
                        </p>
                        <p><em>Type</em>: String
                        </p>
                        <p><em>Update requires</em>: <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-update-behaviors.html#update-replacement">Replacement</a></p>
                     </dd>
                     <dt><a id="cfn-ec2-security-group-ingress-sourcesecuritygroupownerid"></a><span class="term"><code class="code">SourceSecurityGroupOwnerId</code></span></dt>
                     <dd>
                        
                        <p>[nondefault VPC] The AWS account ID for the source security group, if the source security
                           group is 
                           in a different account. You can&apos;t specify this parameter in combination with the following
                           parameters: 
                           the CIDR IP address range, the IP protocol, the start of the port range, and the end
                           of the port range. 
                           Creates rules that grant full ICMP, UDP, and TCP access.
                        </p>
                        
                        <p>If you specify <code class="code">SourceSecurityGroupName</code> or
                           <code class="code">SourceSecurityGroupId</code> and that security group is owned by a different account than the
                           account creating the stack, you must specify the
                           <code class="code">SourceSecurityGroupOwnerId</code>; otherwise, this property is optional.
                        </p>
                        
                        <p><em>Required</em>: Conditional
                        </p>
                        <p><em>Type</em>: String
                        </p>
                        <p><em>Update requires</em>: <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-update-behaviors.html#update-replacement">Replacement</a></p>
                     </dd>
                     <dt><a id="cfn-ec2-security-group-ingress-toport"></a><span class="term"><code class="code">ToPort</code></span></dt>
                     <dd>
                        
                        <p>The end of port range for the TCP and UDP protocols, or an ICMP/ICMPv6 code. A value
                           			of <code class="code">-1</code> indicates all ICMP/ICMPv6 codes for the specified ICMP type. If you
                           			specify all ICMP/ICMPv6 types, you must specify all codes.
                        </p>
                        
                        <p>Use this for ICMP and any protocol that uses ports.</p>
                        
                        <p><em>Required</em>: No
                        </p>
                        <p><em>Type</em>: Integer
                        </p>
                        <p><em>Update requires</em>: <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-update-behaviors.html#update-replacement">Replacement</a></p>
                     </dd>
                  </dl>
               </div>
               <h2 id="aws-properties-ec2-security-group-ingress--examples">Examples</h2>
               <h3 id="aws-properties-ec2-security-group-ingress--examples--EC2_Security_Group_and_Ingress_Rule">EC2 Security Group and Ingress Rule</h3>
               <p>To declare an Amazon EC2 (non-VPC) security group and an ingress rule, use the <code class="code">SourceSecurityGroupName </code> property in the ingress rule.
               </p>
               <p>The following template example defines an EC2 security group with an ingress rule
                  that allows incoming traffic on port 80 from any other host in the security group.
                  
               </p>
               <div id="JSON" name="JSON" class="section langfilter">
                  <h4 id="aws-properties-ec2-security-group-ingress--examples--EC2_Security_Group_and_Ingress_Rule--json">JSON</h4><pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="json ">
&quot;SGBase&quot;: <span>{</span>
   &quot;Type&quot;: &quot;AWS::EC2::SecurityGroup&quot;,
   &quot;Properties&quot;: <span>{</span>
      &quot;GroupDescription&quot;: &quot;Base Security Group&quot;,
      &quot;SecurityGroupIngress&quot;: [
         <span>{</span>
            &quot;IpProtocol&quot;: &quot;tcp&quot;,
            &quot;CidrIp&quot;: &quot;0.0.0.0/0&quot;,
            &quot;FromPort&quot;: 22,
            &quot;ToPort&quot;: 22
         }
      ]
   }
},
&quot;SGBaseIngress&quot;: <span>{</span>
   &quot;Type&quot;: &quot;AWS::EC2::SecurityGroupIngress&quot;,
   &quot;Properties&quot;: <span>{</span>
      &quot;GroupName&quot;: <span>{</span>
         &quot;Ref&quot;: &quot;SGBase&quot;
      },
      &quot;IpProtocol&quot;: &quot;tcp&quot;,
      &quot;FromPort&quot;: 80,
      &quot;ToPort&quot;: 80,
      &quot;SourceSecurityGroupId&quot;: <span>{</span>
         &quot;Fn::GetAtt&quot;: [
            &quot;SGBase&quot;,
            &quot;GroupId&quot;
         ]
      }
   } 
}</code></pre></div>
               <div id="YAML" name="YAML" class="section langfilter">
                  <h4 id="aws-properties-ec2-security-group-ingress--examples--EC2_Security_Group_and_Ingress_Rule--yaml">YAML</h4><pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="yaml ">SGBase:
   Type: &apos;AWS::EC2::SecurityGroup&apos;
   Properties:
      GroupDescription: Base Security Group
      SecurityGroupIngress:
         - IpProtocol: tcp
           CidrIp: 0.0.0.0/0
           FromPort: 22
           ToPort: 22
SGBaseIngress:
   Type: &apos;AWS::EC2::SecurityGroupIngress&apos;
   Properties:
      GroupName: !Ref SGBase
      IpProtocol: tcp
      FromPort: 80
      ToPort: 80
      SourceSecurityGroupId: !GetAtt SGBase.GroupId</code></pre></div>
               <h3 id="aws-properties-ec2-security-group-ingress--examples--Allow_Traffic_from_a_Security_Group_in_a_Peered_VPC">Allow Traffic from a Security Group in a Peered VPC</h3>
               <p>Like the previous example, the following example allows one-way traffic from an
                  originating (source) security group to a destination (target) security group. However,
                  in
                  this example the security groups are in peered VPCs across AWS accounts. You might
                  want to
                  allow cross-account traffic if, for example, you create a security scanning resource
                  in one
                  AWS account that you&apos;ll use to run diagnostics in another account. This example adds
                  an
                  ingress rule to a target VPC security group that allows incoming traffic from a source
                  security group in a different AWS account. Note that the source security group also
                  needs an
                  egress rule that allows outgoing traffic to the target security group. Because the
                  source
                  security group is in a different account, the following example doesn&apos;t use the Ref
                  function
                  to reference the source security group ID but instead directly specifies the security
                  group
                  ID <code class="code">sg-12345678</code>. 
               </p>
               <div id="JSON" name="JSON" class="section langfilter">
                  <h4 id="aws-properties-ec2-security-group-ingress--examples--Allow_Traffic_from_a_Security_Group_in_a_Peered_VPC--json">JSON</h4><pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="json "><span>{</span>
    &quot;AWSTemplateFormatVersion&quot;: &quot;2010-09-09&quot;,
    &quot;Resources&quot;: <span>{</span>
        &quot;TargetSG&quot;: <span>{</span>
            &quot;Type&quot;: &quot;AWS::EC2::SecurityGroup&quot;,
            &quot;Properties&quot;: <span>{</span>
                &quot;VpcId&quot;: &quot;vpc-1a2b3c4d&quot;,
                &quot;GroupDescription&quot;: &quot;Security group allowing ingress for security scanners&quot;
            }
        },
        &quot;InboundRule&quot;: <span>{</span>
            &quot;Type&quot;: &quot;AWS::EC2::SecurityGroupIngress&quot;,
            &quot;Properties&quot;: <span>{</span>
                &quot;GroupId&quot;: <span>{</span>
                    &quot;Fn::GetAtt&quot;: [
                        &quot;TargetSG&quot;,
                        &quot;GroupId&quot;
                    ]
                },
                &quot;IpProtocol&quot;: &quot;tcp&quot;,
                &quot;FromPort&quot;: &quot;80&quot;,
                &quot;ToPort&quot;: &quot;80&quot;,
                &quot;SourceSecurityGroupId&quot;: &quot;sg-12345678&quot;,
                &quot;SourceSecurityGroupOwnerId&quot;: &quot;123456789012&quot;
            }
        }
    }
}</code></pre></div>
               <div id="YAML" name="YAML" class="section langfilter">
                  <h4 id="aws-properties-ec2-security-group-ingress--examples--Allow_Traffic_from_a_Security_Group_in_a_Peered_VPC--yaml">YAML</h4><pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="yaml ">AWSTemplateFormatVersion: 2010-09-09
Resources:
  TargetSG:
    Type: &apos;AWS::EC2::SecurityGroup&apos;
    Properties:
      VpcId: vpc-1a2b3c4d
      GroupDescription: Security group allowing ingress for security scanners
  InboundRule:
    Type: &apos;AWS::EC2::SecurityGroupIngress&apos;
    Properties:
      GroupId: !GetAtt TargetSG.GroupId
      IpProtocol: tcp
      FromPort: &apos;80&apos;
      ToPort: &apos;80&apos;
      SourceSecurityGroupId: sg-12345678
      SourceSecurityGroupOwnerId: &apos;123456789012&apos;
</code></pre></div>
               <h3 id="aws-properties-ec2-security-group-ingress--examples--VPC_Security_Groups_with_Egress_and_Ingress_Rules">VPC Security Groups with Egress and Ingress Rules</h3>
               <p>In some cases, you might have an originating (source) security group to which you
                  want to add an outbound rule that allows traffic to a destination (target) security
                  group. The target security group also needs an inbound rule that allows traffic from
                  the source security group. Note that you cannot use the Ref function to specify the
                  outbound and inbound rules for each security group. Doing so creates a circular dependency;
                  you cannot have two resources that depend on each other. Instead, use the egress and
                  ingress resources to declare these outbound and inbound rules, as shown in the following
                  template example. 
               </p>
               <div id="JSON" name="JSON" class="section langfilter">
                  <h4 id="aws-properties-ec2-security-group-ingress--examples--VPC_Security_Groups_with_Egress_and_Ingress_Rules--json">JSON</h4><pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="json ">&quot;Resources&quot;: <span>{</span>
   &quot;SourceSG&quot;: <span>{</span>
      &quot;Type&quot;: &quot;AWS::EC2::SecurityGroup&quot;,
      &quot;Properties&quot;: <span>{</span>
         &quot;VpcId&quot; : &quot;vpc-1a2b3c4d&quot;,
         &quot;GroupDescription&quot;: &quot;Sample source security group&quot;
      }
   },
   &quot;TargetSG&quot;: <span>{</span>
      &quot;Type&quot;: &quot;AWS::EC2::SecurityGroup&quot;,
      &quot;Properties&quot;: <span>{</span>
         &quot;VpcId&quot; : &quot;vpc-1a2b3c4d&quot;,
         &quot;GroupDescription&quot;: &quot;Sample target security group&quot;
      }
   },
   &quot;OutboundRule&quot;: <span>{</span>
      &quot;Type&quot;: &quot;AWS::EC2::SecurityGroupEgress&quot;,
      &quot;Properties&quot;:<span>{</span>
         &quot;IpProtocol&quot;: &quot;tcp&quot;,
         &quot;FromPort&quot;: 0,
         &quot;ToPort&quot;: 65535,
         &quot;DestinationSecurityGroupId&quot;: <span>{</span>
            &quot;Fn::GetAtt&quot;: [
               &quot;TargetSG&quot;,
               &quot;GroupId&quot;
            ]
         },
         &quot;GroupId&quot;: <span>{</span>
            &quot;Fn::GetAtt&quot;: [
               &quot;SourceSG&quot;,
               &quot;GroupId&quot;
            ]
         }
      }
   },
   &quot;InboundRule&quot;: <span>{</span>
      &quot;Type&quot;: &quot;AWS::EC2::SecurityGroupIngress&quot;,
      &quot;Properties&quot;:<span>{</span>
         &quot;IpProtocol&quot;: &quot;tcp&quot;,
         &quot;FromPort&quot;: 0,
         &quot;ToPort&quot;: 65535,
         &quot;SourceSecurityGroupId&quot;: <span>{</span>
           &quot;Fn::GetAtt&quot;: [
             &quot;SourceSG&quot;,
             &quot;GroupId&quot;
            ]
         },
         &quot;GroupId&quot;: <span>{</span>
            &quot;Fn::GetAtt&quot;: [
              &quot;TargetSG&quot;,
              &quot;GroupId&quot;
            ]
         }
      }
   }
}</code></pre></div>
               <div id="YAML" name="YAML" class="section langfilter">
                  <h4 id="aws-properties-ec2-security-group-ingress--examples--VPC_Security_Groups_with_Egress_and_Ingress_Rules--yaml">YAML</h4><pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="yaml ">SourceSG:
    Type: AWS::EC2::SecurityGroup
    Properties:
      VpcId: vpc-1a2b3c4d
      GroupDescription: Sample source security group
TargetSG:
    Type: AWS::EC2::SecurityGroup
    Properties:
      VpcId: vpc-1a2b3c4d
      GroupDescription: Sample target security group
OutboundRule:
    Type: AWS::EC2::SecurityGroupEgress
    Properties:
      IpProtocol: tcp
      FromPort: 0
      ToPort: 65535
      DestinationSecurityGroupId:
        Fn::GetAtt:
        - TargetSG
        - GroupId
      GroupId:
        Fn::GetAtt:
        - SourceSG
        - GroupId
InboundRule:
    Type: AWS::EC2::SecurityGroupIngress
    Properties:
      IpProtocol: tcp
      FromPort: 0
      ToPort: 65535
      SourceSecurityGroupId:
        Fn::GetAtt:
        - SourceSG
        - GroupId
      GroupId:
        Fn::GetAtt:
        - TargetSG
        - GroupId</code></pre></div>
               <h3 id="aws-properties-ec2-security-group-ingress--examples--Allow__Ping_Requests">Allow  Ping Requests</h3>
               <p>To allow ping requests, add the ICMP protocol type and specify 8 (echo request) for
                  the ICMP type and either 0 or -1 (all) for the ICMP code. 
               </p>
               <div id="JSON" name="JSON" class="section langfilter">
                  <h4 id="aws-properties-ec2-security-group-ingress--examples--Allow__Ping_Requests--json">JSON</h4><pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="json ">&quot;SGPing&quot; : <span>{</span>
  &quot;Type&quot; : &quot;AWS::EC2::SecurityGroup&quot;,
  &quot;DependsOn&quot;: &quot;VPC&quot;,
  &quot;Properties&quot; : <span>{</span>
     &quot;GroupDescription&quot; : &quot;SG to test ping&quot;,
     &quot;VpcId&quot; : <span>{</span>&quot;Ref&quot; : &quot;VPC&quot;},
     &quot;SecurityGroupIngress&quot; : [ 
        <span>{</span> &quot;IpProtocol&quot; : &quot;tcp&quot;, &quot;FromPort&quot; : 22, &quot;ToPort&quot; : 22, &quot;CidrIp&quot; : &quot;10.0.0.0/24&quot; },
        <span>{</span> &quot;IpProtocol&quot; : &quot;icmp&quot;, &quot;FromPort&quot; : 8, &quot;ToPort&quot; : -1, &quot;CidrIp&quot; : &quot;10.0.0.0/24&quot; }
      ]
   }
}</code></pre></div>
               <div id="YAML" name="YAML" class="section langfilter">
                  <h4 id="aws-properties-ec2-security-group-ingress--examples--Allow__Ping_Requests--yaml">YAML</h4><pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="yaml ">SGPing:
   Type: AWS::EC2::SecurityGroup
    DependsOn: VPC
    Properties:
      GroupDescription: SG to test ping
      VpcId:
         Ref: VPC
      SecurityGroupIngress:
      - IpProtocol: tcp
        FromPort: 22
        ToPort: 22
        CidrIp: 10.0.0.0/24
      - IpProtocol: icmp
        FromPort: 8
        ToPort: -1
        CidrIp: 10.0.0.0/24</code></pre></div>
               <awsdocs-copyright class="copyright-print"></awsdocs-copyright>
            </div>
            <noscript>
               <div>
                  <div>
                     <div>
                        <div id="js_error_message">
                           <p><img src="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/%0A                              https://d1ge0kk1l5kms0.cloudfront.net/images/G/01/webservices/console/warning.png%0A                            " alt="Warning"> <strong>Javascript is disabled or is unavailable in your
                                 browser.</strong></p>
                           <p>To use the AWS Documentation, Javascript must be
                              enabled. Please refer to your browser&apos;s Help pages for instructions.
                           </p>
                        </div>
                     </div>
                  </div>
               </div>
            </noscript>
            
            <awsdocs-page-utilities></awsdocs-page-utilities>
         </div></div>
</body>
</html>