<!DOCTYPE html>
<html>
<head>
    <link href="css/awsdocs.css" rel="stylesheet" type="text/css">
    <script type="text/javascript" src="js/jquery.min.js"></script>
    <script type="text/javascript" src="js/awsdocs.min.js"></script>
    <meta charset="utf-8">
</head>
<body>
    <div id="content" style="padding: 10px 30px;">
    <div id="main-content" class="awsui-util-container">
                              <div id="main-col-body">
                                 <awsdocs-language-banner data-service="$ctrl.pageService"></awsdocs-language-banner>
                                 <h1 class="topictitle" id="aws-resource-ec2-trafficmirrorsession">AWS::EC2::TrafficMirrorSession</h1>
                                 <div class="awsdocs-page-header-container">
                                    <awsdocs-page-header></awsdocs-page-header>
                                    <awsdocs-filter-selector id="awsdocs-filter-selector"></awsdocs-filter-selector>
                                 </div>
                                 <p>Creates a Traffic Mirror session.</p>
                                 <p>A Traffic Mirror session actively copies packets from a Traffic Mirror source to a
                                    Traffic Mirror target. Create a filter, and then assign it
                                    to the session to define a subset of the traffic to mirror, for example all TCP
                                    traffic.
                                 </p>
                                 <p>The Traffic Mirror source and the Traffic Mirror target (monitoring appliances) can
                                    be in the same VPC, or in a different VPC connected via VPC peering or a transit gateway.
                                    
                                 </p>
                                 <p>By default, no traffic is mirrored. Use <a href="aws-resource-ec2-trafficmirrorfilterrule.html">AWS::EC2::TrafficMirrorFilterRule</a> to
                                    specify filter rules that specify the traffic to mirror.
                                 </p>
                                 <h2 id="aws-resource-ec2-trafficmirrorsession-syntax">Syntax</h2>
                                 <p>To declare this entity in your AWS CloudFormation template, use the following syntax:</p>
                                 <div id="JSON" name="JSON" class="section langfilter">
                                    <h3 id="aws-resource-ec2-trafficmirrorsession-syntax.json">JSON</h3><pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="json "><span>{</span>
  &quot;Type&quot; : &quot;AWS::EC2::TrafficMirrorSession&quot;,
  &quot;Properties&quot; : <span>{</span>
      &quot;<a href="#cfn-ec2-trafficmirrorsession-description">Description</a>&quot; : <code class="replaceable">String</code>,
      &quot;<a href="#cfn-ec2-trafficmirrorsession-networkinterfaceid">NetworkInterfaceId</a>&quot; : <code class="replaceable">String</code>,
      &quot;<a href="#cfn-ec2-trafficmirrorsession-packetlength">PacketLength</a>&quot; : <code class="replaceable">Integer</code>,
      &quot;<a href="#cfn-ec2-trafficmirrorsession-sessionnumber">SessionNumber</a>&quot; : <code class="replaceable">Integer</code>,
      &quot;<a href="#cfn-ec2-trafficmirrorsession-tags">Tags</a>&quot; : <code class="replaceable">[ <a href="aws-properties-resource-tags.html">Tag</a>, ... ]</code>,
      &quot;<a href="#cfn-ec2-trafficmirrorsession-trafficmirrorfilterid">TrafficMirrorFilterId</a>&quot; : <code class="replaceable">String</code>,
      &quot;<a href="#cfn-ec2-trafficmirrorsession-trafficmirrortargetid">TrafficMirrorTargetId</a>&quot; : <code class="replaceable">String</code>,
      &quot;<a href="#cfn-ec2-trafficmirrorsession-virtualnetworkid">VirtualNetworkId</a>&quot; : <code class="replaceable">Integer</code>
    }
}
</code></pre></div>
                                 <div id="YAML" name="YAML" class="section langfilter">
                                    <h3 id="aws-resource-ec2-trafficmirrorsession-syntax.yaml">YAML</h3><pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="yaml ">Type: AWS::EC2::TrafficMirrorSession
Properties: 
  <a href="#cfn-ec2-trafficmirrorsession-description">Description</a>: <code class="replaceable">String</code>
  <a href="#cfn-ec2-trafficmirrorsession-networkinterfaceid">NetworkInterfaceId</a>: <code class="replaceable">String</code>
  <a href="#cfn-ec2-trafficmirrorsession-packetlength">PacketLength</a>: <code class="replaceable">Integer</code>
  <a href="#cfn-ec2-trafficmirrorsession-sessionnumber">SessionNumber</a>: <code class="replaceable">Integer</code>
  <a href="#cfn-ec2-trafficmirrorsession-tags">Tags</a>: <code class="replaceable">
    - <a href="aws-properties-resource-tags.html">Tag</a></code>
  <a href="#cfn-ec2-trafficmirrorsession-trafficmirrorfilterid">TrafficMirrorFilterId</a>: <code class="replaceable">String</code>
  <a href="#cfn-ec2-trafficmirrorsession-trafficmirrortargetid">TrafficMirrorTargetId</a>: <code class="replaceable">String</code>
  <a href="#cfn-ec2-trafficmirrorsession-virtualnetworkid">VirtualNetworkId</a>: <code class="replaceable">Integer</code>
</code></pre></div>
                                 <h2 id="aws-resource-ec2-trafficmirrorsession-properties">Properties</h2>
                                 <div class="variablelist">
                                    <dl>
                                       <dt><a id="cfn-ec2-trafficmirrorsession-description"></a><span class="term"><code class="code">Description</code></span></dt>
                                       <dd>
                                          
                                          <p>The description of the Traffic Mirror session.</p>
                                          
                                          <p><em>Required</em>: No
                                          </p>
                                          <p><em>Type</em>: String
                                          </p>
                                          <p><em>Update requires</em>: <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-update-behaviors.html#update-no-interrupt">No interruption</a></p>
                                       </dd>
                                       <dt><a id="cfn-ec2-trafficmirrorsession-networkinterfaceid"></a><span class="term"><code class="code">NetworkInterfaceId</code></span></dt>
                                       <dd>
                                          
                                          <p>The ID of the source network interface.</p>
                                          
                                          <p><em>Required</em>: Yes
                                          </p>
                                          <p><em>Type</em>: String
                                          </p>
                                          <p><em>Update requires</em>: <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-update-behaviors.html#update-replacement">Replacement</a></p>
                                       </dd>
                                       <dt><a id="cfn-ec2-trafficmirrorsession-packetlength"></a><span class="term"><code class="code">PacketLength</code></span></dt>
                                       <dd>
                                          
                                          <p>The number of bytes in each packet to mirror. These are bytes after the VXLAN header.
                                             Do
                                             not specify this parameter when you want to mirror the entire packet. To mirror a
                                             subset of
                                             the packet, set this to the length (in bytes) that you want to mirror. For example,
                                             if you
                                             set this value to 100, then the first 100 bytes that meet the filter criteria are
                                             copied to
                                             the target.
                                          </p>
                                          
                                          <p>If you do not want to mirror the entire packet, use the <code class="code">PacketLength</code> parameter to specify the number of bytes in each packet to mirror.
                                          </p>
                                          
                                          <p><em>Required</em>: No
                                          </p>
                                          <p><em>Type</em>: Integer
                                          </p>
                                          <p><em>Update requires</em>: <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-update-behaviors.html#update-no-interrupt">No interruption</a></p>
                                       </dd>
                                       <dt><a id="cfn-ec2-trafficmirrorsession-sessionnumber"></a><span class="term"><code class="code">SessionNumber</code></span></dt>
                                       <dd>
                                          
                                          <p>The session number determines the order in which sessions are evaluated when an interface
                                             is used by multiple sessions. The first session with a matching filter is the one
                                             that mirrors the packets.
                                          </p>
                                          
                                          <p>Valid values are 1-32766.</p>
                                          
                                          <p><em>Required</em>: Yes
                                          </p>
                                          <p><em>Type</em>: Integer
                                          </p>
                                          <p><em>Update requires</em>: <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-update-behaviors.html#update-no-interrupt">No interruption</a></p>
                                       </dd>
                                       <dt><a id="cfn-ec2-trafficmirrorsession-tags"></a><span class="term"><code class="code">Tags</code></span></dt>
                                       <dd>
                                          
                                          <p>The tags to assign to a Traffic Mirror session.</p>
                                          
                                          <p><em>Required</em>: No
                                          </p>
                                          <p><em>Type</em>: List of <a href="aws-properties-resource-tags.html">Tag</a></p>
                                          <p><em>Update requires</em>: <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-update-behaviors.html#update-no-interrupt">No interruption</a></p>
                                       </dd>
                                       <dt><a id="cfn-ec2-trafficmirrorsession-trafficmirrorfilterid"></a><span class="term"><code class="code">TrafficMirrorFilterId</code></span></dt>
                                       <dd>
                                          
                                          <p>The ID of the Traffic Mirror filter.</p>
                                          
                                          <p><em>Required</em>: Yes
                                          </p>
                                          <p><em>Type</em>: String
                                          </p>
                                          <p><em>Update requires</em>: <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-update-behaviors.html#update-no-interrupt">No interruption</a></p>
                                       </dd>
                                       <dt><a id="cfn-ec2-trafficmirrorsession-trafficmirrortargetid"></a><span class="term"><code class="code">TrafficMirrorTargetId</code></span></dt>
                                       <dd>
                                          
                                          <p>The ID of the Traffic Mirror target.</p>
                                          
                                          <p><em>Required</em>: Yes
                                          </p>
                                          <p><em>Type</em>: String
                                          </p>
                                          <p><em>Update requires</em>: <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-update-behaviors.html#update-no-interrupt">No interruption</a></p>
                                       </dd>
                                       <dt><a id="cfn-ec2-trafficmirrorsession-virtualnetworkid"></a><span class="term"><code class="code">VirtualNetworkId</code></span></dt>
                                       <dd>
                                          
                                          <p>The VXLAN ID for the Traffic Mirror session. For more information about the VXLAN
                                             protocol, see <a href="https://tools.ietf.org/html/rfc7348" target="_blank"><span>RFC 7348</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a>. If you do
                                             not specify a <code class="code">VirtualNetworkId</code>, an account-wide unique id is chosen at
                                             random.
                                          </p>
                                          
                                          <p><em>Required</em>: No
                                          </p>
                                          <p><em>Type</em>: Integer
                                          </p>
                                          <p><em>Update requires</em>: <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-update-behaviors.html#update-no-interrupt">No interruption</a></p>
                                       </dd>
                                    </dl>
                                 </div>
                                 <h2 id="aws-resource-ec2-trafficmirrorsession-return-values">Return values</h2>
                                 <h3 id="aws-resource-ec2-trafficmirrorsession-return-values-ref">Ref</h3>
                                 <p>When you pass the logical ID of this resource to the intrinsic <code class="code">Ref</code> function, <code class="code">Ref</code> returns the ID of the Traffic Mirror Session.
                                 </p>
                                 <p>For more information about using the <code class="code">Ref</code> function, see <a href="intrinsic-function-reference-ref.html">Ref</a>.
                                 </p>
                                 <h2 id="aws-resource-ec2-trafficmirrorsession--examples">Examples</h2>
                                 <h3 id="aws-resource-ec2-trafficmirrorsession--examples--Create_a_Traffic_Mirror_Session">Create a Traffic Mirror Session</h3>
                                 <p>This is a traffic mirror session that mirrors the first 100 bytes in each packet.</p>
                                 <div id="JSON" name="JSON" class="section langfilter">
                                    <h4 id="aws-resource-ec2-trafficmirrorsession--examples--Create_a_Traffic_Mirror_Session--json">JSON</h4><pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="json "><span>{</span>
  &quot;SampleTrafficMirrorSession&quot;: <span>{</span>
    &quot;Type&quot;: &quot;AWS::EC2::TrafficMirrorSession&quot;,
    &quot;Properties&quot;: <span>{</span>
      &quot;Description&quot;: &quot;Example traffic mirror session&quot;,
      &quot;NetworkInterfaceId&quot;: &quot;eni-070203a001EXAMPLE&quot;,
      &quot;TrafficMirrorTargetId&quot;: &quot;tmt-5319fsEXAMPLE&quot;,
      &quot;TrafficMirrorFilterId&quot;: &quot;tmf-1tdbhqEXAMPLE&quot;,
      &quot;SessionNumber&quot;: 1,
      &quot;PacketLength&quot;: 100,
      &quot;VirtualNetworkId&quot;: 1234,
      &quot;Tags&quot;: [
        <span>{</span>
          &quot;Key&quot;: &quot;Name&quot;,
          &quot;Value&quot;: &quot;SampleSession&quot;
        }
      ]
    }
  }
}
</code></pre></div>
                                 <div id="YAML" name="YAML" class="section langfilter">
                                    <h4 id="aws-resource-ec2-trafficmirrorsession--examples--Create_a_Traffic_Mirror_Session--yaml">YAML</h4><pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="yaml ">SampleTrafficMirrorSession:
  Type: &quot;AWS::EC2::TrafficMirrorSession&quot;
  Properties:
    Description: &quot;Example traffic mirror session&quot;
    NetworkInterfaceId: &quot;eni-070203a001EXAMPLE&quot;
    TrafficMirrorTargetId: &quot;tmt-5319fsEXAMPLE&quot;
    TrafficMirrorFilterId: &quot;tmf-1tdbhqEXAMPLE&quot;
    SessionNumber: 1
    PacketLength: 100
    VirtualNetworkId: 1234
    Tags:
    - Key: &quot;Name&quot;
      Value: &quot;SampleSession&quot;

         </code></pre></div>
                                 <h2 id="aws-resource-ec2-trafficmirrorsession--seealso">See also</h2>
                                 <div class="itemizedlist">
                                     
                                     
                                    
                                    <ul class="itemizedlist" type="disc">
                                       <li class="listitem">
                                          
                                          <p><a href="https://docs.aws.amazon.com/vpc/latest/mirroring/traffic-mirroring-how-it-works.html#traffic-mirroring-sessions">Traffic Mirror Sessions</a>
                                             in <em>Traffic Mirroring</em></p>
                                          
                                       </li>
                                       <li class="listitem">
                                          
                                          <p><a href="https://docs.aws.amazon.com/AWSEC2/latest/APIReference/API_CreateTrafficMirrorSession.html">CreateTrafficMirrorSession</a> in the 
                                             <em>Amazon EC2 API Reference</em></p>
                                          
                                       </li>
                                    </ul>
                                 </div>
                                 <awsdocs-copyright class="copyright-print"></awsdocs-copyright>
                                 <awsdocs-thumb-feedback right-edge="{{$ctrl.thumbFeedbackRightEdge}}"></awsdocs-thumb-feedback>
                              </div>
                              <noscript>
                                 <div>
                                    <div>
                                       <div>
                                          <div id="js_error_message">
                                             <p><img src="https://d1ge0kk1l5kms0.cloudfront.net/images/G/01/webservices/console/warning.png" alt="Warning"> <strong>Javascript is disabled or is unavailable in your
                                                   browser.</strong></p>
                                             <p>To use the AWS Documentation, Javascript must be
                                                enabled. Please refer to your browser&apos;s Help pages for instructions.
                                             </p>
                                          </div>
                                       </div>
                                    </div>
                                 </div>
                              </noscript>
                              
                              <awsdocs-page-utilities></awsdocs-page-utilities>
                           </div></div>
</body>
</html>