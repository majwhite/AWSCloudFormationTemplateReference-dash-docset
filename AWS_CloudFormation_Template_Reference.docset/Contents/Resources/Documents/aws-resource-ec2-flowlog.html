<!DOCTYPE html>
<html>
<head>
    <link href="css/awsdocs.css" rel="stylesheet" type="text/css">
    <script type="text/javascript" src="js/jquery.min.js"></script>
    <script type="text/javascript" src="js/awsdocs.min.js"></script>
    <meta charset="utf-8">
</head>
<body>
    <div id="content" style="padding: 10px 30px;">
    <h1 class="topictitle" id="aws-resource-ec2-flowlog">AWS::EC2::FlowLog</h1><p>Specifies an Amazon Elastic Compute Cloud 
                        (Amazon EC2) flow log that captures IP traffic for a specified network interface,
                        subnet, 
                        or VPC. To view the log data, use Amazon CloudWatch Logs (CloudWatch Logs) to help
                        
                        troubleshoot connection issues. For example, you can use a flow log to investigate
                        why 
                        certain traffic isn&apos;t reaching an instance, which can help you diagnose overly restrictive
                        
                        security group rules. For more information, see 
                        <a href="https://docs.aws.amazon.com/vpc/latest/userguide/flow-logs.html">VPC Flow Logs</a> 
                        in the <em>Amazon VPC User Guide</em>.
                     </p><h2 id="aws-resource-ec2-flowlog-syntax">Syntax</h2><p>To declare this entity in your AWS CloudFormation template, use the following syntax:</p><div id="JSON" name="JSON" class="section langfilter">
                        <h3 id="aws-resource-ec2-flowlog-syntax.json">JSON</h3><pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="json ">{
  &quot;Type&quot; : &quot;AWS::EC2::FlowLog&quot;,
  &quot;Properties&quot; : {
      &quot;<a href="#cfn-ec2-flowlog-deliverlogspermissionarn">DeliverLogsPermissionArn</a>&quot; : <em class="replaceable"><code>String</code></em>,
      &quot;<a href="#cfn-ec2-flowlog-logdestination">LogDestination</a>&quot; : <em class="replaceable"><code>String</code></em>,
      &quot;<a href="#cfn-ec2-flowlog-logdestinationtype">LogDestinationType</a>&quot; : <em class="replaceable"><code>String</code></em>,
      &quot;<a href="#cfn-ec2-flowlog-loggroupname">LogGroupName</a>&quot; : <em class="replaceable"><code>String</code></em>,
      &quot;<a href="#cfn-ec2-flowlog-resourceid">ResourceId</a>&quot; : <em class="replaceable"><code>String</code></em>,
      &quot;<a href="#cfn-ec2-flowlog-resourcetype">ResourceType</a>&quot; : <em class="replaceable"><code>String</code></em>,
      &quot;<a href="#cfn-ec2-flowlog-traffictype">TrafficType</a>&quot; : <em class="replaceable"><code>String</code></em>
    }
}
</code></pre></div><div id="YAML" name="YAML" class="section langfilter">
                        <h3 id="aws-resource-ec2-flowlog-syntax.yaml">YAML</h3><pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="yaml ">Type: AWS::EC2::FlowLog
Properties: 
  <a href="#cfn-ec2-flowlog-deliverlogspermissionarn">DeliverLogsPermissionArn</a>: <em class="replaceable"><code>String</code></em>
  <a href="#cfn-ec2-flowlog-logdestination">LogDestination</a>: <em class="replaceable"><code>String</code></em>
  <a href="#cfn-ec2-flowlog-logdestinationtype">LogDestinationType</a>: <em class="replaceable"><code>String</code></em>
  <a href="#cfn-ec2-flowlog-loggroupname">LogGroupName</a>: <em class="replaceable"><code>String</code></em>
  <a href="#cfn-ec2-flowlog-resourceid">ResourceId</a>: <em class="replaceable"><code>String</code></em>
  <a href="#cfn-ec2-flowlog-resourcetype">ResourceType</a>: <em class="replaceable"><code>String</code></em>
  <a href="#cfn-ec2-flowlog-traffictype">TrafficType</a>: <em class="replaceable"><code>String</code></em>
</code></pre></div><h2 id="aws-resource-ec2-flowlog-properties">Properties</h2><div class="variablelist">
                        <dl>
                           <dt><a id="cfn-ec2-flowlog-deliverlogspermissionarn"></a><span class="term"><code class="code">DeliverLogsPermissionArn</code></span></dt>
                           <dd>
                              	      
                              <p>The ARN for the IAM role that permits Amazon EC2 to publish flow logs to a CloudWatch
                                 Logs log group 
                                 		in your account.
                              </p>
                              	      
                              <p>If you specify <code class="code">LogDestinationType</code> as <code class="code">s3</code>, do not specify 
                                 		<code class="code">DeliverLogsPermissionArn</code> or <code class="code">LogGroupName</code>.
                              </p>
                              
                              <p><em>Required</em>: No
                              </p>
                              <p><em>Type</em>: String
                              </p>
                              <p><em>Update requires</em>: <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-update-behaviors.html#update-replacement">Replacement</a></p>
                           </dd>
                           <dt><a id="cfn-ec2-flowlog-logdestination"></a><span class="term"><code class="code">LogDestination</code></span></dt>
                           <dd>
                              		       
                              <p>Specifies the destination to which the flow log data is to be published. Flow log
                                 data can be published 
                                 			to a CloudWatch Logs log group or an Amazon S3 bucket. The value specified for
                                 this parameter depends on the value specified
                                 			for <code class="code">LogDestinationType</code>.
                              </p>
                              		       
                              <p>If LogDestinationType is not specified or <code class="code">cloud-watch-logs</code>, specify the Amazon Resource Name 
                                 			(ARN) of the CloudWatch Logs log group.
                              </p> 
                              		       
                              <p>If LogDestinationType is <code class="code">s3</code>, specify the ARN of the Amazon S3 bucket. You can also specify a 
                                 			subfolder in the bucket. To specify a subfolder in the bucket, use the following
                                 ARN format: 
                                 			<code class="code">bucket_ARN/subfolder_name/</code>. For example, to specify a subfolder named <code class="code">my-logs</code> in a 
                                 			bucket named <code class="code">my-bucket</code>, use the following ARN: <code class="code">arn:aws:s3:::my-bucket/my-logs/</code>. You 
                                 			cannot use <code class="code">AWSLogs</code> as a subfolder name. This is a reserved term.
                              </p>
                              
                              <p><em>Required</em>: No
                              </p>
                              <p><em>Type</em>: String
                              </p>
                              <p><em>Update requires</em>: <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-update-behaviors.html#update-replacement">Replacement</a></p>
                           </dd>
                           <dt><a id="cfn-ec2-flowlog-logdestinationtype"></a><span class="term"><code class="code">LogDestinationType</code></span></dt>
                           <dd>
                              		       
                              <p>Specifies the type of destination to which the flow log data is to be published. Flow
                                 log data can be 
                                 			published to CloudWatch Logs or Amazon S3. To publish flow log data to CloudWatch
                                 Logs, specify <code class="code">cloud-watch-logs</code>. To 
                                 			publish flow log data to Amazon S3, specify <code class="code">s3</code>.
                              </p>
                              		       
                              <p>If you specify <code class="code">LogDestinationType</code> as <code class="code">s3</code>, do not specify 
                                 			<code class="code">DeliverLogsPermissionArn</code> or <code class="code">LogGroupName</code>.
                              </p>
                              		       
                              <p>Default: <code class="code">cloud-watch-logs</code>
                                 
                              </p>
                              	     
                              <p><em>Required</em>: No
                              </p>
                              <p><em>Type</em>: String
                              </p>
                              <p><em>Allowed Values</em>: <code class="code">cloud-watch-logs | s3</code></p>
                              <p><em>Update requires</em>: <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-update-behaviors.html#update-replacement">Replacement</a></p>
                           </dd>
                           <dt><a id="cfn-ec2-flowlog-loggroupname"></a><span class="term"><code class="code">LogGroupName</code></span></dt>
                           <dd>
                              	      
                              <p>The name of a new or existing CloudWatch Logs log group where Amazon EC2 publishes
                                 your flow logs.
                              </p>
                              	      
                              <p>If you specify <code class="code">LogDestinationType</code> as <code class="code">s3</code>, do not specify 
                                 		<code class="code">DeliverLogsPermissionArn</code> or <code class="code">LogGroupName</code>.
                              </p>
                              
                              <p><em>Required</em>: No
                              </p>
                              <p><em>Type</em>: String
                              </p>
                              <p><em>Update requires</em>: <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-update-behaviors.html#update-replacement">Replacement</a></p>
                           </dd>
                           <dt><a id="cfn-ec2-flowlog-resourceid"></a><span class="term"><code class="code">ResourceId</code></span></dt>
                           <dd>
                              	      
                              <p>The ID of the subnet, network interface, or VPC for which you want to create a flow
                                 log.
                              </p>
                              
                              <p>Constraints: Maximum of 1000 resources</p>
                              
                              <p><em>Required</em>: Yes
                              </p>
                              <p><em>Type</em>: String
                              </p>
                              <p><em>Update requires</em>: <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-update-behaviors.html#update-replacement">Replacement</a></p>
                           </dd>
                           <dt><a id="cfn-ec2-flowlog-resourcetype"></a><span class="term"><code class="code">ResourceType</code></span></dt>
                           <dd>
                              	      
                              <p>The type of resource for which to create the flow log. For example, if you specified
                                 a VPC ID for 
                                 		the <code class="code">ResourceId</code> property, specify <code class="code">VPC</code> for this property.
                              </p>
                              
                              <p><em>Required</em>: Yes
                              </p>
                              <p><em>Type</em>: String
                              </p>
                              <p><em>Allowed Values</em>: <code class="code">NetworkInterface | Subnet | VPC</code></p>
                              <p><em>Update requires</em>: <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-update-behaviors.html#update-replacement">Replacement</a></p>
                           </dd>
                           <dt><a id="cfn-ec2-flowlog-traffictype"></a><span class="term"><code class="code">TrafficType</code></span></dt>
                           <dd>
                              	      
                              <p>The type of traffic to log. You can log traffic that the resource accepts or rejects,
                                 or all traffic.
                              </p>
                              
                              <p><em>Required</em>: Yes
                              </p>
                              <p><em>Type</em>: String
                              </p>
                              <p><em>Allowed Values</em>: <code class="code">ACCEPT | ALL | REJECT</code></p>
                              <p><em>Update requires</em>: <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-update-behaviors.html#update-replacement">Replacement</a></p>
                           </dd>
                        </dl>
                     </div><h2 id="aws-resource-ec2-flowlog-return-values">Return Values</h2><h3 id="aws-resource-ec2-flowlog-return-values-ref">Ref</h3><p>When you pass the logical ID of this resource to the intrinsic <code class="code">Ref</code> function, <code class="code">Ref</code> returns the flow log ID, such as <code class="code">fl-1a23b456</code>.
                     </p><p>For more information about using the <code class="code">Ref</code> function, see <a href="intrinsic-function-reference-ref.html">Ref</a>.
                     </p><h2 id="aws-resource-ec2-flowlog--examples">Examples</h2><h3 id="aws-resource-ec2-flowlog--examples--Creating_a_flow_log_that_monitors_all_traffic_types">Creating a flow log that monitors all traffic types</h3><p>The following example creates a flow log for the VPC called MyVPC and logs all traffic
                        types. Amazon EC2 publishes the logs to the <code class="code">FlowLogsGroup</code> log group.
                     </p><div id="JSON" name="JSON" class="section langfilter">
                        <h4 id="aws-resource-ec2-flowlog--examples--Creating_a_flow_log_that_monitors_all_traffic_types--json">JSON</h4><pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="json ">&quot;MyFlowLog&quot; : {
  &quot;Type&quot; : &quot;AWS::EC2::FlowLog&quot;,
  &quot;Properties&quot; : {
    &quot;DeliverLogsPermissionArn&quot; : { &quot;Fn::GetAtt&quot; : [&quot;FlowLogRole&quot;, &quot;Arn&quot;] },
    &quot;LogGroupName&quot; : &quot;FlowLogsGroup&quot;,
    &quot;ResourceId&quot; : { &quot;Ref&quot; : &quot;MyVPC&quot; },
    &quot;ResourceType&quot; : &quot;VPC&quot;,
    &quot;TrafficType&quot; : &quot;ALL&quot;
  }
}</code></pre></div><div id="YAML" name="YAML" class="section langfilter">
                        <h4 id="aws-resource-ec2-flowlog--examples--Creating_a_flow_log_that_monitors_all_traffic_types--yaml">YAML</h4><pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="yaml ">MyFlowLog:
  Type: AWS::EC2::FlowLog
  Properties:
    DeliverLogsPermissionArn: !GetAtt FlowLogRole.Arn
    LogGroupName: FlowLogsGroup
    ResourceId: !Ref MyVPC
    ResourceType: VPC
    TrafficType: ALL</code></pre></div><div id="marketing-target"><span class="close-button"></span><div class="marketing-title" id="marketing-title"></div>
                        <div class="marketing-description"><span id="marketing-description"></span><span id="marketing-cta"></span></div>
                     </div></div>
</body>
</html>