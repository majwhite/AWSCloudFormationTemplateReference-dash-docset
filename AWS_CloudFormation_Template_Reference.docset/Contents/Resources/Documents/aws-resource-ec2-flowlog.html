<!DOCTYPE html>
<html>
<head>
    <link href="css/awsdocs.css" rel="stylesheet" type="text/css">
    <script type="text/javascript" src="js/jquery.min.js"></script>
    <script type="text/javascript" src="js/awsdocs.min.js"></script>
    <meta charset="utf-8">
</head>
<body>
    <div id="content" style="padding: 10px 30px;">
    <div id="main-content" class="awsui-util-container">
            <div id="main-col-body">
               <awsdocs-language-banner data-service="$ctrl.pageService"></awsdocs-language-banner>
               <awsdocs-table-manager id="awsdocs-table-manager"></awsdocs-table-manager>
               <h1 class="topictitle" id="aws-resource-ec2-flowlog">AWS::EC2::FlowLog</h1>
               <div class="awsdocs-page-header-container">
                  <awsdocs-page-header></awsdocs-page-header>
                  <awsdocs-filter-selector id="awsdocs-filter-selector"></awsdocs-filter-selector>
               </div>
               <p>Specifies an Amazon Elastic Compute Cloud 
                  (Amazon EC2) flow log that captures IP traffic for a specified network interface,
                  subnet, 
                  or VPC. To view the log data, use Amazon CloudWatch Logs (CloudWatch Logs) to help
                  
                  troubleshoot connection issues. For example, you can use a flow log to investigate
                  why 
                  certain traffic isn&apos;t reaching an instance, which can help you diagnose overly restrictive
                  
                  security group rules. For more information, see 
                  <a href="https://docs.aws.amazon.com/vpc/latest/userguide/flow-logs.html">VPC Flow Logs</a> 
                  in the <em>Amazon VPC User Guide</em>.
               </p>
               <h2 id="aws-resource-ec2-flowlog-syntax">Syntax</h2>
               <p>To declare this entity in your AWS CloudFormation template, use the following syntax:</p>
               <div id="JSON" name="JSON" class="section langfilter">
                  <h3 id="aws-resource-ec2-flowlog-syntax.json">JSON</h3><pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="json "><span>{</span>
  &quot;Type&quot; : &quot;AWS::EC2::FlowLog&quot;,
  &quot;Properties&quot; : <span>{</span>
      &quot;<a href="#cfn-ec2-flowlog-deliverlogspermissionarn">DeliverLogsPermissionArn</a>&quot; : <code class="replaceable">String</code>,
      &quot;<a href="#cfn-ec2-flowlog-logdestination">LogDestination</a>&quot; : <code class="replaceable">String</code>,
      &quot;<a href="#cfn-ec2-flowlog-logdestinationtype">LogDestinationType</a>&quot; : <code class="replaceable">String</code>,
      &quot;<a href="#cfn-ec2-flowlog-loggroupname">LogGroupName</a>&quot; : <code class="replaceable">String</code>,
      &quot;<a href="#cfn-ec2-flowlog-resourceid">ResourceId</a>&quot; : <code class="replaceable">String</code>,
      &quot;<a href="#cfn-ec2-flowlog-resourcetype">ResourceType</a>&quot; : <code class="replaceable">String</code>,
      &quot;<a href="#cfn-ec2-flowlog-traffictype">TrafficType</a>&quot; : <code class="replaceable">String</code>
    }
}
</code></pre></div>
               <div id="YAML" name="YAML" class="section langfilter">
                  <h3 id="aws-resource-ec2-flowlog-syntax.yaml">YAML</h3><pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="yaml ">Type: AWS::EC2::FlowLog
Properties: 
  <a href="#cfn-ec2-flowlog-deliverlogspermissionarn">DeliverLogsPermissionArn</a>: <code class="replaceable">String</code>
  <a href="#cfn-ec2-flowlog-logdestination">LogDestination</a>: <code class="replaceable">String</code>
  <a href="#cfn-ec2-flowlog-logdestinationtype">LogDestinationType</a>: <code class="replaceable">String</code>
  <a href="#cfn-ec2-flowlog-loggroupname">LogGroupName</a>: <code class="replaceable">String</code>
  <a href="#cfn-ec2-flowlog-resourceid">ResourceId</a>: <code class="replaceable">String</code>
  <a href="#cfn-ec2-flowlog-resourcetype">ResourceType</a>: <code class="replaceable">String</code>
  <a href="#cfn-ec2-flowlog-traffictype">TrafficType</a>: <code class="replaceable">String</code>
</code></pre></div>
               <h2 id="aws-resource-ec2-flowlog-properties">Properties</h2>
               <div class="variablelist">
                  <dl>
                     <dt><a id="cfn-ec2-flowlog-deliverlogspermissionarn"></a><span class="term"><code class="code">DeliverLogsPermissionArn</code></span></dt>
                     <dd>
                        
                        <p>The ARN for the IAM role that permits Amazon EC2 to publish flow logs to a CloudWatch
                           Logs log group 
                           in your account.
                        </p>
                        
                        <p>If you specify <code class="code">LogDestinationType</code> as <code class="code">s3</code>, do not specify 
                           <code class="code">DeliverLogsPermissionArn</code> or <code class="code">LogGroupName</code>.
                        </p>
                        
                        <p><em>Required</em>: No
                        </p>
                        <p><em>Type</em>: String
                        </p>
                        <p><em>Update requires</em>: <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-update-behaviors.html#update-replacement">Replacement</a></p>
                     </dd>
                     <dt><a id="cfn-ec2-flowlog-logdestination"></a><span class="term"><code class="code">LogDestination</code></span></dt>
                     <dd>
                        
                        <p>Specifies the destination to which the flow log data is to be published. Flow log
                           data can be published 
                           to a CloudWatch Logs log group or an Amazon S3 bucket. The value specified for this
                           parameter depends on the value specified
                           for <code class="code">LogDestinationType</code>.
                        </p>
                        
                        <p>If <code class="code">LogDestinationType</code> is not specified or <code class="code">cloud-watch-logs</code>,
                           specify the Amazon Resource Name (ARN) of the CloudWatch Logs log group. For example,
                           to publish
                           to a log group called <code class="code">my-logs</code>, specify
                           <code class="code">arn:aws:logs:us-east-1:123456789012:log-group:my-logs</code>. Alternatively,
                           use <code class="code">LogGroupName</code> instead.
                        </p> 
                        
                        <p>If LogDestinationType is <code class="code">s3</code>, specify the ARN of the Amazon S3 bucket. You can also specify a 
                           subfolder in the bucket. To specify a subfolder in the bucket, use the following 
                           ARN format: 
                           <code class="code">bucket_ARN/subfolder_name/</code>. For example, to specify a subfolder named <code class="code">my-logs</code> in a 
                           bucket named <code class="code">my-bucket</code>, use the following ARN: <code class="code">arn:aws:s3:::my-bucket/my-logs/</code>. You 
                           cannot use <code class="code">AWSLogs</code> as a subfolder name. This is a reserved term.
                        </p>
                        
                        <p><em>Required</em>: No
                        </p>
                        <p><em>Type</em>: String
                        </p>
                        <p><em>Update requires</em>: <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-update-behaviors.html#update-replacement">Replacement</a></p>
                     </dd>
                     <dt><a id="cfn-ec2-flowlog-logdestinationtype"></a><span class="term"><code class="code">LogDestinationType</code></span></dt>
                     <dd>
                        
                        <p>Specifies the type of destination to which the flow log data is to be published. Flow
                           log data can be 
                           published to CloudWatch Logs or Amazon S3. To publish flow log data to CloudWatch
                           Logs, specify <code class="code">cloud-watch-logs</code>. To 
                           publish flow log data to Amazon S3, specify <code class="code">s3</code>.
                        </p>
                        
                        <p>If you specify <code class="code">LogDestinationType</code> as <code class="code">s3</code>, do not specify 
                           <code class="code">DeliverLogsPermissionArn</code> or <code class="code">LogGroupName</code>.
                        </p>
                        
                        <p>Default: <code class="code">cloud-watch-logs</code>
                           
                        </p>
                        
                        <p><em>Required</em>: No
                        </p>
                        <p><em>Type</em>: String
                        </p>
                        <p><em>Allowed Values</em>: <code class="code">cloud-watch-logs | s3</code></p>
                        <p><em>Update requires</em>: <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-update-behaviors.html#update-replacement">Replacement</a></p>
                     </dd>
                     <dt><a id="cfn-ec2-flowlog-loggroupname"></a><span class="term"><code class="code">LogGroupName</code></span></dt>
                     <dd>
                        
                        <p>The name of a new or existing CloudWatch Logs log group where Amazon EC2 publishes
                           your flow logs.
                        </p>
                        
                        <p>If you specify <code class="code">LogDestinationType</code> as <code class="code">s3</code>, do not specify 
                           <code class="code">DeliverLogsPermissionArn</code> or <code class="code">LogGroupName</code>.
                        </p>
                        
                        <p><em>Required</em>: No
                        </p>
                        <p><em>Type</em>: String
                        </p>
                        <p><em>Update requires</em>: <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-update-behaviors.html#update-replacement">Replacement</a></p>
                     </dd>
                     <dt><a id="cfn-ec2-flowlog-resourceid"></a><span class="term"><code class="code">ResourceId</code></span></dt>
                     <dd>
                        
                        <p>The ID of the subnet, network interface, or VPC for which you want to create a flow
                           log.
                        </p>
                        
                        <p>Constraints: Maximum of 1000 resources</p>
                        
                        <p><em>Required</em>: Yes
                        </p>
                        <p><em>Type</em>: String
                        </p>
                        <p><em>Update requires</em>: <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-update-behaviors.html#update-replacement">Replacement</a></p>
                     </dd>
                     <dt><a id="cfn-ec2-flowlog-resourcetype"></a><span class="term"><code class="code">ResourceType</code></span></dt>
                     <dd>
                        
                        <p>The type of resource for which to create the flow log. For example, if you specified
                           a VPC ID for 
                           the <code class="code">ResourceId</code> property, specify <code class="code">VPC</code> for this property.
                        </p>
                        
                        <p><em>Required</em>: Yes
                        </p>
                        <p><em>Type</em>: String
                        </p>
                        <p><em>Allowed Values</em>: <code class="code">NetworkInterface | Subnet | VPC</code></p>
                        <p><em>Update requires</em>: <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-update-behaviors.html#update-replacement">Replacement</a></p>
                     </dd>
                     <dt><a id="cfn-ec2-flowlog-traffictype"></a><span class="term"><code class="code">TrafficType</code></span></dt>
                     <dd>
                        
                        <p>The type of traffic to log. You can log traffic that the resource accepts or rejects,
                           or all traffic.
                        </p>
                        
                        <p><em>Required</em>: Yes
                        </p>
                        <p><em>Type</em>: String
                        </p>
                        <p><em>Allowed Values</em>: <code class="code">ACCEPT | ALL | REJECT</code></p>
                        <p><em>Update requires</em>: <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-update-behaviors.html#update-replacement">Replacement</a></p>
                     </dd>
                  </dl>
               </div>
               <h2 id="aws-resource-ec2-flowlog-return-values">Return Values</h2>
               <h3 id="aws-resource-ec2-flowlog-return-values-ref">Ref</h3>
               <p>When you pass the logical ID of this resource to the intrinsic <code class="code">Ref</code> function, <code class="code">Ref</code> returns the flow log ID, such as <code class="code">fl-1a23b456</code>.
               </p>
               <p>For more information about using the <code class="code">Ref</code> function, see <a href="intrinsic-function-reference-ref.html">Ref</a>.
               </p>
               <h2 id="aws-resource-ec2-flowlog--examples">Examples</h2>
               <h3 id="aws-resource-ec2-flowlog--examples--Creating_a_flow_log_that_monitors_all_traffic_types">Creating a flow log that monitors all traffic types</h3>
               <p>The following example creates a flow log for the VPC called MyVPC and logs all traffic
                  types. Amazon EC2 publishes the logs to the <code class="code">FlowLogsGroup</code> log group.
               </p>
               <div id="JSON" name="JSON" class="section langfilter">
                  <h4 id="aws-resource-ec2-flowlog--examples--Creating_a_flow_log_that_monitors_all_traffic_types--json">JSON</h4><pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="json ">&quot;MyFlowLog&quot; : <span>{</span>
  &quot;Type&quot; : &quot;AWS::EC2::FlowLog&quot;,
  &quot;Properties&quot; : <span>{</span>
    &quot;DeliverLogsPermissionArn&quot; : <span>{</span> &quot;Fn::GetAtt&quot; : [&quot;FlowLogRole&quot;, &quot;Arn&quot;] },
    &quot;LogGroupName&quot; : &quot;FlowLogsGroup&quot;,
    &quot;ResourceId&quot; : <span>{</span> &quot;Ref&quot; : &quot;MyVPC&quot; },
    &quot;ResourceType&quot; : &quot;VPC&quot;,
    &quot;TrafficType&quot; : &quot;ALL&quot;
  }
}</code></pre></div>
               <div id="YAML" name="YAML" class="section langfilter">
                  <h4 id="aws-resource-ec2-flowlog--examples--Creating_a_flow_log_that_monitors_all_traffic_types--yaml">YAML</h4><pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="yaml ">MyFlowLog:
  Type: AWS::EC2::FlowLog
  Properties:
    DeliverLogsPermissionArn: !GetAtt FlowLogRole.Arn
    LogGroupName: FlowLogsGroup
    ResourceId: !Ref MyVPC
    ResourceType: VPC
    TrafficType: ALL</code></pre></div>
               <awsdocs-copyright class="copyright-print"></awsdocs-copyright>
            </div>
            <noscript>
               <div>
                  <div>
                     <div>
                        <div id="js_error_message">
                           <p><img src="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/%0A                              https://d1ge0kk1l5kms0.cloudfront.net/images/G/01/webservices/console/warning.png%0A                            " alt="Warning"> <strong>Javascript is disabled or is unavailable in your
                                 browser.</strong></p>
                           <p>To use the AWS Documentation, Javascript must be
                              enabled. Please refer to your browser&apos;s Help pages for instructions.
                           </p>
                        </div>
                     </div>
                  </div>
               </div>
            </noscript>
            
            <awsdocs-page-utilities></awsdocs-page-utilities>
         </div></div>
</body>
</html>