<!DOCTYPE html>
<html>
<head>
    <link href="css/awsdocs.css" rel="stylesheet" type="text/css">
    <script type="text/javascript" src="js/jquery.min.js"></script>
    <script type="text/javascript" src="js/awsdocs.min.js"></script>
    <meta charset="utf-8">
</head>
<body>
    <div id="content" style="padding: 10px 30px;">
    <div id="main-content" class="awsui-util-container">
                              <div id="main-col-body">
                                 <awsdocs-language-banner data-service="$ctrl.pageService"></awsdocs-language-banner>
                                 <h1 class="topictitle" id="aws-attribute-creationpolicy">CreationPolicy attribute</h1>
                                 <div class="awsdocs-page-header-container">
                                    <awsdocs-page-header></awsdocs-page-header>
                                    <awsdocs-filter-selector id="awsdocs-filter-selector"></awsdocs-filter-selector>
                                 </div>
                                 <p>Associate the <code class="code">CreationPolicy</code> attribute with a resource to prevent its status from reaching create complete until
                                    AWS CloudFormation receives a specified number of success signals or the timeout period
                                    is exceeded. To signal a resource, you can use the <a href="./cfn-signal.html">cfn-signal</a> helper script or <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/APIReference/API_SignalResource.html"><code class="code">SignalResource</code></a> API. AWS CloudFormation publishes valid signals to the stack events so that you track
                                    the number of
                                    signals sent.
                                 </p>
                                 <p>The creation policy is invoked only when AWS CloudFormation creates the associated
                                    resource. Currently,
                                    the only AWS CloudFormation resources that support creation policies are <a href="aws-properties-as-group.html">AWS::AutoScaling::AutoScalingGroup</a>, <a href="aws-properties-ec2-instance.html">AWS::EC2::Instance</a>, and <a href="aws-properties-waitcondition.html">AWS::CloudFormation::WaitCondition</a>.
                                 </p>
                                 <p>Use the <code class="code">CreationPolicy</code> attribute when you want to wait on resource configuration actions before stack creation
                                    proceeds. For example, if you install and configure software applications on an EC2
                                    instance, you might want those applications to be running before proceeding. In such
                                    cases, you can add a <code class="code">CreationPolicy</code> attribute to the instance, and then send a success signal to the instance after the
                                    applications are installed and configured. For a detailed
                                    example, see <a href="./deploying.applications.html">Deploying applications on Amazon EC2 with AWS CloudFormation</a>.
                                 </p>
                                 <h2 id="w2ab1c26c23b7b9">Syntax</h2>
                                 
                                 
                                 <div id="JSON" name="JSON" class="section langfilter">
                                    <h3 id="aws-attribute-creationpolicy-syntax.json">JSON</h3>
                                    
                                    <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="nohighlight">&quot;CreationPolicy&quot; : <span>{</span>
  &quot;<a href="#cfn-attributes-creationpolicy-autoscalingcreationpolicy">AutoScalingCreationPolicy</a>&quot; : <span>{</span>
    &quot;<a href="#cfn-attributes-creationpolicy-autoscalingcreationpolicy-minsuccessfulinstancespercent">MinSuccessfulInstancesPercent</a>&quot; : <code class="replaceable">Integer</code>
  },
  &quot;<a href="#cfn-attributes-creationpolicy-resourcesignal">ResourceSignal</a>&quot; : <span>{</span>    
    &quot;<a href="#cfn-attributes-creationpolicy-resourcesignal-count">Count</a>&quot; : <code class="replaceable">Integer</code>,
    &quot;<a href="#cfn-attributes-creationpolicy-resourcesignal-timeout">Timeout</a>&quot; : <code class="replaceable">String</code>
  }
}</code></pre>
                                    </div>
                                 
                                 <div id="YAML" name="YAML" class="section langfilter">
                                    <h3 id="aws-attribute-creationpolicy-syntax.yaml">YAML</h3>
                                    
                                    <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="nohighlight">CreationPolicy:
  <a href="#cfn-attributes-creationpolicy-autoscalingcreationpolicy">AutoScalingCreationPolicy</a>:
    <a href="#cfn-attributes-creationpolicy-autoscalingcreationpolicy-minsuccessfulinstancespercent">MinSuccessfulInstancesPercent</a>: <code class="replaceable">Integer</code>
  <a href="#cfn-attributes-creationpolicy-resourcesignal">ResourceSignal</a>:    
    <a href="#cfn-attributes-creationpolicy-resourcesignal-count">Count</a>: <code class="replaceable">Integer</code>
    <a href="#cfn-attributes-creationpolicy-resourcesignal-timeout">Timeout</a>: <code class="replaceable">String</code>
</code></pre>
                                    </div>
                                 
                                 <h2 id="cfn-attributes-creationpolicy-properties">CreationPolicy properties</h2>
                                 
                                 
                                 <div class="variablelist">
                                     
                                     
                                    
                                    <dl>
                                       
                                       <dt><a id="cfn-attributes-creationpolicy-autoscalingcreationpolicy"></a><span class="term"><code class="code">AutoScalingCreationPolicy</code></span></dt>
                                       
                                       <dd>
                                          
                                          <p>For an Auto Scaling group <a href="./aws-attribute-updatepolicy.html#cfn-attributes-updatepolicy-replacingupdate">replacement update</a>, specifies how many instances must signal success for the update to succeed.
                                          </p>
                                          
                                          <div class="variablelist">
                                              
                                             
                                             <dl>
                                                
                                                <dt><a id="cfn-attributes-creationpolicy-autoscalingcreationpolicy cfn-attributes-creationpolicy-autoscalingcreationpolicy-minsuccessfulinstancespercent"></a><span class="term"><code class="code">MinSuccessfulInstancesPercent</code></span></dt>
                                                
                                                <dd>
                                                   
                                                   <p>Specifies the percentage of instances in an Auto Scaling replacement update that must
                                                      signal success for the update to succeed. You can specify a value from <code class="code">0</code> to <code class="code">100</code>. AWS CloudFormation rounds to the nearest tenth of a percent. For example, if you
                                                      update five instances with a minimum successful percentage of <code class="code">50</code>, three instances must signal success. If an instance doesn&apos;t send a signal within
                                                      the time specified by the <code class="code">Timeout</code>
                                                      property, AWS CloudFormation assumes that the instance wasn&apos;t created.
                                                   </p>
                                                   
                                                   <p><em>Default</em>: <code class="code">100</code></p>
                                                   
                                                   <p><em>Type</em>: Integer
                                                   </p>
                                                   
                                                   <p><em>Required</em>: No
                                                   </p>
                                                   
                                                </dd>
                                                
                                             </dl>
                                          </div>
                                          
                                       </dd>
                                        
                                       
                                       <dt><a id="cfn-attributes-creationpolicy-resourcesignal"></a><span class="term"><code class="code">ResourceSignal</code></span></dt>
                                       
                                       <dd>
                                          
                                          <p>When AWS CloudFormation creates the associated resource, configures the number of
                                             required success signals and the length of time that AWS CloudFormation waits for
                                             those signals.
                                          </p>
                                          
                                          <div class="variablelist">
                                              
                                              
                                             
                                             <dl>
                                                
                                                <dt><a id="cfn-attributes-creationpolicy-resourcesignal cfn-attributes-creationpolicy-resourcesignal-count"></a><span class="term"><code class="code">Count</code></span></dt>
                                                
                                                <dd>
                                                   
                                                   <p>The number of success signals AWS CloudFormation must receive before it sets the resource
                                                      status as <code class="code">CREATE_COMPLETE</code>. If the resource receives a failure signal or doesn&apos;t receive the specified number
                                                      of signals before the timeout period expires, the resource creation fails and AWS
                                                      CloudFormation rolls the stack back.
                                                   </p>
                                                   
                                                   <p><em>Default</em>: <code class="code">1</code></p>
                                                   
                                                   <p><em>Type</em>: Integer
                                                   </p>
                                                   
                                                   <p><em>Required</em>: No
                                                   </p>
                                                   
                                                </dd>
                                                 
                                                
                                                <dt><a id="cfn-attributes-creationpolicy-resourcesignal cfn-attributes-creationpolicy-resourcesignal-timeout"></a><span class="term"><code class="code">Timeout</code></span></dt>
                                                
                                                <dd>
                                                   
                                                   <p>The length of time that AWS CloudFormation waits for the number of signals that was
                                                      specified in the <code class="code">Count</code> property. The timeout period starts after AWS CloudFormation starts creating the
                                                      resource, and the timeout expires no sooner than the time you specify but can occur
                                                      shortly thereafter. The maximum time that you can specify is 12 hours.
                                                   </p>
                                                   
                                                   <p>The value must be in <a href="http://en.wikipedia.org/wiki/ISO_8601#Durations" target="_blank"><span>ISO8601 duration format</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a>, in the form: &quot;PT<code class="replaceable">#</code>H<code class="replaceable">#</code>M<code class="replaceable">#</code>S&quot;, where each <code class="replaceable">#</code> is the number of hours, minutes, and seconds, respectively. For best results, specify
                                                      a period of time that gives your instances plenty of time to get up and running. A
                                                      shorter timeout can cause a rollback.
                                                   </p>
                                                   
                                                   <p><em>Default</em>: <code class="code">PT5M</code> (5 minutes)
                                                   </p>
                                                   
                                                   <p><em>Type</em>: String
                                                   </p>
                                                   
                                                   <p><em>Required</em>: No
                                                   </p>
                                                   
                                                </dd>
                                                
                                             </dl>
                                          </div>
                                          
                                       </dd>
                                       
                                    </dl>
                                 </div>
                                 
                                 <h2 id="w2ab1c26c23b7c13">Examples</h2>
                                 
                                 
                                 <h3 id="w2ab1c26c23b7c13b2">Auto Scaling group</h3>
                                 
                                 
                                 <p>The following example shows how to add a creation policy to an Auto Scaling group.
                                    The creation policy requires three success signals and times out after 15 minutes.
                                 </p>
                                 
                                 <p>To have instances wait for an Elastic Load Balancing health check before they signal
                                    success, add a
                                    health-check verification by using the <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/cfn-init.html">cfn-init</a> helper script. For an example, see the
                                    <code class="code">verify_instance_health</code> command in the <a href="https://github.com/awslabs/aws-cloudformation-templates/blob/master/aws/services/AutoScaling/AutoScalingRollingUpdates.yaml" target="_blank"><span>Auto Scaling rolling updates</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a> sample template.
                                 </p>
                                 
                                 <div id="JSON" name="JSON" class="section langfilter">
                                    <h4 id="aws-attribute-creationpolicy-example-1.json">JSON</h4>
                                    
                                    <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="">&quot;AutoScalingGroup&quot;: <span>{</span>
  &quot;Type&quot;: &quot;AWS::AutoScaling::AutoScalingGroup&quot;,
  &quot;Properties&quot;: <span>{</span>
    &quot;AvailabilityZones&quot;: <span>{</span> &quot;Fn::GetAZs&quot;: &quot;&quot; },
    &quot;LaunchConfigurationName&quot;: <span>{</span> &quot;Ref&quot;: &quot;LaunchConfig&quot; },
    &quot;DesiredCapacity&quot;: &quot;3&quot;,
    &quot;MinSize&quot;: &quot;1&quot;,
    &quot;MaxSize&quot;: &quot;4&quot;
  },
  &quot;CreationPolicy&quot;: <span>{</span>
    &quot;ResourceSignal&quot;: <span>{</span>
      &quot;Count&quot;: &quot;3&quot;,
      &quot;Timeout&quot;: &quot;PT15M&quot;
    }
  },
  &quot;UpdatePolicy&quot; : <span>{</span>
    &quot;AutoScalingScheduledAction&quot; : <span>{</span>
      &quot;IgnoreUnmodifiedGroupSizeProperties&quot; : &quot;true&quot;
    },
    &quot;AutoScalingRollingUpdate&quot; : <span>{</span>
      &quot;MinInstancesInService&quot; : &quot;1&quot;,
      &quot;MaxBatchSize&quot; : &quot;2&quot;,
      &quot;PauseTime&quot; : &quot;PT1M&quot;,
      &quot;WaitOnResourceSignals&quot; : &quot;true&quot;
    }
  }
},
&quot;LaunchConfig&quot;: <span>{</span>
  &quot;Type&quot;: &quot;AWS::AutoScaling::LaunchConfiguration&quot;,
  &quot;Properties&quot;: <span>{</span>
    &quot;ImageId&quot;: &quot;ami-16d18a7e&quot;,
    &quot;InstanceType&quot;: &quot;t2.micro&quot;,
    &quot;UserData&quot;: <span>{</span>
      &quot;Fn::Base64&quot;: <span>{</span>
        &quot;Fn::Join&quot; : [ &quot;&quot;, [
          &quot;#!/bin/bash -xe\n&quot;,
          &quot;yum install -y aws-cfn-bootstrap\n&quot;,
          &quot;/opt/aws/bin/cfn-signal -e 0 --stack &quot;, <span>{</span> &quot;Ref&quot;: &quot;AWS::StackName&quot; },
          &quot; --resource AutoScalingGroup &quot;,
          &quot; --region &quot;, <span>{</span> &quot;Ref&quot; : &quot;AWS::Region&quot; }, &quot;\n&quot;
        ] ]
      }
    }
  }
}</code></pre>
                                    </div>
                                 
                                 <div id="YAML" name="YAML" class="section langfilter">
                                    <h4 id="aws-attribute-creationpolicy-example-1.yaml">YAML</h4>
                                    
                                    <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="">AutoScalingGroup:
  Type: AWS::AutoScaling::AutoScalingGroup
  Properties:
    AvailabilityZones:
      Fn::GetAZs: &apos;&apos;
    LaunchConfigurationName:
      Ref: LaunchConfig
    DesiredCapacity: &apos;3&apos;
    MinSize: &apos;1&apos;
    MaxSize: &apos;4&apos;
  CreationPolicy:
    ResourceSignal:
      Count: &apos;3&apos;
      Timeout: PT15M
  UpdatePolicy:
    AutoScalingScheduledAction:
      IgnoreUnmodifiedGroupSizeProperties: &apos;true&apos;
    AutoScalingRollingUpdate:
      MinInstancesInService: &apos;1&apos;
      MaxBatchSize: &apos;2&apos;
      PauseTime: PT1M
      WaitOnResourceSignals: &apos;true&apos;
LaunchConfig:
  Type: AWS::AutoScaling::LaunchConfiguration
  Properties:
    ImageId: ami-16d18a7e
    InstanceType: t2.micro
    UserData:
      &quot;Fn::Base64&quot;:
        !Sub |
          #!/bin/bash -xe
          yum update -y aws-cfn-bootstrap
          /opt/aws/bin/cfn-signal -e $? --stack $<span>{</span>AWS::StackName} --resource AutoScalingGroup --region $<span>{</span>AWS::Region}</code></pre>
                                    </div>
                                  
                                 
                                 <h3 id="w2ab1c26c23b7c13b4">WaitCondition</h3>
                                 
                                 
                                 <p>The following example shows how to add a creation policy to a wait condition.</p>
                                 
                                 <div id="JSON" name="JSON" class="section langfilter">
                                    <h4 id="aws-attribute-creationpolicy-example-2.json">JSON</h4>
                                    
                                    <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="">&quot;WaitCondition&quot; : <span>{</span>
    &quot;Type&quot; : &quot;AWS::CloudFormation::WaitCondition&quot;,
    &quot;CreationPolicy&quot; : <span>{</span>
        &quot;ResourceSignal&quot; : <span>{</span>
            &quot;Timeout&quot; : &quot;PT15M&quot;,
            &quot;Count&quot; : &quot;5&quot;
        }
    }
}</code></pre>
                                    </div>
                                 
                                 <div id="YAML" name="YAML" class="section langfilter">
                                    <h4 id="aws-attribute-creationpolicy-example-2.yaml">YAML</h4>
                                    
                                    <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="">WaitCondition:
  Type: AWS::CloudFormation::WaitCondition
  CreationPolicy:
    ResourceSignal:
      Timeout: PT15M
      Count: 5</code></pre>
                                    </div>
                                        
                                 
                                 <awsdocs-copyright class="copyright-print"></awsdocs-copyright>
                              </div>
                              <noscript>
                                 <div>
                                    <div>
                                       <div>
                                          <div id="js_error_message">
                                             <p><img src="https://d1ge0kk1l5kms0.cloudfront.net/images/G/01/webservices/console/warning.png" alt="Warning"> <strong>Javascript is disabled or is unavailable in your
                                                   browser.</strong></p>
                                             <p>To use the AWS Documentation, Javascript must be
                                                enabled. Please refer to your browser&apos;s Help pages for instructions.
                                             </p>
                                          </div>
                                       </div>
                                    </div>
                                 </div>
                              </noscript>
                              
                              <awsdocs-page-utilities></awsdocs-page-utilities>
                           </div></div>
</body>
</html>