<!DOCTYPE html>
<html>
<head>
    <link href="css/awsdocs.css" rel="stylesheet" type="text/css">
    <script type="text/javascript" src="js/jquery.min.js"></script>
    <script type="text/javascript" src="js/awsdocs.min.js"></script>
    <meta charset="utf-8">
</head>
<body>
    <div id="content" style="padding: 10px 30px;">
    <div id="main-content" class="awsui-util-container">
                              <div id="main-col-body">
                                 <awsdocs-language-banner data-service="$ctrl.pageService"></awsdocs-language-banner>
                                 <h1 class="topictitle" id="aws-resource-networkmanager-customergatewayassociation">AWS::NetworkManager::CustomerGatewayAssociation</h1>
                                 <div class="awsdocs-page-header-container">
                                    <awsdocs-page-header></awsdocs-page-header>
                                    <awsdocs-filter-selector id="awsdocs-filter-selector"></awsdocs-filter-selector>
                                 </div>
                                 <p>Specifies an association between a customer gateway, a device, and optionally, a link.
                                    If you specify a link, it must be associated with the specified device. The customer
                                    gateway must be connected to a VPN attachment on a transit gateway that&apos;s registered
                                    in
                                    your global network.
                                 </p>
                                 <p>You cannot associate a customer gateway with more than one device and link.</p>
                                 <h2 id="aws-resource-networkmanager-customergatewayassociation-syntax">Syntax</h2>
                                 <p>To declare this entity in your AWS CloudFormation template, use the following syntax:</p>
                                 <div id="JSON" name="JSON" class="section langfilter">
                                    <h3 id="aws-resource-networkmanager-customergatewayassociation-syntax.json">JSON</h3><pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="json "><span>{</span>
  &quot;Type&quot; : &quot;AWS::NetworkManager::CustomerGatewayAssociation&quot;,
  &quot;Properties&quot; : <span>{</span>
      &quot;<a href="#cfn-networkmanager-customergatewayassociation-customergatewayarn">CustomerGatewayArn</a>&quot; : <code class="replaceable">String</code>,
      &quot;<a href="#cfn-networkmanager-customergatewayassociation-deviceid">DeviceId</a>&quot; : <code class="replaceable">String</code>,
      &quot;<a href="#cfn-networkmanager-customergatewayassociation-globalnetworkid">GlobalNetworkId</a>&quot; : <code class="replaceable">String</code>,
      &quot;<a href="#cfn-networkmanager-customergatewayassociation-linkid">LinkId</a>&quot; : <code class="replaceable">String</code>
    }
}
</code></pre></div>
                                 <div id="YAML" name="YAML" class="section langfilter">
                                    <h3 id="aws-resource-networkmanager-customergatewayassociation-syntax.yaml">YAML</h3><pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="yaml ">Type: AWS::NetworkManager::CustomerGatewayAssociation
Properties: 
  <a href="#cfn-networkmanager-customergatewayassociation-customergatewayarn">CustomerGatewayArn</a>: <code class="replaceable">String</code>
  <a href="#cfn-networkmanager-customergatewayassociation-deviceid">DeviceId</a>: <code class="replaceable">String</code>
  <a href="#cfn-networkmanager-customergatewayassociation-globalnetworkid">GlobalNetworkId</a>: <code class="replaceable">String</code>
  <a href="#cfn-networkmanager-customergatewayassociation-linkid">LinkId</a>: <code class="replaceable">String</code>
</code></pre></div>
                                 <h2 id="aws-resource-networkmanager-customergatewayassociation-properties">Properties</h2>
                                 <div class="variablelist">
                                    <dl>
                                       <dt><a id="cfn-networkmanager-customergatewayassociation-customergatewayarn"></a><span class="term"><code class="code">CustomerGatewayArn</code></span></dt>
                                       <dd>
                                          
                                          <p>The Amazon Resource Name (ARN) of the customer gateway.</p>
                                          
                                          <p><em>Required</em>: Yes
                                          </p>
                                          <p><em>Type</em>: String
                                          </p>
                                          <p><em>Update requires</em>: <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-update-behaviors.html#update-replacement">Replacement</a></p>
                                       </dd>
                                       <dt><a id="cfn-networkmanager-customergatewayassociation-deviceid"></a><span class="term"><code class="code">DeviceId</code></span></dt>
                                       <dd>
                                          
                                          <p>The ID of the device.</p>
                                          
                                          <p><em>Required</em>: Yes
                                          </p>
                                          <p><em>Type</em>: String
                                          </p>
                                          <p><em>Update requires</em>: <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-update-behaviors.html#update-replacement">Replacement</a></p>
                                       </dd>
                                       <dt><a id="cfn-networkmanager-customergatewayassociation-globalnetworkid"></a><span class="term"><code class="code">GlobalNetworkId</code></span></dt>
                                       <dd>
                                          
                                          <p>The ID of the global network.</p>
                                          
                                          <p><em>Required</em>: Yes
                                          </p>
                                          <p><em>Type</em>: String
                                          </p>
                                          <p><em>Update requires</em>: <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-update-behaviors.html#update-replacement">Replacement</a></p>
                                       </dd>
                                       <dt><a id="cfn-networkmanager-customergatewayassociation-linkid"></a><span class="term"><code class="code">LinkId</code></span></dt>
                                       <dd>
                                          
                                          <p>The ID of the link.</p>
                                          
                                          <p><em>Required</em>: No
                                          </p>
                                          <p><em>Type</em>: String
                                          </p>
                                          <p><em>Update requires</em>: <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-update-behaviors.html#update-replacement">Replacement</a></p>
                                       </dd>
                                    </dl>
                                 </div>
                                 <h2 id="aws-resource-networkmanager-customergatewayassociation-return-values">Return Values</h2>
                                 <h3 id="aws-resource-networkmanager-customergatewayassociation-return-values-ref">Ref</h3>
                                 <p>When you pass the logical ID of this resource to the intrinsic <code class="code">Ref</code> function, <code class="code">Ref</code> returns the ID of the global network and the Amazon Resource Name
                                    (ARN) of the customer gateway. For example: <code class="code">global-network-01231231231231231|arn:aws:ec2:eu-central-1:123456789012:customer-gateway/cgw-00112233aabbcc112</code>.
                                 </p>
                                 <p>For more information about using the <code class="code">Ref</code> function, see <a href="intrinsic-function-reference-ref.html">Ref</a>.
                                 </p>
                                 <h2 id="aws-resource-networkmanager-customergatewayassociation--examples">Examples</h2>
                                 <h3 id="aws-resource-networkmanager-customergatewayassociation--examples--Customer_Gateway_Association">Customer Gateway Association</h3>
                                 <p>The following example template creates a global network, device, customer
                                    gateway, VPN connection, and transit gateway. It registers the transit gateway
                                    in the global network, and creates an association between the customer gateway
                                    and device. The creation of the customer gateway association depends on the VPN
                                    connection and transit gateway registration.
                                 </p>
                                 <div id="JSON" name="JSON" class="section langfilter">
                                    <h4 id="aws-resource-networkmanager-customergatewayassociation--examples--Customer_Gateway_Association--json">JSON</h4><pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="json "><span>{</span>
    &quot;AWSTemplateFormatVersion&quot;: &quot;2010-09-09&quot;,
    &quot;Description&quot;: &quot;Create a global network and customer gateway association&quot;,
    &quot;Resources&quot;: <span>{</span>
        &quot;GlobalNetwork&quot;: <span>{</span>
            &quot;Type&quot;: &quot;AWS::NetworkManager::GlobalNetwork&quot;
        },
        &quot;Device&quot;: <span>{</span>
            &quot;Type&quot;: &quot;AWS::NetworkManager::Device&quot;,
            &quot;Properties&quot;: <span>{</span>
                &quot;Description&quot;: &quot;Chicago office device&quot;,
                &quot;GlobalNetworkId&quot;: <span>{</span>
                    &quot;Ref&quot;: &quot;GlobalNetwork&quot;
                },
                &quot;Location&quot;: <span>{</span>
                    &quot;Address&quot;: &quot;227 W Monroe St, Chicago, IL 60606&quot;,
                    &quot;Latitude&quot;: &quot;41.8&quot;,
                    &quot;Longitude&quot;: &quot;-87.6&quot;
                }
            }
        },
        &quot;TransitGateway&quot;: <span>{</span>
            &quot;Type&quot;: &quot;AWS::EC2::TransitGateway&quot;
        },
        &quot;TransitGatewayRegistration&quot;: <span>{</span>
            &quot;Type&quot;: &quot;AWS::NetworkManager::TransitGatewayRegistration&quot;,
            &quot;Properties&quot;: <span>{</span>
                &quot;GlobalNetworkId&quot;: <span>{</span>
                    &quot;Ref&quot;: &quot;GlobalNetwork&quot;
                },
                &quot;TransitGatewayArn&quot;: <span>{</span>
                    &quot;Fn::Sub&quot;: &quot;arn:aws:ec2:$<span>{</span>AWS::Region}:$<span>{</span>AWS::AccountId}:transit-gateway/$<span>{</span>TransitGateway}&quot;
                }
            }
        },
        &quot;CustomerGateway&quot;: <span>{</span>
            &quot;Type&quot;: &quot;AWS::EC2::CustomerGateway&quot;,
            &quot;Properties&quot;: <span>{</span>
                &quot;Type&quot;: &quot;ipsec.1&quot;,
                &quot;BgpAsn&quot;: 65534,
                &quot;IpAddress&quot;: &quot;12.1.2.3&quot;
            }
        },
        &quot;VPNConnection&quot;: <span>{</span>
            &quot;Type&quot;: &quot;AWS::EC2::VPNConnection&quot;,
            &quot;Properties&quot;: <span>{</span>
                &quot;Type&quot;: &quot;ipsec.1&quot;,
                &quot;StaticRoutesOnly&quot;: true,
                &quot;CustomerGatewayId&quot;: <span>{</span>
                    &quot;Ref&quot;: &quot;CustomerGateway&quot;
                },
                &quot;TransitGatewayId&quot;: <span>{</span>
                    &quot;Ref&quot;: &quot;TransitGateway&quot;
                }
            }
        },
        &quot;CustomerGatewayAssociation&quot;: <span>{</span>
            &quot;DependsOn&quot;: [
                &quot;VPNConnection&quot;,
                &quot;TransitGatewayRegistration&quot;
            ],
            &quot;Type&quot;: &quot;AWS::NetworkManager::CustomerGatewayAssociation&quot;,
            &quot;Properties&quot;: <span>{</span>
                &quot;GlobalNetworkId&quot;: <span>{</span>
                    &quot;Ref&quot;: &quot;GlobalNetwork&quot;
                },
                &quot;DeviceId&quot;: <span>{</span>
                    &quot;Fn::GetAtt&quot;: [
                        &quot;Device&quot;,
                        &quot;DeviceId&quot;
                    ]
                },
                &quot;CustomerGatewayArn&quot;: <span>{</span>
                    &quot;Fn::Sub&quot;: &quot;arn:aws:ec2:$<span>{</span>AWS::Region}:$<span>{</span>AWS::AccountId}:customer-gateway/$<span>{</span>CustomerGateway}&quot;
                }
            }
        }
    }
}</code></pre></div>
                                 <div id="YAML" name="YAML" class="section langfilter">
                                    <h4 id="aws-resource-networkmanager-customergatewayassociation--examples--Customer_Gateway_Association--yaml">YAML</h4><pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="yaml ">AWSTemplateFormatVersion: 2010-09-09
Description: &apos;Create a global network and customer gateway association&apos;
Resources:
  GlobalNetwork:
    Type: AWS::NetworkManager::GlobalNetwork
  Device:
    Type: AWS::NetworkManager::Device
    Properties:
      Description: Chicago office device
      GlobalNetworkId: !Ref GlobalNetwork
      Location:
        Address: &quot;227 W Monroe St, Chicago, IL 60606&quot;
        Latitude: &quot;41.8&quot;
        Longitude: &quot;-87.6&quot;
  TransitGateway:
    Type: AWS::EC2::TransitGateway
  TransitGatewayRegistration:
    Type: AWS::NetworkManager::TransitGatewayRegistration
    Properties:
      GlobalNetworkId: !Ref GlobalNetwork
      TransitGatewayArn: !Sub &apos;arn:aws:ec2:$<span>{</span>AWS::Region}:$<span>{</span>AWS::AccountId}:transit-gateway/$<span>{</span>TransitGateway}&apos;
  CustomerGateway:
    Type: AWS::EC2::CustomerGateway
    Properties:
      Type: ipsec.1
      BgpAsn: 65534
      IpAddress: 12.1.2.3
  VPNConnection:
    Type: AWS::EC2::VPNConnection
    Properties:
      Type: ipsec.1
      StaticRoutesOnly: true
      CustomerGatewayId:
        !Ref CustomerGateway
      TransitGatewayId:
        !Ref TransitGateway
  CustomerGatewayAssociation:
    DependsOn:
      - VPNConnection
      - TransitGatewayRegistration
    Type: AWS::NetworkManager::CustomerGatewayAssociation
    Properties:
      GlobalNetworkId: !Ref GlobalNetwork
      DeviceId: !GetAtt Device.DeviceId
      CustomerGatewayArn: !Sub &apos;arn:aws:ec2:$<span>{</span>AWS::Region}:$<span>{</span>AWS::AccountId}:customer-gateway/$<span>{</span>CustomerGateway}&apos;</code></pre></div>
                                 <awsdocs-copyright class="copyright-print"></awsdocs-copyright>
                              </div>
                              <noscript>
                                 <div>
                                    <div>
                                       <div>
                                          <div id="js_error_message">
                                             <p><img src="https://d1ge0kk1l5kms0.cloudfront.net/images/G/01/webservices/console/warning.png" alt="Warning"> <strong>Javascript is disabled or is unavailable in your
                                                   browser.</strong></p>
                                             <p>To use the AWS Documentation, Javascript must be
                                                enabled. Please refer to your browser&apos;s Help pages for instructions.
                                             </p>
                                          </div>
                                       </div>
                                    </div>
                                 </div>
                              </noscript>
                              
                              <awsdocs-page-utilities></awsdocs-page-utilities>
                           </div></div>
</body>
</html>