<!DOCTYPE html>
<html>
<head>
    <link href="css/awsdocs.css" rel="stylesheet" type="text/css">
    <script type="text/javascript" src="js/jquery.min.js"></script>
    <script type="text/javascript" src="js/awsdocs.min.js"></script>
    <meta charset="utf-8">
</head>
<body>
    <div id="content" style="padding: 10px 30px;">
    <h1 class="topictitle" id="aws-properties-stack">AWS::CloudFormation::Stack</h1><p>The <code class="code">AWS::CloudFormation::Stack</code> type nests a stack as a resource in a top-level
                        template.
                     </p><p>You can add output values from a nested stack within the containing template. You
                        use the
                        <a href="intrinsic-function-reference-getatt.html">GetAtt</a> function with the nested
                        stack&apos;s logical name and the name of the output value in the nested stack in the format
                        <code class="code">Outputs.<em>NestedStackOutputName</em></code>.
                     </p><div class="aws-note">
                        <p class="aws-note">Important</p>
                        <p>We strongly recommend that updates to nested stacks are run from the parent stack.</p>
                     </div><p>When you apply template changes to update a top-level stack, CloudFormation updates
                        the top-level
                        stack and initiates an update to its nested stacks. CloudFormation updates the resources
                        of modified
                        nested stacks, but does not update the resources of unmodified nested stacks. For
                        more
                        information, see <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks.html">CloudFormation Stacks Updates</a>.
                     </p><div class="aws-note">
                        <p class="aws-note">Note</p>
                        <p>You must acknowledge IAM capabilities for nested stacks that contain IAM resources.
                           Also, verify that you have cancel update stack permissions, which is required if an
                           update
                           rolls back. For more information about IAM and CloudFormation, see <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/using-iam-template.html">Controlling Access with AWS Identity and Access Management</a>.
                        </p>
                     </div><h2 id="aws-properties-stack-syntax">Syntax</h2><p>To declare this entity in your AWS CloudFormation template, use the following syntax:</p><div id="JSON" name="JSON" class="section langfilter">
                        <h3 id="aws-properties-stack-syntax.json">JSON</h3><pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="json ">{
  &quot;Type&quot; : &quot;AWS::CloudFormation::Stack&quot;,
  &quot;Properties&quot; : {
      &quot;<a href="#cfn-cloudformation-stack-notificationarns">NotificationARNs</a>&quot; : <em class="replaceable"><code>[ String, ... ]</code></em>,
      &quot;<a href="#cfn-cloudformation-stack-parameters">Parameters</a>&quot; : <em class="replaceable"><code>{<em class="replaceable"><code>Key</code></em> : <em class="replaceable"><code>Value</code></em>, ...}</code></em>,
      &quot;<a href="#cfn-cloudformation-stack-tags">Tags</a>&quot; : <em class="replaceable"><code>[ <a href="aws-properties-resource-tags.html">Tag</a>, ... ]</code></em>,
      &quot;<a href="#cfn-cloudformation-stack-templateurl">TemplateURL</a>&quot; : <em class="replaceable"><code>String</code></em>,
      &quot;<a href="#cfn-cloudformation-stack-timeoutinminutes">TimeoutInMinutes</a>&quot; : <em class="replaceable"><code>Integer</code></em>
    }
}
</code></pre></div><div id="YAML" name="YAML" class="section langfilter">
                        <h3 id="aws-properties-stack-syntax.yaml">YAML</h3><pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="yaml ">Type: AWS::CloudFormation::Stack
Properties: 
  <a href="#cfn-cloudformation-stack-notificationarns">NotificationARNs</a>: <em class="replaceable"><code>
    - String</code></em>
  <a href="#cfn-cloudformation-stack-parameters">Parameters</a>: <em class="replaceable"><code>
    <em class="replaceable"><code>Key</code></em> : <em class="replaceable"><code>Value</code></em></code></em>
  <a href="#cfn-cloudformation-stack-tags">Tags</a>: <em class="replaceable"><code>
    - <a href="aws-properties-resource-tags.html">Tag</a></code></em>
  <a href="#cfn-cloudformation-stack-templateurl">TemplateURL</a>: <em class="replaceable"><code>String</code></em>
  <a href="#cfn-cloudformation-stack-timeoutinminutes">TimeoutInMinutes</a>: <em class="replaceable"><code>Integer</code></em>
</code></pre></div><h2 id="aws-properties-stack-properties">Properties</h2><div class="variablelist">
                        <dl>
                           <dt><a id="cfn-cloudformation-stack-notificationarns"></a><span class="term"><code class="code">NotificationARNs</code></span></dt>
                           <dd>
                              
                              <p>The Simple Notification Service (SNS) topic ARNs to publish stack related events.
                                 You
                                 can find your SNS topic ARNs using the SNS console or your Command Line Interface
                                 (CLI).
                              </p>
                              
                              <p><em>Required</em>: No
                              </p>
                              <p><em>Type</em>: List of String
                              </p>
                              <p><em>Maximum</em>: <code class="code">5</code></p>
                              <p><em>Update requires</em>: <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-update-behaviors.html#update-no-interrupt">No interruption</a></p>
                           </dd>
                           <dt><a id="cfn-cloudformation-stack-parameters"></a><span class="term"><code class="code">Parameters</code></span></dt>
                           <dd>
                              
                              <p>The set value pairs that represent the parameters passed to CloudFormation when this
                                 nested stack is created. Each parameter has a name corresponding to a parameter defined
                                 in the embedded template and a value representing the value that you want to set for
                                 the parameter. 
                              </p>
                              
                              <div class="aws-note">
                                 <p class="aws-note">Note</p>
                                 <p>If you use the <code class="code">Ref</code> function to pass a parameter value to a
                                    nested stack, comma-delimited list parameters must be of type
                                    <code class="code">String</code>. In other words, you cannot pass values that are of type
                                    <code class="code">CommaDelimitedList</code> to nested stacks.
                                 </p>
                              </div>
                              
                              <p>Conditional. Required if the nested stack
                                 requires input parameters.
                              </p>
                              
                              <p>Whether an update causes interruptions
                                 depends on the resources that are being updated. An update never causes a nested
                                 stack to be replaced.
                              </p>
                              
                              <p><em>Required</em>: Conditional
                              </p>
                              <p><em>Type</em>: Map of String
                              </p>
                              <p><em>Update requires</em>: <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-update-behaviors.html#update-no-interrupt">No interruption</a></p>
                           </dd>
                           <dt><a id="cfn-cloudformation-stack-tags"></a><span class="term"><code class="code">Tags</code></span></dt>
                           <dd>
                              
                              <p>Key-value pairs to associate with this stack. AWS CloudFormation also propagates
                                 these tags to the resources created in the stack. A maximum number of 50 tags can
                                 be
                                 specified.
                              </p>
                              
                              <p><em>Required</em>: No
                              </p>
                              <p><em>Type</em>: List of <a href="aws-properties-resource-tags.html">Tag</a></p>
                              <p><em>Maximum</em>: <code class="code">50</code></p>
                              <p><em>Update requires</em>: <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-update-behaviors.html#update-no-interrupt">No interruption</a></p>
                           </dd>
                           <dt><a id="cfn-cloudformation-stack-templateurl"></a><span class="term"><code class="code">TemplateURL</code></span></dt>
                           <dd>
                              
                              
                              <p>Location of file containing the template body. The URL must point to a template (max
                                 size: 460,800 bytes) that is located in an Amazon S3 bucket. For more information,
                                 see <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/template-anatomy.html">Template Anatomy</a>.
                              </p>
                              
                              <p>Whether an update causes interruptions depends on the resources that are being updated.
                                 An update never causes a nested stack to be replaced.
                              </p>
                              
                              <p><em>Required</em>: Yes
                              </p>
                              <p><em>Type</em>: String
                              </p>
                              <p><em>Minimum</em>: <code class="code">1</code></p>
                              <p><em>Maximum</em>: <code class="code">1024</code></p>
                              <p><em>Update requires</em>: <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-update-behaviors.html#update-no-interrupt">No interruption</a></p>
                           </dd>
                           <dt><a id="cfn-cloudformation-stack-timeoutinminutes"></a><span class="term"><code class="code">TimeoutInMinutes</code></span></dt>
                           <dd>
                              
                              
                              <p>The length of time, in minutes, that CloudFormation waits for the nested stack to
                                 reach
                                 the <code class="code">CREATE_COMPLETE</code> state. The default is no timeout. When CloudFormation detects that the
                                 nested stack has reached the <code class="code">CREATE_COMPLETE</code> state, it marks the nested stack
                                 resource as <code class="code">CREATE_COMPLETE</code> in the parent stack and resumes creating the parent
                                 stack. If the timeout period expires before the nested stack reaches
                                 <code class="code">CREATE_COMPLETE</code>, CloudFormation marks the nested stack as failed and rolls back both the
                                 nested stack and parent stack.
                              </p>
                              
                              <p>Updates are not supported.</p>
                              
                              <p><em>Required</em>: No
                              </p>
                              <p><em>Type</em>: Integer
                              </p>
                              <p><em>Minimum</em>: <code class="code">1</code></p>
                              <p><em>Update requires</em>: <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-update-behaviors.html#update-no-interrupt">No interruption</a></p>
                           </dd>
                        </dl>
                     </div><h2 id="aws-properties-stack-return-values">Return Values</h2><h3 id="aws-properties-stack-return-values-ref">Ref</h3><p>
                        When you pass the logical ID of this resource to the intrinsic <code class="code">Ref</code> function, <code class="code">Ref</code> returns the stack ID. For example:
                     </p><p>
                        <code class="code">arn:aws:cloudformation:us-east-2:123456789012:stack/mystack-mynestedstack-sggfrhxhum7w/f449b250-b969-11e0-a185-5081d0136786</code>
                        
                     </p><p>For more information about using the <code class="code">Ref</code> function, see <a href="intrinsic-function-reference-ref.html">Ref</a>.
                     </p><h2 id="aws-properties-stack--examples">Examples</h2><h3 id="aws-properties-stack--examples--Specify_Stack_Parameters">Specify Stack Parameters</h3><p>The sample template EC2ChooseAMI.template contains the following Parameters section:</p><h4 id="aws-properties-stack--examples--Specify_Stack_Parameters--json">JSON</h4><pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="json ">&quot;Parameters&quot; : {
  &quot;InstanceType&quot; : {
    &quot;Type&quot; : &quot;String&quot;,
    &quot;Default&quot; : &quot;m1.small&quot;,
    &quot;Description&quot; : &quot;EC2 instance type, e.g. m1.small, m1.large, etc.&quot;
  },
    &quot;WebServerPort&quot; : {
    &quot;Type&quot; : &quot;String&quot;,
    &quot;Default&quot; : &quot;80&quot;,
    &quot;Description&quot; : &quot;TCP/IP port of the web server&quot;
  },
  &quot;KeyName&quot; : {
    &quot;Type&quot; : &quot;String&quot;,
    &quot;Description&quot; : &quot;Name of an existing EC2 KeyPair to enable SSH access to the web server&quot;
  }
}</code></pre><h4 id="aws-properties-stack--examples--Specify_Stack_Parameters--yaml">YAML</h4><pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="yaml ">Parameters: 
  InstanceType: 
    Type: &quot;String&quot;
    Default: &quot;m1.small&quot;
    Description: &quot;EC2 instance type, e.g. m1.small, m1.large, etc.&quot;
  WebServerPort: 
    Type: &quot;String&quot;
    Default: &quot;80&quot;
    Description: &quot;TCP/IP port of the web server&quot;
  KeyName: 
    Type: &quot;String&quot;
    Description: &quot;Name of an existing EC2 KeyPair to enable SSH access to the web server&quot;</code></pre><h3 id="aws-properties-stack--examples--Nested_Stack">Nested Stack</h3><p>You could use the following template to embed a stack (myStackWithParams) using the
                        EC2ChooseAMI.template and use the Parameters property in the AWS::CloudFormation::Stack
                        resource to specify an InstanceType and KeyName.
                     </p><h4 id="aws-properties-stack--examples--Nested_Stack--json">JSON</h4><pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="json ">{
  &quot;AWSTemplateFormatVersion&quot; : &quot;2010-09-09&quot;,
  &quot;Resources&quot; : {
    &quot;myStackWithParams&quot; : {
      &quot;Type&quot; : &quot;AWS::CloudFormation::Stack&quot;,
      &quot;Properties&quot; : {
      &quot;TemplateURL&quot; : &quot;https://s3.amazonaws.com/cloudformation-templates-us-east-2/EC2ChooseAMI.template&quot;,
        &quot;Parameters&quot; : {
          &quot;InstanceType&quot; : &quot;t1.micro&quot;,
          &quot;KeyName&quot; : &quot;mykey&quot;
        }
      }
    }
  }
}</code></pre><h4 id="aws-properties-stack--examples--Nested_Stack--yaml">YAML</h4><pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="yaml ">AWSTemplateFormatVersion: &quot;2010-09-09&quot;
Resources: 
  myStackWithParams: 
    Type: AWS::CloudFormation::Stack
    Properties: 
    TemplateURL: &quot;https://s3.amazonaws.com/cloudformation-templates-us-east-2/EC2ChooseAMI.template&quot;
      Parameters: 
        InstanceType: &quot;t1.micro&quot;
        KeyName: &quot;mykey&quot;</code></pre><h2 id="aws-properties-stack--seealso">See Also</h2><div class="itemizedlist">
                        
                        
                        
                        <ul class="itemizedlist" type="disc">
                           <li class="listitem">
                              
                              <p>For sample template snippets, see Nested Stacks in <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/quickref-cloudformation.html">CloudFormation Template Snippets</a>.
                              </p>
                              
                           </li>
                           <li class="listitem">
                              
                              <p>If you have nested stacks that are stuck in an in-progress operation, see
                                 Troubleshooting Errors in <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/troubleshooting.html">Troubleshooting AWS CloudFormation</a>.
                              </p>
                              
                           </li>
                        </ul>
                     </div><div id="marketing-target"><span class="close-button"></span><div class="marketing-title" id="marketing-title"></div>
                        <div class="marketing-description"><span id="marketing-description"></span><span id="marketing-cta"></span></div>
                     </div></div>
</body>
</html>