<!DOCTYPE html>
<html>
<head>
    <link href="css/awsdocs.css" rel="stylesheet" type="text/css">
    <script type="text/javascript" src="js/jquery.min.js"></script>
    <script type="text/javascript" src="js/awsdocs.min.js"></script>
    <meta charset="utf-8">
</head>
<body>
    <div id="content" style="padding: 10px 30px;">
    <h1 class="topictitle" id="aws-resource-secretsmanager-resourcepolicy">AWS::SecretsManager::ResourcePolicy</h1><p>The <code class="code">AWS::SecretsManager::ResourcePolicy</code> resource lets you define a
                        resource-based policy and attach it to a secret that&apos;s stored in Secrets Manager.
                     </p><h2 id="aws-resource-secretsmanager-resourcepolicy-syntax">Syntax</h2><p>To declare this entity in your AWS CloudFormation template, use the following syntax:</p><div id="JSON" name="JSON" class="section langfilter">
                        
                        <h3 id="aws-resource-secretsmanager-resourcepolicy-syntax.json">JSON</h3>
                        <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="nohighlight">{
  &quot;Type&quot; : &quot;AWS::SecretsManager::ResourcePolicy&quot;,
  &quot;Properties&quot; : {
    &quot;<a href="aws-resource-secretsmanager-resourcepolicy.html#cfn-secretsmanager-resourcepolicy-secretid">SecretId</a>&quot; : <em class="replaceable"><code>String</code></em>,
    &quot;<a href="aws-resource-secretsmanager-resourcepolicy.html#cfn-secretsmanager-resourcepolicy-resourcepolicy">ResourcePolicy</a>&quot; : <em class="replaceable"><code>JSON object</code></em>
  }
}</code></pre>
                        </div><div id="YAML" name="YAML" class="section langfilter">
                        
                        <h3 id="aws-resource-secretsmanager-resourcepolicy-syntax.yaml">YAML</h3>
                        <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="nohighlight">Type: &quot;AWS::SecretsManager::ResourcePolicy&quot;
Properties:
  <a href="aws-resource-secretsmanager-resourcepolicy.html#cfn-secretsmanager-resourcepolicy-secretid">SecretId</a>: <em class="replaceable"><code>String</code></em>
  <a href="aws-resource-secretsmanager-resourcepolicy.html#cfn-secretsmanager-resourcepolicy-resourcepolicy">ResourcePolicy</a>: <em class="replaceable"><code>JSON object</code></em></code></pre>
                        </div><h2 id="aws-resource-secretsmanager-resourcepolicy-properties">Properties</h2><div class="variablelist">
                        
                        
                        
                        <dl>
                           
                           <dt><a id="cfn-secretsmanager-resourcepolicy-secretid"></a><span class="term"><code class="code">SecretId</code></span></dt>
                           
                           <dd>
                              
                              <p>Specifies the Amazon Resource Name (ARN) or the friendly name of the secret that you
                                 want to attach a resource-based permissions policy to. To reference a secret that&apos;s
                                 also
                                 created in this template, use the <a href="intrinsic-function-reference-ref.html">Ref</a> function with the secret&apos;s logical ID.
                              </p>
                              
                              <div class="aws-note">
                                 <p class="aws-note">Important</p>
                                 <p>If you use this property to change the <code class="code">SecretId</code> for an existing
                                    resource-based policy, it removes the policy from the original secret, and then
                                    attaches the policy to the secret with the specified <code class="code">SecretId</code>. This
                                    results in changing the permissions for two secrets.
                                 </p>
                              </div>
                              
                              <p>
                                 <em>Required</em>: Yes
                              </p>
                              
                              <p>
                                 <em>Type</em>: String
                              </p>
                              
                              <p>
                                 <em>Update requires</em>: <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-update-behaviors.html#update-replacement">Replacement</a>
                                 
                              </p>
                              
                           </dd>
                           
                           
                           <dt><a id="cfn-secretsmanager-resourcepolicy-resourcepolicy"></a><span class="term"><code class="code">ResourcePolicy</code></span></dt>
                           
                           <dd>
                              
                              <p>Specifies a JSON object that&apos;s constructed according to the grammar and
                                 syntax for an AWSresource-based policy. The policy identifies who can
                                 access or manage this secret and its versions. For information on how to format a
                                 JSON
                                 object as a parameter for this resource type, see
                                 <a href="https://docs.aws.amazon.com/secretsmanager/latest/userguide/auth-and-access_resource-based-policies.html">Using Resource-based Policies
                                    for Secrets Manager</a> in the <em>AWS Secrets Manager User Guide</em>.
                                 Those same rules apply here.
                              </p>
                              
                              <p>
                                 <em>Required</em>: Yes
                              </p>
                              
                              <p>
                                 <em>Type</em>: JSON object
                              </p>
                              
                              <p>
                                 <em>Update requires</em>: <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-update-behaviors.html#update-no-interrupt">No
                                    interruption</a>
                                 
                              </p>
                              
                           </dd>
                           
                        </dl>
                     </div><h2 id="aws-resource-secretsmanager-resourcepolicy-returnvalues">Return Values</h2><h3 id="aws-resource-secretsmanager-resourcepolicy-ref">Ref</h3><p>When you pass the logical ID of an <code class="code">AWS::SecretsManager::ResourcePolicy</code>
                        resource to the intrinsic <code class="code">Ref</code> function, the function returns the ARN of the
                        secret that&apos;s being configured, such as:
                     </p><p><code class="code">arn:aws:secretsmanager:<em class="replaceable"><code>us-west-2</code></em>:<em class="replaceable"><code>123456789012</code></em>:secret:<em class="replaceable"><code>my-path/my-secret-name</code></em>-<em class="replaceable"><code>1a2b3c</code></em></code></p><p>This enables you to reference a secret that you create in one part of the stack template
                        from within the definition of another resource later, in the same template. You would
                        typically use this with the <a href="aws-resource-secretsmanager-secrettargetattachment.html">AWS::SecretsManager::SecretTargetAttachment</a> resource type.
                     </p><p>For more information about using the <code class="code">Ref</code> function, see <a href="intrinsic-function-reference-ref.html">Ref</a>. 
                     </p><h2 id="aws-resource-secretsmanager-resourcepolicy-examples">Examples</h2><h3 id="aws-resource-secretsmanager-resourcepolicy-example1">Attaching a
                        Resource-based Policy to a Secret
                     </h3><p>The following example shows how to define a resource-based policy and attach it to
                        a
                        secret that you previously defined. It defines a secret with the logical name
                        <code class="code">MySecretForAppA</code>, and then attaches a resource-based permissions policy to
                        it.
                     </p><div class="aws-note">
                        <p class="aws-note">Note</p>
                        <p>The JSON specification doesn&apos;t allow any kind of comments. See the YAML example for
                           comments.
                        </p>
                     </div><div id="JSON" name="JSON" class="section langfilter">
                        
                        <h4 id="aws-resource-secretsmanager-resourcepolicy-example1.json">JSON</h4>
                        <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="nohighlight ">{
  &quot;MySecret&quot;: {
    &quot;Type&quot;: &quot;AWS::SecretsManager::Secret&quot;,
    &quot;Properties&quot;: {
      &quot;Description&quot;: &quot;This is a secret that I want to attach a resource-based policy to&quot;
    }
  },
  &quot;MySecretResourcePolicy&quot;: {
    &quot;Type&quot;: &quot;AWS::SecretsManager::ResourcePolicy&quot;,
    &quot;Properties&quot;: {
      &quot;SecretId&quot;: {&quot;Ref&quot;: &quot;MySecret&quot;},
      &quot;ResourcePolicy&quot;: {
        &quot;Version&quot;: &quot;2012-10-17&quot;,
        &quot;Statement&quot;: [
          {
            &quot;Effect&quot;: &quot;Deny&quot;,
            &quot;Principal&quot;: {&quot;AWS&quot;: {&quot;Fn::Sub&quot;: &quot;arn:aws:iam::${AWS::AccountId}:root&quot;}},
            &quot;Action&quot;: &quot;secretsmanager:DeleteSecret&quot;,
            &quot;Resource&quot;: &quot;*&quot;
          }
        ]
      }
    }
  }
}</code></pre>
                        </div><div id="YAML" name="YAML" class="section langfilter">
                        
                        <h4 id="aws-resource-secretsmanager-resourcepolicy-example1.yaml">YAML</h4>
                        <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="nohighlight ">MySecret:
  Type: AWS::SecretsManager::Secret
  Properties:
    Description: &quot;This is a secret that I want to attach a resource-based policy to&quot;

# This is a ResourcePolicy resource which attaches a resource policy to the referenced secret.
# The resource policy denies the DeleteSecret action to all principals in the current account.
MySecretResourcePolicy:
  Type: AWS::SecretsManager::ResourcePolicy
  Properties:
    SecretId: !Ref MySecret
    ResourcePolicy:
      Version: &quot;2012-10-17&quot;
      Statement:
        -
          Effect: &quot;Deny&quot;
          Principal:
            AWS: !Sub &quot;arn:aws:iam::${AWS::AccountId}:root&quot;
          Action: &quot;secretsmanager:DeleteSecret&quot;
          Resource: &quot;*&quot;</code></pre>
                        </div><h2 id="aws-resource-secretsmanager-resourcepolicy-seealso">See Also</h2><div class="itemizedlist">
                        
                        
                        
                        
                        
                        <ul class="itemizedlist" type="disc">
                           <li class="listitem">
                              
                              <p>For information about using resource-based policies with Secrets Manager, see <a href="https://docs.aws.amazon.com/secretsmanager/latest/userguide/auth-and-access_resource-based-policies.html">Using Resource-based
                                    Policies for Secrets Manager</a> in the <em>AWS Secrets Manager User Guide</em>. 
                              </p>
                              
                           </li>
                           <li class="listitem">
                              
                              <p><a href="aws-resource-secretsmanager-secret.html">AWS::SecretsManager::Secret</a></p>
                              
                           </li>
                           <li class="listitem">
                              
                              <p><a href="aws-resource-secretsmanager-secrettargetattachment.html">AWS::SecretsManager::SecretTargetAttachment</a></p>
                              
                           </li>
                           <li class="listitem">
                              
                              <p><a href="aws-resource-secretsmanager-rotationschedule.html">AWS::SecretsManager::RotationSchedule</a></p>
                              
                           </li>
                        </ul>
                     </div></div>
</body>
</html>