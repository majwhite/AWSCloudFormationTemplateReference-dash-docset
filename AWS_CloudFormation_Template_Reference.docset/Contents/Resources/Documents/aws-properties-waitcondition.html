<!DOCTYPE html>
<html>
<head>
    <link href="css/awsdocs.css" rel="stylesheet" type="text/css">
    <script type="text/javascript" src="js/jquery.min.js"></script>
    <script type="text/javascript" src="js/awsdocs.min.js"></script>
    <meta charset="utf-8">
</head>
<body>
    <div id="content" style="padding: 10px 30px;">
    <h1 class="topictitle" id="aws-properties-waitcondition">AWS::CloudFormation::WaitCondition</h1><div class="aws-note">
                        <p class="aws-note">Important</p>
                        <p>For Amazon EC2 and Auto Scaling resources, we recommend that you use a CreationPolicy
                           attribute instead of wait conditions. Add a CreationPolicy attribute to those resources,
                           and use the cfn-signal helper script to signal when an instance creation process has
                           completed successfully.
                        </p>
                     </div><p>You can use a wait condition for situations like the following:</p><div class="itemizedlist">
                        
                        
                        
                        <ul class="itemizedlist" type="disc">
                           <li class="listitem">
                              
                              <p>To coordinate stack resource creation with configuration actions that are external
                                 to the stack creation
                              </p>
                              
                           </li>
                           <li class="listitem">
                              
                              <p>To track the status of a configuration process</p>
                              
                           </li>
                        </ul>
                     </div><p>For these situations, we recommend that you associate a <a href="aws-attribute-creationpolicy.html">CreationPolicy</a>
                        attribute with the wait condition so that you don&apos;t have to use a wait condition handle.
                        For
                        more information and an example, see <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/using-cfn-waitcondition.html">Creating Wait Conditions in a Template</a>. If you use a CreationPolicy with a wait
                        condition, do not specify any of the wait condition&apos;s properties.
                     </p><div class="aws-note">
                        <p class="aws-note">Note</p>
                        <p>If you use the <a href="https://docs.aws.amazon.com/vpc/latest/userguide/vpc-endpoints.html">VPC Endpoints</a>
                           feature, resources in the VPC that respond to wait conditions must have access to
                           CloudFormation-specific Amazon Simple Storage Service (Amazon S3) buckets. Resources
                           must send wait condition responses to
                           a pre-signed Amazon S3 URL. If they can&apos;t send responses to Amazon S3, CloudFormation
                           won&apos;t receive a
                           response and the stack operation fails. For more information, see <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/cfn-vpce-bucketnames.html">Setting Up VPC Endpoints for AWS CloudFormation</a>.
                        </p>
                     </div><h2 id="aws-properties-waitcondition-syntax">Syntax</h2><p>To declare this entity in your AWS CloudFormation template, use the following syntax:</p><div id="JSON" name="JSON" class="section langfilter">
                        <h3 id="aws-properties-waitcondition-syntax.json">JSON</h3><pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="json ">{
  &quot;Type&quot; : &quot;AWS::CloudFormation::WaitCondition&quot;,
  &quot;Properties&quot; : {
      &quot;<a href="#cfn-waitcondition-count">Count</a>&quot; : <em class="replaceable"><code>Integer</code></em>,
      &quot;<a href="#cfn-waitcondition-handle">Handle</a>&quot; : <em class="replaceable"><code>String</code></em>,
      &quot;<a href="#cfn-waitcondition-timeout">Timeout</a>&quot; : <em class="replaceable"><code>String</code></em>
    }
}
</code></pre></div><div id="YAML" name="YAML" class="section langfilter">
                        <h3 id="aws-properties-waitcondition-syntax.yaml">YAML</h3><pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="yaml ">Type: AWS::CloudFormation::WaitCondition
Properties: 
  <a href="#cfn-waitcondition-count">Count</a>: <em class="replaceable"><code>Integer</code></em>
  <a href="#cfn-waitcondition-handle">Handle</a>: <em class="replaceable"><code>String</code></em>
  <a href="#cfn-waitcondition-timeout">Timeout</a>: <em class="replaceable"><code>String</code></em>
</code></pre></div><h2 id="aws-properties-waitcondition-properties">Properties</h2><div class="variablelist">
                        <dl>
                           <dt><a id="cfn-waitcondition-count"></a><span class="term"><code class="code">Count</code></span></dt>
                           <dd>
                              
                              <p>The number of success signals that CloudFormation must receive before it continues
                                 the stack creation process. When the wait condition receives the requisite
                                 number of success signals, CloudFormation resumes the creation of the stack. If the
                                 wait condition does not receive the specified number of success signals
                                 before the Timeout period expires, CloudFormation assumes that the wait condition
                                 has
                                 failed and rolls the stack back.
                              </p>
                              
                              <p>Updates are not supported.</p>
                              
                              <p><em>Required</em>: No
                              </p>
                              <p><em>Type</em>: Integer
                              </p>
                              <p><em>Update requires</em>: <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-update-behaviors.html#update-no-interrupt">No interruption</a></p>
                           </dd>
                           <dt><a id="cfn-waitcondition-handle"></a><span class="term"><code class="code">Handle</code></span></dt>
                           <dd>
                              
                              <p>A reference to the wait condition handle used to signal this wait
                                 condition. Use the <code class="code">Ref</code> intrinsic function to specify an <a href="aws-properties-waitconditionhandle.html">AWS::CloudFormation::WaitConditionHandle</a> resource.
                              </p>
                              
                              <p>Anytime you add a WaitCondition resource during a stack update, you must
                                 associate the wait condition with a new WaitConditionHandle resource. Do not
                                 reuse an old wait condition handle that has already been defined in the
                                 template. If you reuse a wait condition handle, the wait condition might
                                 evaluate old signals from a previous create or update stack command.
                              </p>
                              
                              <p>Updates are not supported.</p>
                              
                              <p><em>Required</em>: No
                              </p>
                              <p><em>Type</em>: String
                              </p>
                              <p><em>Update requires</em>: <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-update-behaviors.html#update-no-interrupt">No interruption</a></p>
                           </dd>
                           <dt><a id="cfn-waitcondition-timeout"></a><span class="term"><code class="code">Timeout</code></span></dt>
                           <dd>
                              
                              <p>The length of time (in seconds) to wait for the number of signals that the
                                 <code class="code">Count</code> property specifies. <code class="code">Timeout</code> is a
                                 minimum-bound property, meaning the timeout occurs no sooner than the time
                                 you specify, but can occur shortly thereafter. The maximum time that can be
                                 specified for this property is 12 hours (43200 seconds).
                              </p>
                              
                              <p>Updates are not supported.</p>
                              
                              <p><em>Required</em>: No
                              </p>
                              <p><em>Type</em>: String
                              </p>
                              <p><em>Update requires</em>: <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-update-behaviors.html#update-no-interrupt">No interruption</a></p>
                           </dd>
                        </dl>
                     </div><h2 id="aws-properties-waitcondition-return-values">Return Values</h2><h3 id="aws-properties-waitcondition-return-values-ref">Ref</h3><p>
                        When you pass the logical ID of this resource to the intrinsic <code class="code">Ref</code> function, <code class="code">Ref</code> returns the resource name.
                     </p><p>For more information about using the <code class="code">Ref</code> function, see <a href="intrinsic-function-reference-ref.html">Ref</a>.
                     </p><h3 id="aws-properties-waitcondition-return-values-fn--getatt">Fn::GetAtt</h3><p>The <code class="code">Fn::GetAtt</code> intrinsic function returns a value for a specified attribute of this type. The following
                        are the available attributes and sample return values.
                     </p><p>For more information about using the <code class="code">Fn::GetAtt</code> intrinsic function, see <a href="intrinsic-function-reference-getatt.html">Fn::GetAtt</a>.
                     </p><h4 id="aws-properties-waitcondition-return-values-fn--getatt-fn--getatt"></h4><div class="variablelist">
                        <dl>
                           <dt><a id="Data-fn::getatt"></a><span class="term"><code class="code">Data</code></span></dt>
                           <dd>
                              
                              <p>A JSON object that contains the <code class="code">UniqueId</code> and <code class="code">Data</code> values from the wait condition signal(s) for the specified wait condition. For more
                                 information about wait condition signals, see <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/using-cfn-waitcondition.html#using-cfn-waitcondition-signaljson">Wait Condition Signal JSON Format</a>.
                              </p>
                              
                              <p>Example return value for a wait condition with 2 signals:</p>
                              
                              <p>
                                 <code class="code">{ &quot;Signal1&quot; : &quot;Step 1 complete.&quot; , &quot;Signal2&quot; : &quot;Step 2 complete.&quot; }</code>
                                 
                              </p>   
                              
                           </dd>
                        </dl>
                     </div><h2 id="aws-properties-waitcondition--examples">Examples</h2><h3 id="aws-properties-waitcondition--examples--WaitCondition_that_Waits_for_the_Desired_Number_of_Instances_in_a_Web_Server_Group">WaitCondition that Waits for the Desired Number of Instances in a Web Server Group</h3><h4 id="aws-properties-waitcondition--examples--WaitCondition_that_Waits_for_the_Desired_Number_of_Instances_in_a_Web_Server_Group--json">JSON</h4><pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="json ">&quot;WebServerGroup&quot; : {
  &quot;Type&quot; : &quot;AWS::AutoScaling::AutoScalingGroup&quot;,
  &quot;Properties&quot; : {
    &quot;AvailabilityZones&quot; : { &quot;Fn::GetAZs&quot; : &quot;&quot; },
    &quot;LaunchConfigurationName&quot; : { &quot;Ref&quot; : &quot;LaunchConfig&quot; },
    &quot;MinSize&quot; : &quot;1&quot;,
    &quot;MaxSize&quot; : &quot;5&quot;,
    &quot;DesiredCapacity&quot; : { &quot;Ref&quot; : &quot;WebServerCapacity&quot; },
    &quot;LoadBalancerNames&quot; : [ { &quot;Ref&quot; : &quot;ElasticLoadBalancer&quot; } ]
  }
},
        
&quot;WaitHandle&quot; : {
  &quot;Type&quot; : &quot;AWS::CloudFormation::WaitConditionHandle&quot;
},
        
&quot;WaitCondition&quot; : {
  &quot;Type&quot; : &quot;AWS::CloudFormation::WaitCondition&quot;,
  &quot;DependsOn&quot; : &quot;WebServerGroup&quot;,
  &quot;Properties&quot; : {
    &quot;Handle&quot;  : { &quot;Ref&quot; : &quot;WaitHandle&quot; },
    &quot;Timeout&quot; : &quot;300&quot;,
    &quot;Count&quot;   : { &quot;Ref&quot; : &quot;WebServerCapacity&quot; }
  }
}</code></pre><h4 id="aws-properties-waitcondition--examples--WaitCondition_that_Waits_for_the_Desired_Number_of_Instances_in_a_Web_Server_Group--yaml">YAML</h4><pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="yaml ">WebServerGroup: 
  Type: AWS::AutoScaling::AutoScalingGroup
  Properties: 
    AvailabilityZones: 
      Fn::GetAZs: &quot;&quot;
    LaunchConfigurationName: 
      Ref: &quot;LaunchConfig&quot;
    MinSize: &quot;1&quot;
    MaxSize: &quot;5&quot;
    DesiredCapacity: 
      Ref: &quot;WebServerCapacity&quot;
    LoadBalancerNames: 
      - 
        Ref: &quot;ElasticLoadBalancer&quot;
WaitHandle: 
  Type: AWS::CloudFormation::WaitConditionHandle
WaitCondition: 
  Type: AWS::CloudFormation::WaitCondition
  DependsOn: &quot;WebServerGroup&quot;
  Properties: 
    Handle: 
      Ref: &quot;WaitHandle&quot;
    Timeout: &quot;300&quot;
    Count: 
      Ref: &quot;WebServerCapacity&quot;</code></pre><h2 id="aws-properties-waitcondition--seealso">See Also</h2><div class="itemizedlist">
                        
                        
                        
                        <ul class="itemizedlist" type="disc">
                           <li class="listitem">
                              
                              <p>
                                 <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/using-cfn-waitcondition.html">Creating Wait Conditions in a Template</a>
                                 
                              </p>
                              
                           </li>
                           <li class="listitem">
                              
                              <p>
                                 <a href="aws-attribute-dependson.html">DependsOn Attribute</a>
                                 
                              </p>
                              
                           </li>
                        </ul>
                     </div><div id="marketing-target"><span class="close-button"></span><div class="marketing-title" id="marketing-title"></div>
                        <div class="marketing-description"><span id="marketing-description"></span><span id="marketing-cta"></span></div>
                     </div></div>
</body>
</html>