<!DOCTYPE html>
<html>
<head>
    <link href="css/awsdocs.css" rel="stylesheet" type="text/css">
    <script type="text/javascript" src="js/jquery.min.js"></script>
    <script type="text/javascript" src="js/awsdocs.min.js"></script>
    <meta charset="utf-8">
</head>
<body>
    <div id="content" style="padding: 10px 30px;">
    <h1 class="topictitle" id="aws-properties-codebuild-project-environment">AWS::CodeBuild::Project Environment</h1><p>
                        <code class="code">Environment</code> is a property of the <a href="aws-resource-codebuild-project.html">AWS::CodeBuild::Project</a> resource that specifies 
                        the environment for an AWS CodeBuild project.   
                        
                     </p><h2 id="aws-properties-codebuild-project-environment-syntax">Syntax</h2><p>To declare this entity in your AWS CloudFormation template, use the following syntax:</p><div id="JSON" name="JSON" class="section langfilter">
                        <h3 id="aws-properties-codebuild-project-environment-syntax.json">JSON</h3><pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="json ">{
  &quot;<a href="#cfn-codebuild-project-environment-certificate">Certificate</a>&quot; : <em class="replaceable"><code>String</code></em>,
  &quot;<a href="#cfn-codebuild-project-environment-computetype">ComputeType</a>&quot; : <em class="replaceable"><code>String</code></em>,
  &quot;<a href="#cfn-codebuild-project-environment-environmentvariables">EnvironmentVariables</a>&quot; : <em class="replaceable"><code>[ <a href="aws-properties-codebuild-project-environmentvariable.html">EnvironmentVariable</a>, ... ]</code></em>,
  &quot;<a href="#cfn-codebuild-project-environment-image">Image</a>&quot; : <em class="replaceable"><code>String</code></em>,
  &quot;<a href="#cfn-codebuild-project-environment-imagepullcredentialstype">ImagePullCredentialsType</a>&quot; : <em class="replaceable"><code>String</code></em>,
  &quot;<a href="#cfn-codebuild-project-environment-privilegedmode">PrivilegedMode</a>&quot; : <em class="replaceable"><code>Boolean</code></em>,
  &quot;<a href="#cfn-codebuild-project-environment-registrycredential">RegistryCredential</a>&quot; : <em class="replaceable"><code><a href="aws-properties-codebuild-project-registrycredential.html">RegistryCredential</a></code></em>,
  &quot;<a href="#cfn-codebuild-project-environment-type">Type</a>&quot; : <em class="replaceable"><code>String</code></em>
}
</code></pre></div><div id="YAML" name="YAML" class="section langfilter">
                        <h3 id="aws-properties-codebuild-project-environment-syntax.yaml">YAML</h3><pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="yaml ">  <a href="#cfn-codebuild-project-environment-certificate">Certificate</a>: <em class="replaceable"><code>String</code></em>
  <a href="#cfn-codebuild-project-environment-computetype">ComputeType</a>: <em class="replaceable"><code>String</code></em>
  <a href="#cfn-codebuild-project-environment-environmentvariables">EnvironmentVariables</a>: <em class="replaceable"><code>
    - <a href="aws-properties-codebuild-project-environmentvariable.html">EnvironmentVariable</a></code></em>
  <a href="#cfn-codebuild-project-environment-image">Image</a>: <em class="replaceable"><code>String</code></em>
  <a href="#cfn-codebuild-project-environment-imagepullcredentialstype">ImagePullCredentialsType</a>: <em class="replaceable"><code>String</code></em>
  <a href="#cfn-codebuild-project-environment-privilegedmode">PrivilegedMode</a>: <em class="replaceable"><code>Boolean</code></em>
  <a href="#cfn-codebuild-project-environment-registrycredential">RegistryCredential</a>: <em class="replaceable"><code>
    <a href="aws-properties-codebuild-project-registrycredential.html">RegistryCredential</a></code></em>
  <a href="#cfn-codebuild-project-environment-type">Type</a>: <em class="replaceable"><code>String</code></em>
</code></pre></div><h2 id="aws-properties-codebuild-project-environment-properties">Properties</h2><div class="variablelist">
                        <dl>
                           <dt><a id="cfn-codebuild-project-environment-certificate"></a><span class="term"><code class="code">Certificate</code></span></dt>
                           <dd>
                              
                              <p>The certificate to use with this build project.</p>
                              
                              <p><em>Required</em>: No
                              </p>
                              <p><em>Type</em>: String
                              </p>
                              <p><em>Update requires</em>: <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-update-behaviors.html#update-no-interrupt">No interruption</a></p>
                           </dd>
                           <dt><a id="cfn-codebuild-project-environment-computetype"></a><span class="term"><code class="code">ComputeType</code></span></dt>
                           <dd>
                              
                              <p>The type of compute environment. This determines the number of CPU cores and memory
                                 the build environment uses.  Available values
                                 include:
                              </p>
                              
                              <div class="itemizedlist">
                                 
                                 
                                 
                                 
                                 <ul class="itemizedlist" type="disc">
                                    <li class="listitem">
                                       
                                       <p>
                                          <code class="code">BUILD_GENERAL1_SMALL</code>: Use up to 3 GB memory and 2 vCPUs for
                                          builds.
                                       </p>
                                       
                                    </li>
                                    <li class="listitem">
                                       
                                       <p>
                                          <code class="code">BUILD_GENERAL1_MEDIUM</code>: Use up to 7 GB memory and 4 vCPUs for
                                          builds.
                                       </p>
                                       
                                    </li>
                                    <li class="listitem">
                                       
                                       <p>
                                          <code class="code">BUILD_GENERAL1_LARGE</code>: Use up to 15 GB memory and 8 vCPUs for
                                          builds.
                                       </p>
                                       
                                    </li>
                                 </ul>
                              </div>
                              
                              <p><em>Required</em>: Yes
                              </p>
                              <p><em>Type</em>: String
                              </p>
                              <p><em>Update requires</em>: <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-update-behaviors.html#update-no-interrupt">No interruption</a></p>
                           </dd>
                           <dt><a id="cfn-codebuild-project-environment-environmentvariables"></a><span class="term"><code class="code">EnvironmentVariables</code></span></dt>
                           <dd>
                              
                              <p>A set of environment variables to make available to builds for this build
                                 project.
                              </p>
                              
                              <p><em>Required</em>: No
                              </p>
                              <p><em>Type</em>: List of <a href="aws-properties-codebuild-project-environmentvariable.html">EnvironmentVariable</a></p>
                              <p><em>Update requires</em>: <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-update-behaviors.html#update-no-interrupt">No interruption</a></p>
                           </dd>
                           <dt><a id="cfn-codebuild-project-environment-image"></a><span class="term"><code class="code">Image</code></span></dt>
                           <dd>
                              
                              <p>The image tag or image digest that identifies the Docker image to use for this build
                                 project. Use the following formats:
                              </p>
                              
                              <div class="itemizedlist">
                                 
                                 
                                 
                                 <ul class="itemizedlist" type="disc">
                                    <li class="listitem">
                                       
                                       <p>For an image tag: <code class="code">registry/repository:tag</code>. For example, to specify an image with the tag &quot;latest,&quot; use 
                                          <code class="code">registry/repository:latest</code>.
                                       </p>
                                       
                                    </li>
                                    <li class="listitem">
                                       
                                       <p>For an image digest: <code class="code">registry/repository@digest</code>. For example, to specify an image with the digest 
                                          &quot;sha256:cbbf2f9a99b47fc460d422812b6a5adff7dfee951d8fa2e4a98caa0382cfbdbf,&quot; use 
                                          <code class="code">registry/repository@sha256:cbbf2f9a99b47fc460d422812b6a5adff7dfee951d8fa2e4a98caa0382cfbdbf</code>.
                                       </p>
                                       
                                    </li>
                                 </ul>
                              </div>
                              
                              <p><em>Required</em>: Yes
                              </p>
                              <p><em>Type</em>: String
                              </p>
                              <p><em>Minimum</em>: <code class="code">1</code></p>
                              <p><em>Update requires</em>: <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-update-behaviors.html#update-no-interrupt">No interruption</a></p>
                           </dd>
                           <dt><a id="cfn-codebuild-project-environment-imagepullcredentialstype"></a><span class="term"><code class="code">ImagePullCredentialsType</code></span></dt>
                           <dd>
                              
                              <p> The type of credentials AWS CodeBuild uses to pull images in your build. There are
                                 two valid
                                 values: 
                              </p>
                              
                              <div class="itemizedlist">
                                 
                                 
                                 
                                 <ul class="itemizedlist" type="disc">
                                    <li class="listitem">
                                       
                                       <p>
                                          <code class="code">CODEBUILD</code> specifies that AWS CodeBuild uses its own credentials.
                                          This requires that you modify your ECR repository policy to trust AWS CodeBuild&apos;s
                                          service principal.
                                          
                                       </p>
                                       
                                    </li>
                                    <li class="listitem">
                                       
                                       <p>
                                          <code class="code">SERVICE_ROLE</code> specifies that AWS CodeBuild uses your build project&apos;s service role.
                                          
                                       </p>
                                       
                                    </li>
                                 </ul>
                              </div>
                              
                              
                              <p>
                                 When you use a cross-account or private registry image, you must use SERVICE_ROLE
                                 credentials. 
                                 When you use an AWS CodeBuild curated image, you must use CODEBUILD credentials. 
                                 
                              </p>   
                              
                              <p><em>Required</em>: No
                              </p>
                              <p><em>Type</em>: String
                              </p>
                              <p><em>Allowed Values</em>: <code class="code">CODEBUILD | SERVICE_ROLE</code></p>
                              <p><em>Update requires</em>: <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-update-behaviors.html#update-no-interrupt">No interruption</a></p>
                           </dd>
                           <dt><a id="cfn-codebuild-project-environment-privilegedmode"></a><span class="term"><code class="code">PrivilegedMode</code></span></dt>
                           <dd>
                              
                              <p>Indicates how the project builds Docker images. Specify <code class="code">true</code> to enable running the Docker daemon inside a Docker container.
                              </p>
                              
                              <p>This value must be set to <code class="code">true</code> only if this build project will be used to build Docker images, and the specified
                                 build environment 
                                 image is not one provided by AWS CodeBuild with Docker support. Otherwise, all associated
                                 builds that attempt to interact with the Docker daemon 
                                 fail. For more information, see the <a href="https://docs.aws.amazon.com/codebuild/latest/userguide/create-project.html#create-project-cli">
                                    <code class="code">privilegedMode</code>
                                    </a> field in the <em>AWS CodeBuild User Guide</em>.
                              </p>   
                              
                              
                              <p>You must also start the Docker daemon so that
                                 builds can interact with it. One way to do this is to initialize the Docker daemon
                                 during
                                 the install phase of your build spec by running the following build commands. (Do
                                 not run
                                 these commands if the specified build environment image is provided by AWS CodeBuild
                                 with Docker
                                 support.)
                              </p>
                              
                              <p>If the operating system&apos;s base image is Ubuntu Linux:</p>
                              
                              <p>
                                 <code class="code">- nohup /usr/local/bin/dockerd --host=unix:///var/run/docker.sock --host=tcp://0.0.0.0:2375
                                    --storage-driver=overlay&amp;</code>
                                 
                              </p>
                              
                              <p>
                                 <code class="code">- timeout 15 sh -c &quot;until docker info; do echo .; sleep 1; done&quot;</code>
                                 
                              </p>
                              
                              <p>If the operating system&apos;s base image is Alpine Linux, add the <code class="code">-t</code> argument
                                 to <code class="code">timeout</code>:
                              </p>
                              
                              <p>
                                 <code class="code">- nohup /usr/local/bin/dockerd --host=unix:///var/run/docker.sock --host=tcp://0.0.0.0:2375
                                    --storage-driver=overlay&amp;</code>
                                 
                              </p>
                              
                              <p>
                                 <code class="code">- timeout -t 15 sh -c &quot;until docker info; do echo .; sleep 1; done&quot;</code>
                                 
                              </p>
                              
                              <p><em>Required</em>: No
                              </p>
                              <p><em>Type</em>: Boolean
                              </p>
                              <p><em>Update requires</em>: <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-update-behaviors.html#update-no-interrupt">No interruption</a></p>
                           </dd>
                           <dt><a id="cfn-codebuild-project-environment-registrycredential"></a><span class="term"><code class="code">RegistryCredential</code></span></dt>
                           <dd>
                              
                              <p>
                                 <code class="code">RegistryCredential</code> is a property of the <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-resource-codebuild-project.html#cfn-codebuild-project-environment">AWS::CodeBuild::Project Environment
                                    </a> property that specifies information about credentials that provide access to a private
                                 Docker registry. When this is set:
                              </p>
                              
                              <div class="itemizedlist">
                                 
                                 
                                 
                                 <ul class="itemizedlist" type="disc">
                                    <li class="listitem">
                                       
                                       <p>
                                          <code class="code">imagePullCredentialsType</code> must be set to <code class="code">SERVICE_ROLE</code>.
                                          
                                       </p>
                                       
                                    </li>
                                    <li class="listitem">
                                       
                                       <p>
                                          images cannot be curated or an Amazon ECR image.
                                          
                                       </p>
                                       
                                    </li>
                                 </ul>
                              </div>
                              
                              <p><em>Required</em>: No
                              </p>
                              <p><em>Type</em>: <a href="aws-properties-codebuild-project-registrycredential.html">RegistryCredential</a></p>
                              <p><em>Update requires</em>: <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-update-behaviors.html#update-no-interrupt">No interruption</a></p>
                           </dd>
                           <dt><a id="cfn-codebuild-project-environment-type"></a><span class="term"><code class="code">Type</code></span></dt>
                           <dd>
                              
                              <p>The type of build environment to use for related builds.</p>
                              
                              <p><em>Required</em>: Yes
                              </p>
                              <p><em>Type</em>: String
                              </p>
                              <p><em>Allowed Values</em>: <code class="code">LINUX_CONTAINER | WINDOWS_CONTAINER</code></p>
                              <p><em>Update requires</em>: <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-update-behaviors.html#update-no-interrupt">No interruption</a></p>
                           </dd>
                        </dl>
                     </div><div id="marketing-target"><span class="close-button"></span><div class="marketing-title" id="marketing-title"></div>
                        <div class="marketing-description"><span id="marketing-description"></span><span id="marketing-cta"></span></div>
                     </div></div>
</body>
</html>