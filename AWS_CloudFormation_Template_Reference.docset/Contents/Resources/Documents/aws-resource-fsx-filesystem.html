<!DOCTYPE html>
<html>
<head>
    <link href="css/awsdocs.css" rel="stylesheet" type="text/css">
    <script type="text/javascript" src="js/jquery.min.js"></script>
    <script type="text/javascript" src="js/awsdocs.min.js"></script>
    <meta charset="utf-8">
</head>
<body>
    <div id="content" style="padding: 10px 30px;">
    <div id="main-content" class="awsui-util-container">
                              <div id="main-col-body">
                                 <awsdocs-language-banner data-service="$ctrl.pageService"></awsdocs-language-banner>
                                 <h1 class="topictitle" id="aws-resource-fsx-filesystem">AWS::FSx::FileSystem</h1>
                                 <div class="awsdocs-page-header-container">
                                    <awsdocs-page-header></awsdocs-page-header>
                                    <awsdocs-filter-selector id="awsdocs-filter-selector"></awsdocs-filter-selector>
                                 </div>
                                 <p>The <code class="code">AWS::FSx::FileSystem</code> resource is an Amazon FSx resource type that
                                    creates either an Amazon FSx for Windows File Server file system or an Amazon FSx
                                    for
                                    Lustre file system.
                                 </p>
                                 <h2 id="aws-resource-fsx-filesystem-syntax">Syntax</h2>
                                 <p>To declare this entity in your AWS CloudFormation template, use the following syntax:</p>
                                 <div id="JSON" name="JSON" class="section langfilter">
                                    <h3 id="aws-resource-fsx-filesystem-syntax.json">JSON</h3><pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="json "><span>{</span>
  &quot;Type&quot; : &quot;AWS::FSx::FileSystem&quot;,
  &quot;Properties&quot; : <span>{</span>
      &quot;<a href="#cfn-fsx-filesystem-backupid">BackupId</a>&quot; : <code class="replaceable">String</code>,
      &quot;<a href="#cfn-fsx-filesystem-filesystemtype">FileSystemType</a>&quot; : <code class="replaceable">String</code>,
      &quot;<a href="#cfn-fsx-filesystem-kmskeyid">KmsKeyId</a>&quot; : <code class="replaceable">String</code>,
      &quot;<a href="#cfn-fsx-filesystem-lustreconfiguration">LustreConfiguration</a>&quot; : <code class="replaceable"><a href="./aws-properties-fsx-filesystem-lustreconfiguration.html">LustreConfiguration</a></code>,
      &quot;<a href="#cfn-fsx-filesystem-securitygroupids">SecurityGroupIds</a>&quot; : <code class="replaceable">[ String, ... ]</code>,
      &quot;<a href="#cfn-fsx-filesystem-storagecapacity">StorageCapacity</a>&quot; : <code class="replaceable">Integer</code>,
      &quot;<a href="#cfn-fsx-filesystem-storagetype">StorageType</a>&quot; : <code class="replaceable">String</code>,
      &quot;<a href="#cfn-fsx-filesystem-subnetids">SubnetIds</a>&quot; : <code class="replaceable">[ String, ... ]</code>,
      &quot;<a href="#cfn-fsx-filesystem-tags">Tags</a>&quot; : <code class="replaceable">[ <a href="aws-properties-resource-tags.html">Tag</a>, ... ]</code>,
      &quot;<a href="#cfn-fsx-filesystem-windowsconfiguration">WindowsConfiguration</a>&quot; : <code class="replaceable"><a href="./aws-properties-fsx-filesystem-windowsconfiguration.html">WindowsConfiguration</a></code>
    }
}
</code></pre></div>
                                 <div id="YAML" name="YAML" class="section langfilter">
                                    <h3 id="aws-resource-fsx-filesystem-syntax.yaml">YAML</h3><pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="yaml ">Type: AWS::FSx::FileSystem
Properties: 
  <a href="#cfn-fsx-filesystem-backupid">BackupId</a>: <code class="replaceable">String</code>
  <a href="#cfn-fsx-filesystem-filesystemtype">FileSystemType</a>: <code class="replaceable">String</code>
  <a href="#cfn-fsx-filesystem-kmskeyid">KmsKeyId</a>: <code class="replaceable">String</code>
  <a href="#cfn-fsx-filesystem-lustreconfiguration">LustreConfiguration</a>: <code class="replaceable">
    <a href="./aws-properties-fsx-filesystem-lustreconfiguration.html">LustreConfiguration</a></code>
  <a href="#cfn-fsx-filesystem-securitygroupids">SecurityGroupIds</a>: <code class="replaceable">
    - String</code>
  <a href="#cfn-fsx-filesystem-storagecapacity">StorageCapacity</a>: <code class="replaceable">Integer</code>
  <a href="#cfn-fsx-filesystem-storagetype">StorageType</a>: <code class="replaceable">String</code>
  <a href="#cfn-fsx-filesystem-subnetids">SubnetIds</a>: <code class="replaceable">
    - String</code>
  <a href="#cfn-fsx-filesystem-tags">Tags</a>: <code class="replaceable">
    - <a href="aws-properties-resource-tags.html">Tag</a></code>
  <a href="#cfn-fsx-filesystem-windowsconfiguration">WindowsConfiguration</a>: <code class="replaceable">
    <a href="./aws-properties-fsx-filesystem-windowsconfiguration.html">WindowsConfiguration</a></code>
</code></pre></div>
                                 <h2 id="aws-resource-fsx-filesystem-properties">Properties</h2>
                                 <div class="variablelist">
                                    <dl>
                                       <dt><a id="cfn-fsx-filesystem-backupid"></a><span class="term"><code class="code">BackupId</code></span></dt>
                                       <dd>
                                          
                                          <p>The ID of the backup. Specifies the backup to use if you&apos;re creating a file system
                                             from an existing backup.
                                          </p>
                                          
                                          <p><em>Required</em>: No
                                          </p>
                                          <p><em>Type</em>: String
                                          </p>
                                          <p><em>Update requires</em>: <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-update-behaviors.html#update-replacement">Replacement</a></p>
                                       </dd>
                                       <dt><a id="cfn-fsx-filesystem-filesystemtype"></a><span class="term"><code class="code">FileSystemType</code></span></dt>
                                       <dd>
                                          
                                          <p>The type of Amazon FSx file system, either <code class="code">LUSTRE</code> or <code class="code">WINDOWS</code>.
                                          </p>
                                          
                                          <p><em>Required</em>: Yes
                                          </p>
                                          <p><em>Type</em>: String
                                          </p>
                                          <p><em>Allowed values</em>: <code class="code">LUSTRE | WINDOWS</code></p>
                                          <p><em>Update requires</em>: <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-update-behaviors.html#update-replacement">Replacement</a></p>
                                       </dd>
                                       <dt><a id="cfn-fsx-filesystem-kmskeyid"></a><span class="term"><code class="code">KmsKeyId</code></span></dt>
                                       <dd>
                                          
                                          <p>The ID of the AWS Key Management Service (AWS KMS) key used to encrypt the file system&apos;s
                                             data
                                             for Amazon FSx for Windows File Server file systems and persistent Amazon FSx for
                                             Lustre file
                                             systems at rest. In either case, if not specified, the Amazon FSx managed key
                                             is used. The scratch Amazon FSx for Lustre file systems are always encrypted at rest
                                             using
                                             Amazon FSx managed keys. For more information, see <a href="https://docs.aws.amazon.com/kms/latest/APIReference/API_Encrypt.html">Encrypt</a>
                                             in the <em>AWS Key Management Service API Reference</em>.
                                          </p>
                                          
                                          <p><em>Required</em>: No
                                          </p>
                                          <p><em>Type</em>: String
                                          </p>
                                          <p><em>Update requires</em>: <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-update-behaviors.html#update-replacement">Replacement</a></p>
                                       </dd>
                                       <dt><a id="cfn-fsx-filesystem-lustreconfiguration"></a><span class="term"><code class="code">LustreConfiguration</code></span></dt>
                                       <dd>
                                          
                                          <p>The Lustre configuration for the file system being created. 
                                             
                                          </p>
                                          
                                          <p><em>Required</em>: No
                                          </p>
                                          <p><em>Type</em>: <a href="./aws-properties-fsx-filesystem-lustreconfiguration.html">LustreConfiguration</a></p>
                                          <p><em>Update requires</em>: <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-update-behaviors.html#update-no-interrupt">No interruption</a></p>
                                       </dd>
                                       <dt><a id="cfn-fsx-filesystem-securitygroupids"></a><span class="term"><code class="code">SecurityGroupIds</code></span></dt>
                                       <dd>
                                          
                                          <p>A list of IDs specifying the security groups to apply to all network interfaces
                                             created for file system access. This list isn&apos;t returned in later requests to
                                             describe the file system.
                                          </p>
                                          
                                          <p><em>Required</em>: No
                                          </p>
                                          <p><em>Type</em>: List of String
                                          </p>
                                          <p><em>Maximum</em>: <code class="code">50</code></p>
                                          <p><em>Update requires</em>: <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-update-behaviors.html#update-replacement">Replacement</a></p>
                                       </dd>
                                       <dt><a id="cfn-fsx-filesystem-storagecapacity"></a><span class="term"><code class="code">StorageCapacity</code></span></dt>
                                       <dd>
                                          
                                          <p>Sets the storage capacity of the file system that you&apos;re creating.</p>      
                                          
                                          <p>For Lustre file systems:</p>
                                          
                                          <div class="itemizedlist">
                                               
                                              
                                              
                                             
                                             <ul class="itemizedlist" type="disc">
                                                <li class="listitem">
                                                   
                                                   <p>For <code class="code">SCRATCH_2</code> and <code class="code">PERSISTENT_1 SSD</code> deployment types, valid values are 
                                                      1200 GiB, 2400 GiB, and increments of 2400 GiB.
                                                   </p>
                                                   
                                                </li>
                                                <li class="listitem">
                                                   
                                                   <p>For <code class="code">PERSISTENT HDD</code> file systems, valid values are increments of 6000 GiB for 
                                                      12 MB/s/TiB file systems and increments of 1800 GiB for 40 MB/s/TiB file systems.
                                                   </p>
                                                   
                                                </li>
                                                <li class="listitem">
                                                   
                                                   <p>For <code class="code">SCRATCH_1</code> deployment type, valid values are 
                                                      1200 GiB, 2400 GiB, and increments of 3600 GiB.
                                                   </p>
                                                   
                                                </li>
                                             </ul>
                                          </div>
                                          
                                          <p>For Windows file systems:</p>
                                          
                                          <div class="itemizedlist">
                                              
                                              
                                             
                                             <ul class="itemizedlist" type="disc">
                                                <li class="listitem">
                                                   
                                                   <p>If <code class="code">StorageType=SSD</code>, valid values are 32 GiB - 65,536 GiB (64 TiB).
                                                   </p>
                                                   
                                                </li>
                                                <li class="listitem">
                                                   
                                                   <p>If <code class="code">StorageType=HDD</code>, valid values are 2000 GiB - 65,536 GiB (64 TiB).
                                                   </p>
                                                   
                                                </li>
                                             </ul>
                                          </div>
                                          
                                          
                                          <p><em>Required</em>: No
                                          </p>
                                          <p><em>Type</em>: Integer
                                          </p>
                                          <p><em>Minimum</em>: <code class="code">0</code></p>
                                          <p><em>Maximum</em>: <code class="code">2147483647</code></p>
                                          <p><em>Update requires</em>: <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-update-behaviors.html#update-no-interrupt">No interruption</a></p>
                                       </dd>
                                       <dt><a id="cfn-fsx-filesystem-storagetype"></a><span class="term"><code class="code">StorageType</code></span></dt>
                                       <dd>
                                          
                                          <p>Sets the storage type for the file system you&apos;re creating. 
                                             Valid values are <code class="code">SSD</code> and <code class="code">HDD</code>.
                                          </p>
                                          
                                          <div class="itemizedlist">
                                              
                                               
                                             
                                             <ul class="itemizedlist" type="disc">
                                                <li class="listitem">
                                                   
                                                   <p>Set to <code class="code">SSD</code> to use solid state drive storage. 
                                                      SSD is supported on all Windows and Lustre deployment types.
                                                   </p>
                                                   
                                                </li>
                                                <li class="listitem">
                                                   
                                                   <p>Set to <code class="code">HDD</code> to use hard disk drive storage. 
                                                      HDD is supported on <code class="code">SINGLE_AZ_2</code> and <code class="code">MULTI_AZ_1</code> Windows file system deployment types,
                                                      and on <code class="code">PERSISTENT</code> Lustre file system deployment types. 
                                                      
                                                   </p>
                                                   
                                                </li>
                                             </ul>
                                          </div>
                                          
                                          <p>
                                             Default value is <code class="code">SSD</code>. For more information, see 
                                             <a href="https://docs.aws.amazon.com/fsx/latest/WindowsGuide/optimize-fsx-costs.html#storage-type-options">
                                                Storage Type Options</a> in the <em>Amazon FSx for Windows User Guide</em> and 
                                             <a href="https://docs.aws.amazon.com/fsx/latest/LustreGuide/what-is.html#storage-options">Multiple Storage Options</a> 
                                             in the <em>Amazon FSx for Lustre User Guide</em>.
                                             
                                          </p>
                                          
                                          <p><em>Required</em>: No
                                          </p>
                                          <p><em>Type</em>: String
                                          </p>
                                          <p><em>Allowed values</em>: <code class="code">HDD | SSD</code></p>
                                          <p><em>Update requires</em>: <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-update-behaviors.html#update-replacement">Replacement</a></p>
                                       </dd>
                                       <dt><a id="cfn-fsx-filesystem-subnetids"></a><span class="term"><code class="code">SubnetIds</code></span></dt>
                                       <dd>
                                          
                                          <p>Specifies the IDs of the subnets that the file system will be accessible from. For
                                             Windows <code class="code">MULTI_AZ_1</code> 
                                             file system deployment types, provide exactly two subnet IDs, one for the preferred
                                             file server 
                                             and one for the standby file server. You specify one of these subnets as the preferred
                                             subnet 
                                             using the <code class="code">WindowsConfiguration &gt; PreferredSubnetID</code> property.
                                          </p>
                                          
                                          <p>For Windows <code class="code">SINGLE_AZ_1</code> and <code class="code">SINGLE_AZ_2</code> file system deployment types and Lustre file systems, provide exactly one subnet
                                             ID.
                                             The file server is launched in that subnet&apos;s Availability Zone.
                                          </p>
                                          
                                          <p><em>Required</em>: Yes
                                          </p>
                                          <p><em>Type</em>: List of String
                                          </p>
                                          <p><em>Maximum</em>: <code class="code">50</code></p>
                                          <p><em>Update requires</em>: <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-update-behaviors.html#update-replacement">Replacement</a></p>
                                       </dd>
                                       <dt><a id="cfn-fsx-filesystem-tags"></a><span class="term"><code class="code">Tags</code></span></dt>
                                       <dd>
                                          
                                          
                                          <p>An array of key-value pairs to apply to this resource.</p>
                                          
                                          <p>For more information, see <a href="aws-properties-resource-tags.html">Tag</a>.
                                          </p>
                                          
                                          <p><em>Required</em>: No
                                          </p>
                                          <p><em>Type</em>: List of <a href="aws-properties-resource-tags.html">Tag</a></p>
                                          <p><em>Maximum</em>: <code class="code">50</code></p>
                                          <p><em>Update requires</em>: <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-update-behaviors.html#update-no-interrupt">No interruption</a></p>
                                       </dd>
                                       <dt><a id="cfn-fsx-filesystem-windowsconfiguration"></a><span class="term"><code class="code">WindowsConfiguration</code></span></dt>
                                       <dd>
                                          
                                          <p>The configuration object for the Microsoft Windows file system you are creating. 
                                             This value is required if <code class="code">FileSystemType</code> is set to <code class="code">WINDOWS</code>.
                                          </p>
                                          
                                          <p><em>Required</em>: Conditional
                                          </p>
                                          <p><em>Type</em>: <a href="./aws-properties-fsx-filesystem-windowsconfiguration.html">WindowsConfiguration</a></p>
                                          <p><em>Update requires</em>: <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-update-behaviors.html#update-no-interrupt">No interruption</a></p>
                                       </dd>
                                    </dl>
                                 </div>
                                 <h2 id="aws-resource-fsx-filesystem-return-values">Return values</h2>
                                 <h3 id="aws-resource-fsx-filesystem-return-values-ref">Ref</h3>
                                 <p>When you pass the logical ID of this resource to the intrinsic <code class="code">Ref</code> function, <code class="code">Ref</code> returns the function returns the file system resource ID. For example:
                                 </p>
                                 <p><code class="code"><span>{</span>&quot;Ref&quot;:&quot;fs-01234567890123456&quot;}</code></p>
                                 <p>For the Amazon FSx file system <code class="code">fs-01234567890123456</code>, Ref returns the file system ID.
                                 </p>
                                 <p>For more information about using the <code class="code">Ref</code> function, see <a href="intrinsic-function-reference-ref.html">Ref</a>.
                                 </p>
                                 <h3 id="aws-resource-fsx-filesystem-return-values-fn--getatt">Fn::GetAtt</h3>
                                 <p>The <code class="code">Fn::GetAtt</code> intrinsic function returns a value for a specified attribute of this type. The following
                                    are the available attributes and sample return values.
                                 </p> 
                                 
                                 <p>For more information about using the <code class="code">Fn::GetAtt</code> intrinsic function, see <a href="intrinsic-function-reference-getatt.html">Fn::GetAtt</a>.
                                 </p>
                                 <h4 id="aws-resource-fsx-filesystem-return-values-fn--getatt-fn--getatt"></h4>
                                 <div class="variablelist">
                                    <dl>
                                       <dt><a id="LustreMountName-fn::getatt"></a><span class="term"><code class="code">LustreMountName</code></span></dt>
                                       <dd>
                                          
                                          <p>Use the LustreMountName value when mounting an Amazon FSx for Lustre file system.
                                             
                                             For SCRATCH_1 deployment types, this value is always &quot;fsx&quot;. For SCRATCH_2 and PERSISTENT_1
                                             deployment types,
                                             this value is a string that is unique within an AWS Region. For more information,
                                             see 
                                             <a href="https://docs.aws.amazon.com/fsx/latest/LustreGuide/mounting-ec2-instance.html">Mounting from an Amazon EC2 Instance</a>.
                                          </p>
                                          
                                       </dd>
                                    </dl>
                                 </div>
                                 <h2 id="aws-resource-fsx-filesystem--examples">Examples</h2>
                                 <h3 id="aws-resource-fsx-filesystem--examples--Create_an_Amazon_FSx_for_Lustre_File_System">Create an Amazon FSx for Lustre File System</h3>
                                 <p>The following examples create a 1.2 TiB persistent Amazon FSx for Lustre file system,
                                    with a <code class="code">PerUnitStorageThroughput</code> of 200 MB/s/TiB.
                                 </p>
                                 <div id="JSON" name="JSON" class="section langfilter">
                                    <h4 id="aws-resource-fsx-filesystem--examples--Create_an_Amazon_FSx_for_Lustre_File_System--json">JSON</h4><pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="json "><span>{</span>
    &quot;Resources&quot;: <span>{</span>
        &quot;BasicS3LinkedLustreFileSystem&quot;: <span>{</span>
            &quot;Type&quot;: &quot;AWS::FSx::FileSystem&quot;,
            &quot;Properties&quot;: <span>{</span>
                &quot;FileSystemType&quot;: &quot;LUSTRE&quot;,
                &quot;StorageCapacity&quot;: 1200,
                &quot;SubnetIds&quot;: [
                    <span>{</span>
                        &quot;Fn::ImportValue&quot;: &quot;MySubnet01&quot;
                    }
                ],
                &quot;SecurityGroupIds&quot;: [
                    <span>{</span>
                        &quot;Fn::ImportValue&quot;: &quot;LustreIngressSecurityGroupId&quot;
                    }
                ],
                &quot;Tags&quot;: [
                    <span>{</span>
                        &quot;Key&quot;: &quot;Name&quot;,
                        &quot;Value&quot;: &quot;CFNs3linkedLustre&quot;
                    }
                ],
                &quot;LustreConfiguration&quot;: <span>{</span>
                    &quot;AutoImportPolicy&quot; : &quot;NEW&quot;,                    
                    &quot;CopyTagsToBackups&quot; : true,
                    &quot;DeploymentType&quot;: &quot;PERSISTENT_1&quot;,
                    &quot;PerUnitStorageThroughput&quot;: 200,                    
                    &quot;ImportPath&quot;: <span>{</span>
                        &quot;Fn::Join&quot;: [
                            &quot;&quot;,
                            [
                                &quot;s3://&quot;,
                                <span>{</span>
                                    &quot;Fn::ImportValue&quot;: &quot;LustreCFNS3ImportBucketName&quot;
                                }
                            ]
                        ]
                    },
                    &quot;ExportPath&quot;: <span>{</span>
                        &quot;Fn::Join&quot;: [
                            &quot;&quot;,
                            [
                                &quot;s3://&quot;,
                                <span>{</span>
                                    &quot;Fn::ImportValue&quot;: &quot;LustreCFNS3ExportPath&quot;
                                }
                            ]
                        ]
                    },
                    &quot;WeeklyMaintenanceStartTime&quot;: &quot;2:20:30&quot;
                }
            }
        }
    },
    &quot;Outputs&quot;: <span>{</span>
        &quot;FileSystemId&quot;: <span>{</span>
            &quot;Value&quot;: <span>{</span>
                &quot;Ref&quot;: &quot;BasicS3LinkedLustreFileSystem&quot;
            }
        }
    }
}
            </code></pre></div>
                                 <div id="YAML" name="YAML" class="section langfilter">
                                    <h4 id="aws-resource-fsx-filesystem--examples--Create_an_Amazon_FSx_for_Lustre_File_System--yaml">YAML</h4><pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="yaml ">Resources:
  BasicS3LinkedLustreFileSystem:
    Type: AWS::FSx::FileSystem
    Properties:
      FileSystemType: &quot;LUSTRE&quot;
      StorageCapacity: 1200
      SubnetIds: [!ImportValue MySubnet01]
      SecurityGroupIds: [!ImportValue LustreIngressSecurityGroupId]
      Tags:
        - Key: &quot;Name&quot;
          Value: &quot;CFNs3linkedLustre&quot;
      LustreConfiguration:
        AutoImportPolicy: &quot;NEW&quot;
        CopyTagsToBackups: true
        DeploymentType: &quot;PERSISTENT_1&quot;
        PerUnitStorageThroughput: 200
        ImportPath: !Join [&quot;&quot;, [&quot;s3://&quot;, !ImportValue LustreCFNS3ImportBucketName]]
        ExportPath: !Join [&quot;&quot;, [&quot;s3://&quot;, !ImportValue LustreCFNS3ExportPath]]
        WeeklyMaintenanceStartTime: &quot;2:20:30&quot;
Outputs:
  FileSystemId:
    Value: !Ref BasicS3LinkedLustreFileSystem</code></pre></div>
                                 <h3 id="aws-resource-fsx-filesystem--examples--Create_an_Amazon_FSx_for_Windows_File_Server_File_System_in_a_Self-managed_Active_Directory">Create an Amazon FSx for Windows File Server File System in a Self-managed Active
                                    Directory
                                 </h3>
                                 <p>The following examples create a Multi-AZ Amazon FSx for Windows File Server file system
                                    joined 
                                    to a Self-managed active directory.
                                 </p>
                                 <div id="JSON" name="JSON" class="section langfilter">
                                    <h4 id="aws-resource-fsx-filesystem--examples--Create_an_Amazon_FSx_for_Windows_File_Server_File_System_in_a_Self-managed_Active_Directory--json">JSON</h4><pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="json "><span>{</span>
    &quot;Resources&quot;: <span>{</span>
        &quot;WindowsSelfManagedADFileSystemWithAllConfigs&quot;: <span>{</span>
            &quot;Type&quot;: &quot;AWS::FSx::FileSystem&quot;,
            &quot;Properties&quot;: <span>{</span>
                &quot;FileSystemType&quot;: &quot;WINDOWS&quot;,
                &quot;StorageCapacity&quot;: 32,
                &quot;StorageType&quot;: &quot;SSD&quot;,
                &quot;SubnetIds&quot;: [
                    <span>{</span>
                        &quot;Fn::ImportValue&quot;: &quot;MySubnet01&quot;
                    },
                    <span>{</span>
                        &quot;Fn::ImportValue&quot;: &quot;MySubnet02&quot;
                    }
                ],
                &quot;SecurityGroupIds&quot;: [
                    <span>{</span>
                        &quot;Fn::ImportValue&quot;: &quot;WindowsIngressSecurityGroupId&quot;
                    }
                ],
                &quot;Tags&quot;: [
                    <span>{</span>
                        &quot;Key&quot;: &quot;Name&quot;,
                        &quot;Value&quot;: &quot;windows&quot;
                    }
                ],
                &quot;WindowsConfiguration&quot;: <span>{</span>
                    &quot;ThroughputCapacity&quot;: 8,
                    &quot;WeeklyMaintenanceStartTime&quot;: &quot;4:16:30&quot;,
                    &quot;DailyAutomaticBackupStartTime&quot;: &quot;01:00&quot;,
                    &quot;AutomaticBackupRetentionDays&quot;: 30,
                    &quot;CopyTagsToBackups&quot;: false,
                    &quot;DeploymentType&quot;: &quot;MULTI_AZ_1&quot;,
                    &quot;PreferredSubnetId&quot;: <span>{</span>
                        &quot;Fn:ImportValue&quot;: &quot;MySubnet01&quot;
                    },
                    &quot;SelfManagedActiveDirectoryConfiguration&quot;: <span>{</span>
                        &quot;DnsIps&quot;: [
                            <span>{</span>
                                &quot;Fn::Select&quot;: [
                                    0,
                                    <span>{</span>
                                        &quot;Fn::Split&quot;: [
                                            &quot;,&quot;,
                                            <span>{</span>
                                                &quot;Fn::ImportValue&quot;: &quot;MySelfManagedADDnsIpAddresses&quot;
                                            }
                                        ]
                                    }
                                ]
                            }
                        ],
                        &quot;DomainName&quot;: <span>{</span>
                            &quot;Fn::ImportValue&quot;: &quot;SelfManagedADDomainName&quot;
                        },
                        &quot;FileSystemAdministratorsGroup&quot;: &quot;MyDomainAdminGroup&quot;,
                        &quot;OrganizationalUnitDistinguishedName&quot;: &quot;OU=FileSystems,DC=corp,DC=example,DC=com&quot;,
                        &quot;UserName&quot;: &quot;Admin&quot;,
                        &quot;Password&quot;: <span>{</span>
                            &quot;Fn::Join&quot;: [
                                &quot;:&quot;,
                                [
                                    &quot;<span>{</span><span>{</span>resolve:secretsmanager&quot;,
                                    <span>{</span>
                                        &quot;Fn::ImportValue&quot;: &quot;MySelfManagedADCredentialName&quot;
                                    },
                                    &quot;SecretString}}&quot;
                                ]
                            ]
                        }
                    }
                }
            }
        }
    },
    &quot;Outputs&quot;: <span>{</span>
        &quot;FileSystemId&quot;: <span>{</span>
            &quot;Value&quot;: <span>{</span>
                &quot;Ref&quot;: &quot;WindowsSelfManagedADFileSystemWithAllConfigs&quot;
            }
        }
    }
}</code></pre></div>
                                 <div id="YAML" name="YAML" class="section langfilter">
                                    <h4 id="aws-resource-fsx-filesystem--examples--Create_an_Amazon_FSx_for_Windows_File_Server_File_System_in_a_Self-managed_Active_Directory--yaml">YAML</h4><pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="yaml ">Resources:
  WindowsSelfManagedADFileSystemWithAllConfigs:
    Type: &apos;AWS::FSx::FileSystem&apos;
    Properties:
      FileSystemType: WINDOWS
      StorageCapacity: 32
      StorageType: SSD
      SubnetIds:
        - !ImportValue MySubnet01
        - !ImportValue MySubnet02
      SecurityGroupIds:
        - !ImportValue WindowsIngressSecurityGroupId
      Tags:
        - Key: Name
          Value: windows
      WindowsConfiguration:
        ThroughputCapacity: 8
        WeeklyMaintenanceStartTime: &apos;4:16:30&apos;
        DailyAutomaticBackupStartTime: &apos;01:00&apos;
        AutomaticBackupRetentionDays: 30
        CopyTagsToBackups: false
        DeploymentType: MULTI_AZ_1
        PreferredSubnetId: !ImportValue MySubnet01
        SelfManagedActiveDirectoryConfiguration:
          DnsIps:
            - !Select 
              - 0
              - !Split 
                - &apos;,&apos;
                - !ImportValue MySelfManagedADDnsIpAddresses
          DomainName:
            &apos;Fn::ImportValue&apos;: SelfManagedADDomainName
          FileSystemAdministratorsGroup: MyDomainAdminGroup
          OrganizationalUnitDistinguishedName: &apos;OU=FileSystems,DC=corp,DC=example,DC=com&apos;
          UserName: Admin
          Password: !Join 
            - &apos;:&apos;
            - - &apos;<span>{</span><span>{</span>resolve:secretsmanager&apos;
              - !ImportValue MySelfManagedADCredentialName
              - &apos;SecretString}}&apos;
Outputs:
  FileSystemId:
    Value: !Ref WindowsSelfManagedADFileSystemWithAllConfigs
</code></pre></div>
                                 <h3 id="aws-resource-fsx-filesystem--examples--Create_an_Amazon_FSx_for_Windows_File_Server_File_System_in_an_AWS_Managed_Active_Directory">Create an Amazon FSx for Windows File Server File System in an AWS Managed Active
                                    Directory
                                 </h3>
                                 <p>The following examples create a Multi-AZ Amazon FSx for Windows File Server file system
                                    using HDD storage that is joined to an AWS Managed Active Directory.
                                 </p>
                                 <div id="JSON" name="JSON" class="section langfilter">
                                    <h4 id="aws-resource-fsx-filesystem--examples--Create_an_Amazon_FSx_for_Windows_File_Server_File_System_in_an_AWS_Managed_Active_Directory--json">JSON</h4><pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="json "><span>{</span>
    &quot;Resources&quot;: <span>{</span>
        &quot;WindowsMadFileSystemWithAllConfigs&quot;: <span>{</span>
            &quot;Type&quot;: &quot;AWS::FSx::FileSystem&quot;,
            &quot;Properties&quot;: <span>{</span>
                &quot;FileSystemType&quot;: &quot;WINDOWS&quot;,
                &quot;StorageCapacity&quot;: 2000,
                &quot;StorageType&quot;: &quot;HDD&quot;,
                &quot;SubnetIds&quot;: [
                    <span>{</span>
                        &quot;Fn::ImportValue&quot;: &quot;CfnFsxMadSubnet01&quot;
                    },
                    <span>{</span>
                        &quot;Fn::ImportValue&quot;: &quot;CfnFsxMadSubnet02&quot;
                    }
                ],
                &quot;SecurityGroupIds&quot;: [
                    <span>{</span>
                        &quot;Fn::ImportValue&quot;: &quot;WindowsIngressSecurityGroupId&quot;
                    }
                ],
                &quot;Tags&quot;: [
                    <span>{</span>
                        &quot;Key&quot;: &quot;Name&quot;,
                        &quot;Value&quot;: &quot;windows&quot;
                    }
                ],
                &quot;WindowsConfiguration&quot;: <span>{</span>
                    &quot;ActiveDirectoryId&quot;: <span>{</span>
                        &quot;Fn::ImportValue&quot;: &quot;CfnFsxMadDirectoryServiceId&quot;
                    },
                    &quot;ThroughputCapacity&quot;: 8,
                    &quot;WeeklyMaintenanceStartTime&quot;: &quot;4:16:30&quot;,
                    &quot;DailyAutomaticBackupStartTime&quot;: &quot;01:00&quot;,
                    &quot;AutomaticBackupRetentionDays&quot;: 90,
                    &quot;CopyTagsToBackups&quot;: false,
                    &quot;DeploymentType&quot;: &quot;MULTI_AZ_1&quot;,
                    &quot;PreferredSubnetId&quot;: <span>{</span>
                        &quot;Fn:ImportValue&quot;: &quot;CfnFsxMadSubnet01&quot;
                    }
                }
            }
        }
    },
    &quot;Outputs&quot;: <span>{</span>
        &quot;FileSystemId&quot;: <span>{</span>
            &quot;Value&quot;: <span>{</span>
                &quot;Ref&quot;: &quot;WindowsMadFileSystemWithAllConfigs&quot;
            }
        }
    }
}</code></pre></div>
                                 <div id="YAML" name="YAML" class="section langfilter">
                                    <h4 id="aws-resource-fsx-filesystem--examples--Create_an_Amazon_FSx_for_Windows_File_Server_File_System_in_an_AWS_Managed_Active_Directory--yaml">YAML</h4><pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="yaml ">Resources:
  WindowsMadFileSystemWithAllConfigs:
    Type: &apos;AWS::FSx::FileSystem&apos;
    Properties:
      FileSystemType: WINDOWS
      StorageCapacity: 2000
      StorageType: SSD
      SubnetIds:
        - !ImportValue CfnFsxMadSubnet01
        - !ImportValue CfnFsxMadSubnet02
      SecurityGroupIds:
        - !ImportValue WindowsIngressSecurityGroupId
      Tags:
        - Key: Name
          Value: windows
      WindowsConfiguration:
        ActiveDirectoryId: !ImportValue CfnFsxMadDirectoryServiceId
        ThroughputCapacity: 8
        WeeklyMaintenanceStartTime: &apos;4:16:30&apos;
        DailyAutomaticBackupStartTime: &apos;01:00&apos;
        AutomaticBackupRetentionDays: 90
        DeploymentType: MULTI_AZ_1
        PreferredSubnetId: !ImportValue CfnFsxMadSubnet01
        CopyTagsToBackups: false
Outputs:
  FileSystemId:
    Value: !Ref WindowsMadFileSystemWithAllConfigs
</code></pre></div>
                                 <awsdocs-copyright class="copyright-print"></awsdocs-copyright>
                              </div>
                              <noscript>
                                 <div>
                                    <div>
                                       <div>
                                          <div id="js_error_message">
                                             <p><img src="https://d1ge0kk1l5kms0.cloudfront.net/images/G/01/webservices/console/warning.png" alt="Warning"> <strong>Javascript is disabled or is unavailable in your
                                                   browser.</strong></p>
                                             <p>To use the AWS Documentation, Javascript must be
                                                enabled. Please refer to your browser&apos;s Help pages for instructions.
                                             </p>
                                          </div>
                                       </div>
                                    </div>
                                 </div>
                              </noscript>
                              
                              <awsdocs-page-utilities></awsdocs-page-utilities>
                           </div></div>
</body>
</html>