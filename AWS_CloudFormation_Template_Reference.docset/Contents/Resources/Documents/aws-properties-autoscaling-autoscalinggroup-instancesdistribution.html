<!DOCTYPE html>
<html>
<head>
    <link href="css/awsdocs.css" rel="stylesheet" type="text/css">
    <script type="text/javascript" src="js/jquery.min.js"></script>
    <script type="text/javascript" src="js/awsdocs.min.js"></script>
    <meta charset="utf-8">
</head>
<body>
    <div id="content" style="padding: 10px 30px;">
    <div id="main-content" class="awsui-util-container">
                              <div id="main-col-body">
                                 <awsdocs-language-banner data-service="$ctrl.pageService"></awsdocs-language-banner>
                                 <h1 class="topictitle" id="aws-properties-autoscaling-autoscalinggroup-instancesdistribution">AWS::AutoScaling::AutoScalingGroup InstancesDistribution</h1>
                                 <div class="awsdocs-page-header-container">
                                    <awsdocs-page-header></awsdocs-page-header>
                                    <awsdocs-filter-selector id="awsdocs-filter-selector"></awsdocs-filter-selector>
                                 </div>
                                 <p>
                                    <code class="code">InstancesDistribution</code> is a subproperty of <a href="aws-properties-autoscaling-autoscalinggroup-mixedinstancespolicy.html">MixedInstancesPolicy</a> that describes an instances distribution for an Auto Scaling
                                    group. The instances distribution specifies the distribution of On-Demand Instances
                                    and Spot
                                    Instances, the maximum price to pay for Spot Instances, and how the Auto Scaling group
                                    allocates instance types to fulfill On-Demand and Spot capacities. 
                                 </p>
                                 <p>For more information and example configurations, see <a href="https://docs.aws.amazon.com/autoscaling/ec2/userguide/asg-purchase-options.html">Auto Scaling groups with multiple
                                       instance types and purchase options</a> in the <em>Amazon EC2 Auto Scaling User
                                       Guide</em>.
                                 </p>
                                 <h2 id="aws-properties-autoscaling-autoscalinggroup-instancesdistribution-syntax">Syntax</h2>
                                 <p>To declare this entity in your AWS CloudFormation template, use the following syntax:</p>
                                 <div id="JSON" name="JSON" class="section langfilter">
                                    <h3 id="aws-properties-autoscaling-autoscalinggroup-instancesdistribution-syntax.json">JSON</h3><pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="json "><span>{</span>
  &quot;<a href="#cfn-autoscaling-autoscalinggroup-instancesdistribution-ondemandallocationstrategy">OnDemandAllocationStrategy</a>&quot; : <code class="replaceable">String</code>,
  &quot;<a href="#cfn-autoscaling-autoscalinggroup-instancesdistribution-ondemandbasecapacity">OnDemandBaseCapacity</a>&quot; : <code class="replaceable">Integer</code>,
  &quot;<a href="#cfn-autoscaling-autoscalinggroup-instancesdistribution-ondemandpercentageabovebasecapacity">OnDemandPercentageAboveBaseCapacity</a>&quot; : <code class="replaceable">Integer</code>,
  &quot;<a href="#cfn-autoscaling-autoscalinggroup-instancesdistribution-spotallocationstrategy">SpotAllocationStrategy</a>&quot; : <code class="replaceable">String</code>,
  &quot;<a href="#cfn-autoscaling-autoscalinggroup-instancesdistribution-spotinstancepools">SpotInstancePools</a>&quot; : <code class="replaceable">Integer</code>,
  &quot;<a href="#cfn-autoscaling-autoscalinggroup-instancesdistribution-spotmaxprice">SpotMaxPrice</a>&quot; : <code class="replaceable">String</code>
}
</code></pre></div>
                                 <div id="YAML" name="YAML" class="section langfilter">
                                    <h3 id="aws-properties-autoscaling-autoscalinggroup-instancesdistribution-syntax.yaml">YAML</h3><pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="yaml ">  <a href="#cfn-autoscaling-autoscalinggroup-instancesdistribution-ondemandallocationstrategy">OnDemandAllocationStrategy</a>: <code class="replaceable">String</code>
  <a href="#cfn-autoscaling-autoscalinggroup-instancesdistribution-ondemandbasecapacity">OnDemandBaseCapacity</a>: <code class="replaceable">Integer</code>
  <a href="#cfn-autoscaling-autoscalinggroup-instancesdistribution-ondemandpercentageabovebasecapacity">OnDemandPercentageAboveBaseCapacity</a>: <code class="replaceable">Integer</code>
  <a href="#cfn-autoscaling-autoscalinggroup-instancesdistribution-spotallocationstrategy">SpotAllocationStrategy</a>: <code class="replaceable">String</code>
  <a href="#cfn-autoscaling-autoscalinggroup-instancesdistribution-spotinstancepools">SpotInstancePools</a>: <code class="replaceable">Integer</code>
  <a href="#cfn-autoscaling-autoscalinggroup-instancesdistribution-spotmaxprice">SpotMaxPrice</a>: <code class="replaceable">String</code>
</code></pre></div>
                                 <h2 id="aws-properties-autoscaling-autoscalinggroup-instancesdistribution-properties">Properties</h2>
                                 <div class="variablelist">
                                    <dl>
                                       <dt><a id="cfn-autoscaling-autoscalinggroup-instancesdistribution-ondemandallocationstrategy"></a><span class="term"><code class="code">OnDemandAllocationStrategy</code></span></dt>
                                       <dd>
                                          
                                          <p>Indicates how to allocate instance types to fulfill On-Demand capacity. The only valid
                                             value is <code class="code">prioritized</code>, which is also the default value. This strategy uses the
                                             order of instance types in the <code class="code">LaunchTemplateOverrides</code> to define the launch
                                             priority of each instance type. The first instance type in the array is prioritized
                                             higher
                                             than the last. If all your On-Demand capacity cannot be fulfilled using your highest
                                             priority
                                             instance, then the Auto Scaling group launches the remaining capacity using the second
                                             priority instance type, and so on.
                                          </p>
                                          
                                          <p><em>Required</em>: No
                                          </p>
                                          <p><em>Type</em>: String
                                          </p>
                                          <p><em>Update requires</em>: <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-update-behaviors.html#update-no-interrupt">No interruption</a></p>
                                       </dd>
                                       <dt><a id="cfn-autoscaling-autoscalinggroup-instancesdistribution-ondemandbasecapacity"></a><span class="term"><code class="code">OnDemandBaseCapacity</code></span></dt>
                                       <dd>
                                          
                                          <p>The minimum amount of the Auto Scaling group&apos;s capacity that must be fulfilled by
                                             On-Demand Instances. This base portion is provisioned first as your group scales.
                                             Defaults to
                                             0 if not specified. If you specify weights for the instance types in the overrides,
                                             set the
                                             value of <code class="code">OnDemandBaseCapacity</code> in terms of the number of capacity units, and not
                                             the number of instances.
                                          </p>
                                          
                                          <div class="awsdocs-note">
                                             <div class="awsdocs-note-title">
                                                <awsui-icon name="status-info" variant="link"></awsui-icon><span>Note</span></div>
                                             <div class="awsdocs-note-text">
                                                <p>An update to this setting means a gradual replacement of instances to adjust the current
                                                   On-Demand Instance levels. When replacing instances, Amazon EC2 Auto Scaling launches
                                                   new
                                                   instances before terminating the old ones.
                                                </p>
                                             </div>
                                          </div>
                                          
                                          <p><em>Required</em>: No
                                          </p>
                                          <p><em>Type</em>: Integer
                                          </p>
                                          <p><em>Update requires</em>: <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-update-behaviors.html#update-some-interrupt">Some interruptions</a></p>
                                       </dd>
                                       <dt><a id="cfn-autoscaling-autoscalinggroup-instancesdistribution-ondemandpercentageabovebasecapacity"></a><span class="term"><code class="code">OnDemandPercentageAboveBaseCapacity</code></span></dt>
                                       <dd>
                                          
                                          <p>Controls the percentages of On-Demand Instances and Spot Instances for your additional
                                             capacity beyond <code class="code">OnDemandBaseCapacity</code>. Expressed as a number (for example, 20
                                             specifies 20% On-Demand Instances, 80% Spot Instances). Defaults to 100 if not specified.
                                             If
                                             set to 100, only On-Demand Instances are provisioned.
                                          </p>
                                          
                                          <div class="awsdocs-note">
                                             <div class="awsdocs-note-title">
                                                <awsui-icon name="status-info" variant="link"></awsui-icon><span>Note</span></div>
                                             <div class="awsdocs-note-text">
                                                <p>An update to this setting means a gradual replacement of instances to adjust the current
                                                   On-Demand and Spot Instance levels for your additional capacity above the base capacity.
                                                   When replacing instances, Amazon EC2 Auto Scaling launches new instances before terminating
                                                   the old ones.
                                                </p>
                                             </div>
                                          </div>
                                          
                                          <p><em>Required</em>: No
                                          </p>
                                          <p><em>Type</em>: Integer
                                          </p>
                                          <p><em>Update requires</em>: <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-update-behaviors.html#update-some-interrupt">Some interruptions</a></p>
                                       </dd>
                                       <dt><a id="cfn-autoscaling-autoscalinggroup-instancesdistribution-spotallocationstrategy"></a><span class="term"><code class="code">SpotAllocationStrategy</code></span></dt>
                                       <dd>
                                          
                                          <p>If the allocation strategy is <code class="code">lowest-price</code>, the Auto Scaling group launches
                                             instances using the Spot pools with the lowest price, and evenly allocates your instances
                                             across the number of Spot pools that you specify. Defaults to <code class="code">lowest-price</code> if not
                                             specified.
                                          </p>
                                          
                                          <p>If the allocation strategy is <code class="code">capacity-optimized</code> (recommended), the Auto
                                             Scaling group launches instances using Spot pools that are optimally chosen based
                                             on the
                                             available Spot capacity. Alternatively, you can use
                                             <code class="code">capacity-optimized-prioritized</code> and set the order of instance types in the list
                                             of launch template overrides from highest to lowest priority (from first to last in
                                             the list).
                                             Amazon EC2 Auto Scaling honors the instance type priorities on a best-effort basis
                                             but
                                             optimizes for capacity first. 
                                          </p>
                                          
                                          <p>Valid values: <code class="code">lowest-price</code> | <code class="code">capacity-optimized</code> |
                                             <code class="code">capacity-optimized-prioritized</code>
                                             
                                          </p>
                                          
                                          <p><em>Required</em>: No
                                          </p>
                                          <p><em>Type</em>: String
                                          </p>
                                          <p><em>Update requires</em>: <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-update-behaviors.html#update-no-interrupt">No interruption</a></p>
                                       </dd>
                                       <dt><a id="cfn-autoscaling-autoscalinggroup-instancesdistribution-spotinstancepools"></a><span class="term"><code class="code">SpotInstancePools</code></span></dt>
                                       <dd>
                                          
                                          <p>The number of Spot Instance pools to use to allocate your Spot capacity. The Spot
                                             pools
                                             are determined from the different instance types in the overrides. Valid only when
                                             the Spot
                                             allocation strategy is <code class="code">lowest-price</code>. Value must be in the range of 1 to 20.
                                             Defaults to 2 if not specified. 
                                          </p>
                                          
                                          <p><em>Required</em>: No
                                          </p>
                                          <p><em>Type</em>: Integer
                                          </p>
                                          <p><em>Update requires</em>: <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-update-behaviors.html#update-no-interrupt">No interruption</a></p>
                                       </dd>
                                       <dt><a id="cfn-autoscaling-autoscalinggroup-instancesdistribution-spotmaxprice"></a><span class="term"><code class="code">SpotMaxPrice</code></span></dt>
                                       <dd>
                                          
                                          <p>The maximum price per unit hour that you are willing to pay for a Spot Instance. If
                                             you
                                             leave the value at its default (empty), Amazon EC2 Auto Scaling uses the On-Demand
                                             price as
                                             the maximum Spot price. To remove a value that you previously set, include the property
                                             but
                                             specify an empty string (&quot;&quot;) for the value. 
                                          </p>
                                          
                                          <div class="awsdocs-note awsdocs-important">
                                             <div class="awsdocs-note-title">
                                                <awsui-icon name="status-warning" variant="error"></awsui-icon><span>Important</span></div>
                                             <div class="awsdocs-note-text">
                                                <p>If your maximum price is lower than the Spot price for the instance types that you
                                                   selected, your Spot Instances are not launched.
                                                </p>
                                             </div>
                                          </div>
                                          
                                          <p>Valid Range: Minimum value of 0.001</p>
                                          
                                          <p><em>Required</em>: No
                                          </p>
                                          <p><em>Type</em>: String
                                          </p>
                                          <p><em>Update requires</em>: <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-update-behaviors.html#update-no-interrupt">No interruption</a></p>
                                       </dd>
                                    </dl>
                                 </div>
                                 <awsdocs-copyright class="copyright-print"></awsdocs-copyright>
                                 <awsdocs-thumb-feedback right-edge="{{$ctrl.thumbFeedbackRightEdge}}"></awsdocs-thumb-feedback>
                              </div>
                              <noscript>
                                 <div>
                                    <div>
                                       <div>
                                          <div id="js_error_message">
                                             <p><img src="https://d1ge0kk1l5kms0.cloudfront.net/images/G/01/webservices/console/warning.png" alt="Warning"> <strong>Javascript is disabled or is unavailable in your
                                                   browser.</strong></p>
                                             <p>To use the Amazon Web Services Documentation, Javascript must be
                                                enabled. Please refer to your browser&apos;s Help pages for instructions.
                                             </p>
                                          </div>
                                       </div>
                                    </div>
                                 </div>
                              </noscript>
                              
                              <awsdocs-page-utilities></awsdocs-page-utilities>
                           </div></div>
</body>
</html>