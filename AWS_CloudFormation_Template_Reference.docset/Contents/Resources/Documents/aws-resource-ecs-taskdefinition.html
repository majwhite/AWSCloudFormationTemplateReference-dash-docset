<!DOCTYPE html>
<html>
<head>
    <link href="css/awsdocs.css" rel="stylesheet" type="text/css">
    <script type="text/javascript" src="js/jquery.min.js"></script>
    <script type="text/javascript" src="js/awsdocs.min.js"></script>
    <meta charset="utf-8">
</head>
<body>
    <div id="content" style="padding: 10px 30px;">
    <div id="main-content" class="awsui-util-container">
                              <div id="main-col-body">
                                 <awsdocs-language-banner data-service="$ctrl.pageService"></awsdocs-language-banner>
                                 <h1 class="topictitle" id="aws-resource-ecs-taskdefinition">AWS::ECS::TaskDefinition</h1>
                                 <div class="awsdocs-page-header-container">
                                    <awsdocs-page-header></awsdocs-page-header>
                                    <awsdocs-filter-selector id="awsdocs-filter-selector"></awsdocs-filter-selector>
                                 </div>
                                 <p>The <code class="code">AWS::ECS::TaskDefinition</code> resource describes the container and volume
                                    definitions of an Amazon Elastic Container Service (Amazon ECS) task. You can specify
                                    which Docker images to use, the required resources, and other configurations related
                                    to
                                    launching the task definition through an Amazon ECS service or task.
                                 </p>
                                 <h2 id="aws-resource-ecs-taskdefinition-syntax">Syntax</h2>
                                 <p>To declare this entity in your AWS CloudFormation template, use the following syntax:</p>
                                 <div id="JSON" name="JSON" class="section langfilter">
                                    <h3 id="aws-resource-ecs-taskdefinition-syntax.json">JSON</h3><pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="json "><span>{</span>
  &quot;Type&quot; : &quot;AWS::ECS::TaskDefinition&quot;,
  &quot;Properties&quot; : <span>{</span>
      &quot;<a href="#cfn-ecs-taskdefinition-containerdefinitions">ContainerDefinitions</a>&quot; : <code class="replaceable">[ <a href="./aws-properties-ecs-taskdefinition-containerdefinitions.html">ContainerDefinition</a>, ... ]</code>,
      &quot;<a href="#cfn-ecs-taskdefinition-cpu">Cpu</a>&quot; : <code class="replaceable">String</code>,
      &quot;<a href="#cfn-ecs-taskdefinition-executionrolearn">ExecutionRoleArn</a>&quot; : <code class="replaceable">String</code>,
      &quot;<a href="#cfn-ecs-taskdefinition-family">Family</a>&quot; : <code class="replaceable">String</code>,
      &quot;<a href="#cfn-ecs-taskdefinition-inferenceaccelerators">InferenceAccelerators</a>&quot; : <code class="replaceable">[ <a href="./aws-properties-ecs-taskdefinition-inferenceaccelerator.html">InferenceAccelerator</a>, ... ]</code>,
      &quot;<a href="#cfn-ecs-taskdefinition-ipcmode">IpcMode</a>&quot; : <code class="replaceable">String</code>,
      &quot;<a href="#cfn-ecs-taskdefinition-memory">Memory</a>&quot; : <code class="replaceable">String</code>,
      &quot;<a href="#cfn-ecs-taskdefinition-networkmode">NetworkMode</a>&quot; : <code class="replaceable">String</code>,
      &quot;<a href="#cfn-ecs-taskdefinition-pidmode">PidMode</a>&quot; : <code class="replaceable">String</code>,
      &quot;<a href="#cfn-ecs-taskdefinition-placementconstraints">PlacementConstraints</a>&quot; : <code class="replaceable">[ <a href="./aws-properties-ecs-taskdefinition-taskdefinitionplacementconstraint.html">TaskDefinitionPlacementConstraint</a>, ... ]</code>,
      &quot;<a href="#cfn-ecs-taskdefinition-proxyconfiguration">ProxyConfiguration</a>&quot; : <code class="replaceable"><a href="./aws-properties-ecs-taskdefinition-proxyconfiguration.html">ProxyConfiguration</a></code>,
      &quot;<a href="#cfn-ecs-taskdefinition-requirescompatibilities">RequiresCompatibilities</a>&quot; : <code class="replaceable">[ String, ... ]</code>,
      &quot;<a href="#cfn-ecs-taskdefinition-tags">Tags</a>&quot; : <code class="replaceable">[ <a href="aws-properties-resource-tags.html">Tag</a>, ... ]</code>,
      &quot;<a href="#cfn-ecs-taskdefinition-taskrolearn">TaskRoleArn</a>&quot; : <code class="replaceable">String</code>,
      &quot;<a href="#cfn-ecs-taskdefinition-volumes">Volumes</a>&quot; : <code class="replaceable">[ <a href="./aws-properties-ecs-taskdefinition-volumes.html">Volume</a>, ... ]</code>
    }
}
</code></pre></div>
                                 <div id="YAML" name="YAML" class="section langfilter">
                                    <h3 id="aws-resource-ecs-taskdefinition-syntax.yaml">YAML</h3><pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="yaml ">Type: AWS::ECS::TaskDefinition
Properties: 
  <a href="#cfn-ecs-taskdefinition-containerdefinitions">ContainerDefinitions</a>: <code class="replaceable">
    - <a href="./aws-properties-ecs-taskdefinition-containerdefinitions.html">ContainerDefinition</a></code>
  <a href="#cfn-ecs-taskdefinition-cpu">Cpu</a>: <code class="replaceable">String</code>
  <a href="#cfn-ecs-taskdefinition-executionrolearn">ExecutionRoleArn</a>: <code class="replaceable">String</code>
  <a href="#cfn-ecs-taskdefinition-family">Family</a>: <code class="replaceable">String</code>
  <a href="#cfn-ecs-taskdefinition-inferenceaccelerators">InferenceAccelerators</a>: <code class="replaceable">
    - <a href="./aws-properties-ecs-taskdefinition-inferenceaccelerator.html">InferenceAccelerator</a></code>
  <a href="#cfn-ecs-taskdefinition-ipcmode">IpcMode</a>: <code class="replaceable">String</code>
  <a href="#cfn-ecs-taskdefinition-memory">Memory</a>: <code class="replaceable">String</code>
  <a href="#cfn-ecs-taskdefinition-networkmode">NetworkMode</a>: <code class="replaceable">String</code>
  <a href="#cfn-ecs-taskdefinition-pidmode">PidMode</a>: <code class="replaceable">String</code>
  <a href="#cfn-ecs-taskdefinition-placementconstraints">PlacementConstraints</a>: <code class="replaceable">
    - <a href="./aws-properties-ecs-taskdefinition-taskdefinitionplacementconstraint.html">TaskDefinitionPlacementConstraint</a></code>
  <a href="#cfn-ecs-taskdefinition-proxyconfiguration">ProxyConfiguration</a>: <code class="replaceable">
    <a href="./aws-properties-ecs-taskdefinition-proxyconfiguration.html">ProxyConfiguration</a></code>
  <a href="#cfn-ecs-taskdefinition-requirescompatibilities">RequiresCompatibilities</a>: <code class="replaceable">
    - String</code>
  <a href="#cfn-ecs-taskdefinition-tags">Tags</a>: <code class="replaceable">
    - <a href="aws-properties-resource-tags.html">Tag</a></code>
  <a href="#cfn-ecs-taskdefinition-taskrolearn">TaskRoleArn</a>: <code class="replaceable">String</code>
  <a href="#cfn-ecs-taskdefinition-volumes">Volumes</a>: <code class="replaceable">
    - <a href="./aws-properties-ecs-taskdefinition-volumes.html">Volume</a></code>
</code></pre></div>
                                 <h2 id="aws-resource-ecs-taskdefinition-properties">Properties</h2>
                                 <div class="variablelist">
                                    <dl>
                                       <dt><a id="cfn-ecs-taskdefinition-containerdefinitions"></a><span class="term"><code class="code">ContainerDefinitions</code></span></dt>
                                       <dd>
                                          		       
                                          <p>A list of container definitions in JSON format that describe the different containers
                                             			that make up your task. For more information about container definition parameters
                                             and
                                             			defaults, see <a href="https://docs.aws.amazon.com/AmazonECS/latest/developerguide/task_defintions.html">Amazon ECS Task
                                                				Definitions</a> in the <em>Amazon Elastic Container Service Developer Guide</em>.
                                          </p>
                                          	     
                                          <p><em>Required</em>: No
                                          </p>
                                          <p><em>Type</em>: List of <a href="./aws-properties-ecs-taskdefinition-containerdefinitions.html">ContainerDefinition</a></p>
                                          <p><em>Update requires</em>: <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-update-behaviors.html#update-replacement">Replacement</a></p>
                                       </dd>
                                       <dt><a id="cfn-ecs-taskdefinition-cpu"></a><span class="term"><code class="code">Cpu</code></span></dt>
                                       <dd>
                                          		       
                                          <p>The number of <code class="code">cpu</code> units used by the task. If you are using the EC2 launch
                                             			type, this field is optional and any value can be used. If you are using the Fargate
                                             			launch type, this field is required and you must use one of the following values,
                                             which
                                             			determines your range of valid values for the <code class="code">memory</code> parameter:
                                          </p>
                                          		       
                                          <div class="itemizedlist">
                                              
                                              
                                              
                                              
                                              
                                             
                                             <ul class="itemizedlist" type="disc">
                                                <li class="listitem">
                                                   
                                                   <p>256 (.25 vCPU) - Available <code class="code">memory</code> values: 512 (0.5 GB), 1024 (1 GB), 2048 (2 GB)
                                                   </p>
                                                   
                                                </li>
                                                <li class="listitem">
                                                   
                                                   <p>512 (.5 vCPU) - Available <code class="code">memory</code> values: 1024 (1 GB), 2048 (2 GB), 3072 (3 GB), 4096 (4 GB)
                                                   </p>
                                                   
                                                </li>
                                                <li class="listitem">
                                                   
                                                   <p>1024 (1 vCPU) - Available <code class="code">memory</code> values: 2048 (2 GB), 3072 (3 GB), 4096 (4 GB), 5120 (5 GB), 6144 (6 GB), 7168 (7
                                                      GB), 8192 (8 GB)
                                                   </p>
                                                   
                                                </li>
                                                <li class="listitem">
                                                   
                                                   <p>2048 (2 vCPU) - Available <code class="code">memory</code> values: Between 4096 (4 GB) and 16384 (16 GB) in increments of 1024 (1 GB)
                                                   </p>
                                                   
                                                </li>
                                                <li class="listitem">
                                                   
                                                   <p>4096 (4 vCPU) - Available <code class="code">memory</code> values: Between 8192 (8 GB) and 30720 (30 GB) in increments of 1024 (1 GB)
                                                   </p>
                                                   
                                                </li>
                                             </ul>
                                          </div> 
                                          
                                          <p><em>Required</em>: No
                                          </p>
                                          <p><em>Type</em>: String
                                          </p>
                                          <p><em>Update requires</em>: <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-update-behaviors.html#update-replacement">Replacement</a></p>
                                       </dd>
                                       <dt><a id="cfn-ecs-taskdefinition-executionrolearn"></a><span class="term"><code class="code">ExecutionRoleArn</code></span></dt>
                                       <dd>
                                          
                                          <p>The Amazon Resource Name (ARN) of the task execution role that grants the Amazon ECS
                                             container agent
                                             permission to make AWS API calls on your behalf. The task execution IAM role is required
                                             depending on the requirements of your task. For more information, see <a href="https://docs.aws.amazon.com/AmazonECS/latest/developerguide/task_execution_IAM_role.html">Amazon ECS task
                                                execution IAM role</a> in the <em>Amazon Elastic Container Service Developer Guide</em>.
                                          </p>
                                          
                                          <p><em>Required</em>: No
                                          </p>
                                          <p><em>Type</em>: String
                                          </p>
                                          <p><em>Update requires</em>: <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-update-behaviors.html#update-replacement">Replacement</a></p>
                                       </dd>
                                       <dt><a id="cfn-ecs-taskdefinition-family"></a><span class="term"><code class="code">Family</code></span></dt>
                                       <dd>
                                          
                                          <p>The name of a family that this task definition is registered to. Up to 255 letters
                                             (uppercase and lowercase), numbers, hyphens, and underscores are allowed.
                                          </p>
                                          
                                          <p>A family groups multiple versions of a task definition. Amazon ECS gives the first
                                             task definition that you registered to a family a revision number of 1. Amazon ECS
                                             gives
                                             sequential revision numbers to each task definition that you add.
                                          </p>
                                          
                                          <div class="awsdocs-note">
                                             <div class="awsdocs-note-title">
                                                <awsui-icon name="status-info" variant="link"></awsui-icon><span>Note</span></div>
                                             <div class="awsdocs-note-text">
                                                <p>To use revision numbers when you update a task definition, specify this property.
                                                   If you don&apos;t specify a value, AWS CloudFormation generates a new task definition
                                                   each time that you update it.
                                                </p>
                                             </div>
                                          </div>
                                          
                                          <p><em>Required</em>: No
                                          </p>
                                          <p><em>Type</em>: String
                                          </p>
                                          <p><em>Update requires</em>: <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-update-behaviors.html#update-replacement">Replacement</a></p>
                                       </dd>
                                       <dt><a id="cfn-ecs-taskdefinition-inferenceaccelerators"></a><span class="term"><code class="code">InferenceAccelerators</code></span></dt>
                                       <dd>
                                          		       
                                          <p>The Elastic Inference accelerators to use for the containers in the task.</p>
                                          	     
                                          <p><em>Required</em>: No
                                          </p>
                                          <p><em>Type</em>: List of <a href="./aws-properties-ecs-taskdefinition-inferenceaccelerator.html">InferenceAccelerator</a></p>
                                          <p><em>Update requires</em>: <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-update-behaviors.html#update-replacement">Replacement</a></p>
                                       </dd>
                                       <dt><a id="cfn-ecs-taskdefinition-ipcmode"></a><span class="term"><code class="code">IpcMode</code></span></dt>
                                       <dd> 
                                          
                                          <p>The IPC resource namespace to use for the containers in the task. The valid values
                                             are
                                             <code class="code">host</code>, <code class="code">task</code>, or <code class="code">none</code>. If <code class="code">host</code> is
                                             specified, then all containers within the tasks that specified the <code class="code">host</code> IPC
                                             mode on the same container instance share the same IPC resources with the host Amazon
                                             EC2
                                             instance. If <code class="code">task</code> is specified, all containers within the specified task
                                             share the same IPC resources. If <code class="code">none</code> is specified, then IPC resources
                                             within the containers of a task are private and not shared with other containers in
                                             a
                                             task or on the container instance. If no value is specified, then the IPC resource
                                             namespace sharing depends on the Docker daemon setting on the container instance.
                                             For
                                             more information, see <a href="https://docs.docker.com/engine/reference/run/#ipc-settings---ipc" rel="noopener noreferrer" target="_blank"><span>IPC
                                                   settings</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a> in the <em>Docker run reference</em>.
                                          </p>
                                          
                                          <p>If the <code class="code">host</code> IPC mode is used, be aware that there is a heightened risk of
                                             undesired IPC namespace expose. For more information, see <a href="https://docs.docker.com/engine/security/security/" rel="noopener noreferrer" target="_blank"><span>Docker
                                                   security</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a>.
                                          </p>
                                          
                                          <p>If you are setting namespaced kernel parameters using <code class="code">systemControls</code> for
                                             the containers in the task, the following will apply to your IPC resource namespace.
                                             For
                                             more information, see <a href="https://docs.aws.amazon.com/AmazonECS/latest/developerguide/task_definition_parameters.html">System
                                                Controls</a> in the <em>Amazon Elastic Container Service Developer Guide</em>.
                                          </p>
                                          
                                          <div class="itemizedlist">
                                              
                                              
                                             
                                             <ul class="itemizedlist" type="disc">
                                                <li class="listitem">
                                                   
                                                   <p>For tasks that use the <code class="code">host</code> IPC mode, IPC namespace related
                                                      <code class="code">systemControls</code> are not supported.
                                                   </p>
                                                   
                                                </li>
                                                <li class="listitem">
                                                   
                                                   <p>For tasks that use the <code class="code">task</code> IPC mode, IPC namespace related
                                                      <code class="code">systemControls</code> will apply to all containers within a
                                                      task.
                                                   </p>
                                                   
                                                </li>
                                             </ul>
                                          </div> 
                                          
                                          <div class="awsdocs-note">
                                             <div class="awsdocs-note-title">
                                                <awsui-icon name="status-info" variant="link"></awsui-icon><span>Note</span></div>
                                             <div class="awsdocs-note-text">
                                                <p>This parameter is not supported for Windows containers or tasks using the Fargate
                                                   launch type.
                                                </p>
                                             </div>
                                          </div> 
                                          
                                          <p><em>Required</em>: No
                                          </p>
                                          <p><em>Type</em>: String
                                          </p>
                                          <p><em>Allowed values</em>: <code class="code">host | none | task</code></p>
                                          <p><em>Update requires</em>: <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-update-behaviors.html#update-replacement">Replacement</a></p>
                                       </dd>
                                       <dt><a id="cfn-ecs-taskdefinition-memory"></a><span class="term"><code class="code">Memory</code></span></dt>
                                       <dd>
                                          		       
                                          <p>The amount (in MiB) of memory used by the task.</p>
                                          		       
                                          <p>If using the EC2 launch type, you must specify either a task-level
                                             			memory value or a container-level memory value. This field is optional and any
                                             value can
                                             			be used. If a task-level memory value is specified then the container-level memory
                                             value
                                             			is optional. For more information regarding container-level memory and memory
                                             			reservation, see <a href="https://docs.aws.amazon.com/AmazonECS/latest/APIReference/API_ContainerDefinition.html">ContainerDefinition</a>.
                                          </p>
                                          		       
                                          <p>If using the Fargate launch type, this field is required and you must
                                             			use one of the following values, which determines your range of valid values for
                                             the
                                             				<code class="code">cpu</code> parameter:
                                          </p> 
                                          
                                          <div class="itemizedlist">
                                              
                                              
                                              
                                              
                                              
                                             
                                             <ul class="itemizedlist" type="disc">
                                                <li class="listitem">
                                                   
                                                   <p>512 (0.5 GB), 1024 (1 GB), 2048 (2 GB) - Available <code class="code">cpu</code> values: 256 (.25 vCPU)
                                                   </p>
                                                   
                                                </li>
                                                <li class="listitem">
                                                   
                                                   <p>1024 (1 GB), 2048 (2 GB), 3072 (3 GB), 4096 (4 GB) - Available <code class="code">cpu</code> values: 512 (.5 vCPU)
                                                   </p>
                                                   
                                                </li>
                                                <li class="listitem">
                                                   
                                                   <p>2048 (2 GB), 3072 (3 GB), 4096 (4 GB), 5120 (5 GB), 6144 (6 GB), 7168 (7 GB), 8192
                                                      (8 GB) - Available <code class="code">cpu</code> values: 1024 (1 vCPU)
                                                   </p>
                                                   
                                                </li>
                                                <li class="listitem">
                                                   
                                                   <p>Between 4096 (4 GB) and 16384 (16 GB) in increments of 1024 (1 GB) - Available <code class="code">cpu</code> values: 2048 (2 vCPU)
                                                   </p>
                                                   
                                                </li>
                                                <li class="listitem">
                                                   
                                                   <p>Between 8192 (8 GB) and 30720 (30 GB) in increments of 1024 (1 GB) - Available <code class="code">cpu</code> values: 4096 (4 vCPU)
                                                   </p>
                                                   
                                                </li>
                                             </ul>
                                          </div> 
                                          
                                          <p><em>Required</em>: No
                                          </p>
                                          <p><em>Type</em>: String
                                          </p>
                                          <p><em>Update requires</em>: <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-update-behaviors.html#update-replacement">Replacement</a></p>
                                       </dd>
                                       <dt><a id="cfn-ecs-taskdefinition-networkmode"></a><span class="term"><code class="code">NetworkMode</code></span></dt>
                                       <dd>
                                          
                                          <p>The Docker networking mode to use for the containers in the task. The valid values
                                             are
                                             <code class="code">none</code>, <code class="code">bridge</code>, <code class="code">awsvpc</code>, and <code class="code">host</code>.
                                             The default Docker network mode is <code class="code">bridge</code>. If you are using the Fargate
                                             launch type, the <code class="code">awsvpc</code> network mode is required. If you are using the EC2
                                             launch type, any network mode can be used. If the network mode is set to
                                             <code class="code">none</code>, you cannot specify port mappings in your container definitions,
                                             and the tasks containers do not have external connectivity. The <code class="code">host</code> and
                                             <code class="code">awsvpc</code> network modes offer the highest networking performance for
                                             containers because they use the EC2 network stack instead of the virtualized network
                                             stack provided by the <code class="code">bridge</code> mode.
                                          </p>
                                          
                                          <p>With the <code class="code">host</code> and <code class="code">awsvpc</code> network modes, exposed container
                                             ports are mapped directly to the corresponding host port (for the <code class="code">host</code>
                                             network mode) or the attached elastic network interface port (for the
                                             <code class="code">awsvpc</code> network mode), so you cannot take advantage of dynamic host port
                                             mappings. 
                                          </p>
                                          
                                          <p>If the network mode is <code class="code">awsvpc</code>, the task is allocated an elastic network
                                             interface, and you must specify a <a href="https://docs.aws.amazon.com/AmazonECS/latest/APIReference/API_NetworkConfiguration.html">NetworkConfiguration</a> value when you create a service or run a task with the
                                             task definition. For more information, see <a href="https://docs.aws.amazon.com/AmazonECS/latest/developerguide/task-networking.html">Task Networking</a>
                                             in the <em>Amazon Elastic Container Service Developer Guide</em>.
                                          </p>
                                          
                                          <div class="awsdocs-note">
                                             <div class="awsdocs-note-title">
                                                <awsui-icon name="status-info" variant="link"></awsui-icon><span>Note</span></div>
                                             <div class="awsdocs-note-text">
                                                <p>Currently, only Amazon ECS-optimized AMIs, other Amazon Linux variants with the
                                                   <code class="code">ecs-init</code> package, or AWS Fargate infrastructure support the
                                                   <code class="code">awsvpc</code> network mode. 
                                                </p>
                                             </div>
                                          </div>
                                          
                                          <p>If the network mode is <code class="code">host</code>, you cannot run multiple instantiations of
                                             the same task on a single container instance when port mappings are used.
                                          </p>
                                          
                                          <p>Docker for Windows uses different network modes than Docker for Linux. When you
                                             register a task definition with Windows containers, you must not specify a network
                                             mode.
                                             If you use the console to register a task definition with Windows containers, you
                                             must
                                             choose the <code class="code">&lt;default&gt;</code> network mode object. 
                                          </p>
                                          
                                          <p>For more information, see <a href="https://docs.docker.com/engine/reference/run/#network-settings" rel="noopener noreferrer" target="_blank"><span>Network
                                                   settings</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a> in the <em>Docker run reference</em>.
                                          </p>
                                          
                                          <p><em>Required</em>: No
                                          </p>
                                          <p><em>Type</em>: String
                                          </p>
                                          <p><em>Allowed values</em>: <code class="code">awsvpc | bridge | host | none</code></p>
                                          <p><em>Update requires</em>: <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-update-behaviors.html#update-replacement">Replacement</a></p>
                                       </dd>
                                       <dt><a id="cfn-ecs-taskdefinition-pidmode"></a><span class="term"><code class="code">PidMode</code></span></dt>
                                       <dd> 
                                          
                                          <p>The process namespace to use for the containers in the task. The valid
                                             values are <code class="code">host</code> or <code class="code">task</code>. If <code class="code">host</code>
                                             is specified, then all containers within the tasks that specified the
                                             <code class="code">host</code> PID mode on the same container instance share the
                                             same process namespace with the host Amazon EC2 instance. If <code class="code">task</code> is
                                             specified, all containers within the specified task share the same
                                             process namespace. If no value is specified, the default is a private
                                             namespace. For more information, see <a href="https://docs.docker.com/engine/reference/run/#pid-settings---pid" rel="noopener noreferrer" target="_blank"><span>PID settings</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a> in the <em>Docker run
                                                reference</em>.
                                          </p>
                                          
                                          <p>If the <code class="code">host</code> PID mode is used, be aware that there is a
                                             heightened risk of undesired process namespace expose. For more
                                             information, see <a href="https://docs.docker.com/engine/security/security/" rel="noopener noreferrer" target="_blank"><span>Docker
                                                   security</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a>.
                                          </p> 
                                          
                                          <div class="awsdocs-note">
                                             <div class="awsdocs-note-title">
                                                <awsui-icon name="status-info" variant="link"></awsui-icon><span>Note</span></div>
                                             <div class="awsdocs-note-text">
                                                <p>This parameter is not supported for Windows containers or tasks using the Fargate
                                                   launch type.
                                                </p>
                                             </div>
                                          </div> 
                                          
                                          <p><em>Required</em>: No
                                          </p>
                                          <p><em>Type</em>: String
                                          </p>
                                          <p><em>Allowed values</em>: <code class="code">host | task</code></p>
                                          <p><em>Update requires</em>: <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-update-behaviors.html#update-replacement">Replacement</a></p>
                                       </dd>
                                       <dt><a id="cfn-ecs-taskdefinition-placementconstraints"></a><span class="term"><code class="code">PlacementConstraints</code></span></dt>
                                       <dd>
                                          		       
                                          <p>An array of placement constraint objects to use for tasks. This field is not valid
                                             if
                                             			you are using the Fargate launch type for your task.
                                          </p>
                                          	     
                                          <p><em>Required</em>: No
                                          </p>
                                          <p><em>Type</em>: List of <a href="./aws-properties-ecs-taskdefinition-taskdefinitionplacementconstraint.html">TaskDefinitionPlacementConstraint</a></p>
                                          <p><em>Update requires</em>: <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-update-behaviors.html#update-replacement">Replacement</a></p>
                                       </dd>
                                       <dt><a id="cfn-ecs-taskdefinition-proxyconfiguration"></a><span class="term"><code class="code">ProxyConfiguration</code></span></dt>
                                       <dd>
                                          
                                          <p>The <code class="code">ProxyConfiguration</code> property specifies the configuration details for
                                             the App Mesh proxy.
                                          </p>
                                          
                                          <p>Your Amazon ECS container instances require at least version 1.26.0 of the container
                                             agent and at least version 1.26.0-1 of the <code class="code">ecs-init</code> package to enable a
                                             proxy configuration. If your container instances are launched from the Amazon
                                             ECS-optimized AMI version <code class="code">20190301</code> or later, then they contain the required
                                             versions of the container agent and <code class="code">ecs-init</code>. For more information, see
                                             <a href="https://docs.aws.amazon.com/AmazonECS/latest/developerguide/ecs-optimized_AMI.html">Amazon ECS-optimized
                                                Linux AMI</a> in the <em>Amazon Elastic Container Service Developer
                                                Guide</em>.
                                          </p>
                                          
                                          <p><em>Required</em>: No
                                          </p>
                                          <p><em>Type</em>: <a href="./aws-properties-ecs-taskdefinition-proxyconfiguration.html">ProxyConfiguration</a></p>
                                          <p><em>Update requires</em>: <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-update-behaviors.html#update-replacement">Replacement</a></p>
                                       </dd>
                                       <dt><a id="cfn-ecs-taskdefinition-requirescompatibilities"></a><span class="term"><code class="code">RequiresCompatibilities</code></span></dt>
                                       <dd>
                                          		       
                                          <p>The launch type the task requires. If no value is specified, it will default to
                                             				<code class="code">EC2</code>. Valid values include <code class="code">EC2</code> and
                                             			<code class="code">FARGATE</code>.
                                          </p>
                                          	     
                                          <p><em>Required</em>: No
                                          </p>
                                          <p><em>Type</em>: List of String
                                          </p>
                                          <p><em>Update requires</em>: <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-update-behaviors.html#update-replacement">Replacement</a></p>
                                       </dd>
                                       <dt><a id="cfn-ecs-taskdefinition-tags"></a><span class="term"><code class="code">Tags</code></span></dt>
                                       <dd>
                                          		       
                                          <p>The metadata that you apply to the task definition to help you categorize and organize
                                             			them. Each tag consists of a key and an optional value, both of which you define.
                                          </p>
                                          		       
                                          <p>The following basic restrictions apply to tags:</p>
                                          
                                          <div class="itemizedlist">
                                              
                                              
                                              
                                              
                                              
                                              
                                              
                                             
                                             <ul class="itemizedlist" type="disc">
                                                <li class="listitem">
                                                   
                                                   <p>Maximum number of tags per resource - 50</p>
                                                   
                                                </li>
                                                <li class="listitem">
                                                   
                                                   <p>For each resource, each tag key must be unique, and each tag key can have only
                                                      one value.
                                                   </p>
                                                   
                                                </li>
                                                <li class="listitem">
                                                   
                                                   <p>Maximum key length - 128 Unicode characters in UTF-8</p>
                                                   
                                                </li>
                                                <li class="listitem">
                                                   
                                                   <p>Maximum value length - 256 Unicode characters in UTF-8</p>
                                                   
                                                </li>
                                                <li class="listitem">
                                                   
                                                   <p>If your tagging schema is used across multiple services and resources,
                                                      remember that other services may have restrictions on allowed characters.
                                                      Generally allowed characters are: letters, numbers, and spaces representable in
                                                      UTF-8, and the following characters: + - = . _ : / @.
                                                   </p>
                                                   
                                                </li>
                                                <li class="listitem">
                                                   
                                                   <p>Tag keys and values are case-sensitive.</p>
                                                   
                                                </li>
                                                <li class="listitem">
                                                   
                                                   <p>Do not use <code class="code">aws:</code>, <code class="code">AWS:</code>, or any upper or lowercase
                                                      combination of such as a prefix for either keys or values as it is reserved for
                                                      AWS use. You cannot edit or delete tag keys or values with this prefix. Tags with
                                                      this prefix do not count against your tags per resource limit.
                                                   </p>
                                                   
                                                </li>
                                             </ul>
                                          </div> 
                                          
                                          <p><em>Required</em>: No
                                          </p>
                                          <p><em>Type</em>: List of <a href="aws-properties-resource-tags.html">Tag</a></p>
                                          <p><em>Maximum</em>: <code class="code">50</code></p>
                                          <p><em>Update requires</em>: <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-update-behaviors.html#update-no-interrupt">No interruption</a></p>
                                       </dd>
                                       <dt><a id="cfn-ecs-taskdefinition-taskrolearn"></a><span class="term"><code class="code">TaskRoleArn</code></span></dt>
                                       <dd>
                                          		       
                                          <p>The short name or full Amazon Resource Name (ARN) of the AWS Identity and Access Management
                                             (IAM) role that grants containers in the
                                             			task permission to call AWS APIs on your behalf. For more information, see <a href="https://docs.aws.amazon.com/AmazonECS/latest/developerguide/task-iam-roles.html">Amazon ECS
                                                				Task Role</a> in the <em>Amazon Elastic Container Service Developer Guide</em>.
                                          </p>
                                          		       
                                          <p>IAM roles for tasks on Windows require that the <code class="code">-EnableTaskIAMRole</code> option
                                             			is set when you launch the Amazon ECS-optimized Windows AMI. Your containers must
                                             also run some
                                             			configuration code in order to take advantage of the feature. For more information,
                                             see
                                             				<a href="https://docs.aws.amazon.com/AmazonECS/latest/developerguide/windows_task_IAM_roles.html">Windows IAM Roles
                                                				for Tasks</a> in the <em>Amazon Elastic Container Service Developer Guide</em>.
                                          </p>
                                          	     
                                          <p><em>Required</em>: No
                                          </p>
                                          <p><em>Type</em>: String
                                          </p>
                                          <p><em>Update requires</em>: <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-update-behaviors.html#update-replacement">Replacement</a></p>
                                       </dd>
                                       <dt><a id="cfn-ecs-taskdefinition-volumes"></a><span class="term"><code class="code">Volumes</code></span></dt>
                                       <dd>
                                          		       
                                          <p>The list of volume definitions for the task.</p>
                                          		       
                                          <p>If your tasks are using the Fargate launch type, the <code class="code">host</code>
                                             			and <code class="code">sourcePath</code> parameters are not supported.
                                          </p>
                                          		       
                                          <p>For more information about volume definition parameters and defaults, see <a href="https://docs.aws.amazon.com/AmazonECS/latest/developerguide/task_definitions.html">Amazon ECS Task Definitions</a> in the <em>Amazon Elastic Container Service Developer Guide</em>.
                                          </p>
                                          	     
                                          <p><em>Required</em>: No
                                          </p>
                                          <p><em>Type</em>: List of <a href="./aws-properties-ecs-taskdefinition-volumes.html">Volume</a></p>
                                          <p><em>Update requires</em>: <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-update-behaviors.html#update-replacement">Replacement</a></p>
                                       </dd>
                                    </dl>
                                 </div>
                                 <h2 id="aws-resource-ecs-taskdefinition-return-values">Return values</h2>
                                 <h3 id="aws-resource-ecs-taskdefinition-return-values-ref">Ref</h3>
                                 <p>
                                    When you pass the logical ID of this resource to the intrinsic <code class="code">Ref</code> function, <code class="code">Ref</code> returns the Amazon Resource Name (ARN).
                                 </p>
                                 <p>In the following example, the <code class="code">Ref</code> function returns the ARN of the
                                    <code class="code">MyTaskDefinition</code> task definition, such as
                                    <code class="code">arn:aws:ecs:us-west-2:123456789012:task-definition/TaskDefinitionFamily:1</code>.
                                 </p>
                                 <p>
                                    <code class="code"><span>{</span> &quot;Ref&quot;: &quot;MyTaskDefinition&quot; }</code>
                                    
                                 </p>
                                 <p>For more information about using the <code class="code">Ref</code> function, see <a href="intrinsic-function-reference-ref.html">Ref</a>.
                                 </p>
                                 <h3 id="aws-resource-ecs-taskdefinition-return-values-fn--getatt">Fn::GetAtt</h3>
                                 <h4 id="aws-resource-ecs-taskdefinition-return-values-fn--getatt-fn--getatt"></h4>
                                 <div class="variablelist">
                                    <dl>
                                       <dt><a id="TaskDefinitionArn-fn::getatt"></a><span class="term"><code class="code">TaskDefinitionArn</code></span></dt>
                                       <dd>
                                          <p>Not currently supported by AWS CloudFormation.</p>
                                       </dd>
                                    </dl>
                                 </div>
                                 <h2 id="aws-resource-ecs-taskdefinition--examples">Examples</h2>
                                 <p></p>
                                 <h3 id="aws-resource-ecs-taskdefinition--examples--Create_an_Amazon_ECS_task_definition">Create an Amazon ECS task definition</h3>
                                 <p>The following example defines an Amazon ECS task definition, which includes
                                    two container definitions and one volume definition.
                                 </p>
                                 <div id="JSON" name="JSON" class="section langfilter">
                                    <h4 id="aws-resource-ecs-taskdefinition--examples--Create_an_Amazon_ECS_task_definition--json">JSON</h4><pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="json ">&quot;taskdefinition&quot;: <span>{</span>
  &quot;Type&quot;: &quot;AWS::ECS::TaskDefinition&quot;,
  &quot;Properties&quot; : <span>{</span>
    &quot;ContainerDefinitions&quot; : [
    <span>{</span>
      &quot;Name&quot;: <span>{</span>&quot;Ref&quot;: &quot;AppName&quot;},
      &quot;MountPoints&quot;: [
        <span>{</span>
          &quot;SourceVolume&quot;: &quot;my-vol&quot;,
          &quot;ContainerPath&quot;: &quot;/var/www/my-vol&quot;
        }
      ],
      &quot;Image&quot;:&quot;amazon/amazon-ecs-sample&quot;,
      &quot;Cpu&quot;: 256,
      &quot;PortMappings&quot;:[
        <span>{</span>
          &quot;ContainerPort&quot;: <span>{</span>&quot;Ref&quot;:&quot;AppContainerPort&quot;},
          &quot;HostPort&quot;: <span>{</span>&quot;Ref&quot;:&quot;AppHostPort&quot;}
        }
      ],
      &quot;EntryPoint&quot;: [
        &quot;/usr/sbin/apache2&quot;,
        &quot;-D&quot;,
        &quot;FOREGROUND&quot;
      ],
      &quot;Memory&quot;: 512,
      &quot;Essential&quot;: true
    },
    <span>{</span>
      &quot;Name&quot;: &quot;busybox&quot;,
      &quot;Image&quot;: &quot;busybox&quot;,
      &quot;Cpu&quot;: 256,
      &quot;EntryPoint&quot;: [
        &quot;sh&quot;,
        &quot;-c&quot;
      ],
      &quot;Memory&quot;: 512,
      &quot;Command&quot;: [
        &quot;/bin/sh -c \&quot;while true; do /bin/date &gt; /var/www/my-vol/date; sleep 1; done\&quot;&quot;
      ],
      &quot;Essential&quot; : false,
      &quot;VolumesFrom&quot;: [
        <span>{</span>
          &quot;SourceContainer&quot;: <span>{</span>&quot;Ref&quot;:&quot;AppName&quot;}
        }
      ]
    }],
    &quot;Volumes&quot;: [
    <span>{</span>
      &quot;Host&quot;: <span>{</span>
        &quot;SourcePath&quot;: &quot;/var/lib/docker/vfs/dir/&quot;
      },
      &quot;Name&quot;: &quot;my-vol&quot;
    }]
  }
}</code></pre></div>
                                 <div id="YAML" name="YAML" class="section langfilter">
                                    <h4 id="aws-resource-ecs-taskdefinition--examples--Create_an_Amazon_ECS_task_definition--yaml">YAML</h4><pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="yaml ">taskdefinition: 
  Type: AWS::ECS::TaskDefinition
  Properties: 
    ContainerDefinitions: 
      - 
        Name: 
          Ref: &quot;AppName&quot;
        MountPoints: 
          - 
            SourceVolume: &quot;my-vol&quot;
            ContainerPath: &quot;/var/www/my-vol&quot;
        Image: &quot;amazon/amazon-ecs-sample&quot;
        Cpu: 256
        PortMappings: 
          - 
            ContainerPort: 
              Ref: &quot;AppContainerPort&quot;
            HostPort: 
              Ref: &quot;AppHostPort&quot;
        EntryPoint: 
          - &quot;/usr/sbin/apache2&quot;
          - &quot;-D&quot;
          - &quot;FOREGROUND&quot;
        Memory: 512
        Essential: true
      - 
        Name: &quot;busybox&quot;
        Image: &quot;busybox&quot;
        Cpu: 256
        EntryPoint: 
          - &quot;sh&quot;
          - &quot;-c&quot;
        Memory: 512
        Command: 
          - &quot;/bin/sh -c \&quot;while true; do /bin/date &gt; /var/www/my-vol/date; sleep 1; done\&quot;&quot;
        Essential: false
        VolumesFrom: 
          - 
            SourceContainer: 
              Ref: &quot;AppName&quot;
    Volumes: 
      - 
        Host: 
          SourcePath: &quot;/var/lib/docker/vfs/dir/&quot;
        Name: &quot;my-vol&quot;</code></pre></div>
                                 <h3 id="aws-resource-ecs-taskdefinition--examples--Create_an_Amazon_ECS_task_definition">Create an Amazon ECS task definition</h3>
                                 <p>The following example defines an Amazon ECS task definition that specifies EC2
                                    and FARGATE as required compatibilities.
                                 </p>
                                 <div id="JSON" name="JSON" class="section langfilter">
                                    <h4 id="aws-resource-ecs-taskdefinition--examples--Create_an_Amazon_ECS_task_definition--json">JSON</h4><pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="json "><span>{</span>
    &quot;AWSTemplateFormatVersion&quot;: &quot;2010-09-09&quot;,
    &quot;Resources&quot;: <span>{</span>
        &quot;taskdefinition&quot;: <span>{</span>
            &quot;Type&quot;: &quot;AWS::ECS::TaskDefinition&quot;,
            &quot;Properties&quot;: <span>{</span>
                &quot;RequiresCompatibilities&quot;: [
                    &quot;EC2&quot;,
                    &quot;FARGATE&quot;
                ],
                &quot;ContainerDefinitions&quot;: [
                    <span>{</span>
                        &quot;Name&quot;: &quot;my-app&quot;,
                        &quot;MountPoints&quot;: [
                            <span>{</span>
                                &quot;SourceVolume&quot;: &quot;my-vol&quot;,
                                &quot;ContainerPath&quot;: &quot;/var/www/my-vol&quot;
                            }
                        ],
                        &quot;Image&quot;: &quot;amazon/amazon-ecs-sample&quot;,
                        &quot;Cpu&quot;: 256,
                        &quot;EntryPoint&quot;: [
                            &quot;/usr/sbin/apache2&quot;,
                            &quot;-D&quot;,
                            &quot;FOREGROUND&quot;
                        ],
                        &quot;Memory&quot;: 512,
                        &quot;Essential&quot;: true
                    },
                    <span>{</span>
                        &quot;Name&quot;: &quot;busybox&quot;,
                        &quot;Image&quot;: &quot;busybox&quot;,
                        &quot;Cpu&quot;: 256,
                        &quot;EntryPoint&quot;: [
                            &quot;sh&quot;,
                            &quot;-c&quot;
                        ],
                        &quot;Memory&quot;: 512,
                        &quot;Command&quot;: [
                            &quot;/bin/sh -c \&quot;while true; do /bin/date &gt; /var/www/my-vol/date; sleep 1; done\&quot;&quot;
                        ],
                        &quot;Essential&quot;: false,
                        &quot;DependsOn&quot;: [
                            <span>{</span>
                                &quot;ContainerName&quot;: &quot;my-app&quot;,
                                &quot;Condition&quot;: &quot;START&quot;
                            }
                        ],
                        &quot;VolumesFrom&quot;: [
                            <span>{</span>
                                &quot;SourceContainer&quot;: &quot;my-app&quot;
                            }
                        ]
                    }
                ],
                &quot;Volumes&quot;: [
                    <span>{</span>
                        &quot;Host&quot;: <span>{</span>
                            &quot;SourcePath&quot;: &quot;/var/lib/docker/vfs/dir/&quot;
                        },
                        &quot;Name&quot;: &quot;my-vol&quot;
                    }
                ]
            }
        }
    }
}</code></pre></div>
                                 <div id="YAML" name="YAML" class="section langfilter">
                                    <h4 id="aws-resource-ecs-taskdefinition--examples--Create_an_Amazon_ECS_task_definition--yaml">YAML</h4><pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="yaml ">AWSTemplateFormatVersion: 2010-09-09
Resources:
  taskdefinition: 
    Type: AWS::ECS::TaskDefinition
    Properties: 
      RequiresCompatibilities:
        - &quot;EC2&quot;
        - &quot;FARGATE&quot;
      ContainerDefinitions: 
        - 
          Name: &quot;my-app&quot;
          MountPoints: 
            - 
              SourceVolume: &quot;my-vol&quot;
              ContainerPath: &quot;/var/www/my-vol&quot;
          Image: &quot;amazon/amazon-ecs-sample&quot;
          Cpu: 256
          EntryPoint: 
            - &quot;/usr/sbin/apache2&quot;
            - &quot;-D&quot;
            - &quot;FOREGROUND&quot;
          Memory: 512
          Essential: true
        - 
          Name: &quot;busybox&quot;
          Image: &quot;busybox&quot;
          Cpu: 256
          EntryPoint: 
            - &quot;sh&quot;
            - &quot;-c&quot;
          Memory: 512
          Command: 
            - &quot;/bin/sh -c \&quot;while true; do /bin/date &gt; /var/www/my-vol/date; sleep 1; done\&quot;&quot;
          Essential: false
          DependsOn:
            - ContainerName: my-app
              Condition: START
          VolumesFrom: 
            - 
              SourceContainer: &quot;my-app&quot;
      Volumes: 
        - 
          Host: 
            SourcePath: &quot;/var/lib/docker/vfs/dir/&quot;
          Name: &quot;my-vol&quot;</code></pre></div>
                                 <awsdocs-copyright class="copyright-print"></awsdocs-copyright>
                                 <awsdocs-thumb-feedback right-edge="{{$ctrl.thumbFeedbackRightEdge}}"></awsdocs-thumb-feedback>
                              </div>
                              <noscript>
                                 <div>
                                    <div>
                                       <div>
                                          <div id="js_error_message">
                                             <p><img src="https://d1ge0kk1l5kms0.cloudfront.net/images/G/01/webservices/console/warning.png" alt="Warning"> <strong>Javascript is disabled or is unavailable in your
                                                   browser.</strong></p>
                                             <p>To use the AWS Documentation, Javascript must be
                                                enabled. Please refer to your browser&apos;s Help pages for instructions.
                                             </p>
                                          </div>
                                       </div>
                                    </div>
                                 </div>
                              </noscript>
                              
                              <awsdocs-page-utilities></awsdocs-page-utilities>
                           </div></div>
</body>
</html>