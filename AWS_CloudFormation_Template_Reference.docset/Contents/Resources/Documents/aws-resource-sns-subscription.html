<!DOCTYPE html>
<html>
<head>
    <link href="css/awsdocs.css" rel="stylesheet" type="text/css">
    <script type="text/javascript" src="js/jquery.min.js"></script>
    <script type="text/javascript" src="js/awsdocs.min.js"></script>
    <meta charset="utf-8">
</head>
<body>
    <div id="content" style="padding: 10px 30px;">
    <div id="main-content" class="awsui-util-container">
                              <div id="main-col-body">
                                 <awsdocs-language-banner data-service="$ctrl.pageService"></awsdocs-language-banner>
                                 <h1 class="topictitle" id="aws-resource-sns-subscription">AWS::SNS::Subscription</h1>
                                 <div class="awsdocs-page-header-container">
                                    <awsdocs-page-header></awsdocs-page-header>
                                    <awsdocs-filter-selector id="awsdocs-filter-selector"></awsdocs-filter-selector>
                                 </div>
                                 <p>The <code class="code">AWS::SNS::Subscription</code> resource subscribes an endpoint to an Amazon
                                    Simple Notification Service (Amazon SNS) topic. For a subscription to be created,
                                    the owner
                                    of the endpoint must confirm the subscription.
                                 </p>
                                 <h2 id="aws-resource-sns-subscription-syntax">Syntax</h2>
                                 <p>To declare this entity in your AWS CloudFormation template, use the following syntax:</p>
                                 <div id="JSON" name="JSON" class="section langfilter">
                                    <h3 id="aws-resource-sns-subscription-syntax.json">JSON</h3><pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="json "><span>{</span>
  &quot;Type&quot; : &quot;AWS::SNS::Subscription&quot;,
  &quot;Properties&quot; : <span>{</span>
      &quot;<a href="#cfn-sns-subscription-deliverypolicy">DeliveryPolicy</a>&quot; : <code class="replaceable">Json</code>,
      &quot;<a href="#cfn-sns-endpoint">Endpoint</a>&quot; : <code class="replaceable">String</code>,
      &quot;<a href="#cfn-sns-subscription-filterpolicy">FilterPolicy</a>&quot; : <code class="replaceable">Json</code>,
      &quot;<a href="#cfn-sns-protocol">Protocol</a>&quot; : <code class="replaceable">String</code>,
      &quot;<a href="#cfn-sns-subscription-rawmessagedelivery">RawMessageDelivery</a>&quot; : <code class="replaceable">Boolean</code>,
      &quot;<a href="#cfn-sns-subscription-redrivepolicy">RedrivePolicy</a>&quot; : <code class="replaceable">Json</code>,
      &quot;<a href="#cfn-sns-subscription-region">Region</a>&quot; : <code class="replaceable">String</code>,
      &quot;<a href="#cfn-sns-subscription-subscriptionrolearn">SubscriptionRoleArn</a>&quot; : <code class="replaceable">String</code>,
      &quot;<a href="#topicarn">TopicArn</a>&quot; : <code class="replaceable">String</code>
    }
}
</code></pre></div>
                                 <div id="YAML" name="YAML" class="section langfilter">
                                    <h3 id="aws-resource-sns-subscription-syntax.yaml">YAML</h3><pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="yaml ">Type: AWS::SNS::Subscription
Properties: 
  <a href="#cfn-sns-subscription-deliverypolicy">DeliveryPolicy</a>: <code class="replaceable">Json</code>
  <a href="#cfn-sns-endpoint">Endpoint</a>: <code class="replaceable">String</code>
  <a href="#cfn-sns-subscription-filterpolicy">FilterPolicy</a>: <code class="replaceable">Json</code>
  <a href="#cfn-sns-protocol">Protocol</a>: <code class="replaceable">String</code>
  <a href="#cfn-sns-subscription-rawmessagedelivery">RawMessageDelivery</a>: <code class="replaceable">Boolean</code>
  <a href="#cfn-sns-subscription-redrivepolicy">RedrivePolicy</a>: <code class="replaceable">Json</code>
  <a href="#cfn-sns-subscription-region">Region</a>: <code class="replaceable">String</code>
  <a href="#cfn-sns-subscription-subscriptionrolearn">SubscriptionRoleArn</a>: <code class="replaceable">String</code>
  <a href="#topicarn">TopicArn</a>: <code class="replaceable">String</code>
</code></pre></div>
                                 <h2 id="aws-resource-sns-subscription-properties">Properties</h2>
                                 <div class="variablelist">
                                    <dl>
                                       <dt><a id="cfn-sns-subscription-deliverypolicy"></a><span class="term"><code class="code">DeliveryPolicy</code></span></dt>
                                       <dd>
                                          
                                          <p>The delivery policy JSON assigned to the subscription. Enables the subscriber to define
                                             the message delivery retry strategy in the case of an HTTP/S endpoint subscribed to
                                             the topic. For more information, see
                                             <code class="code">
                                                <a href="https://docs.aws.amazon.com/sns/latest/api/API_GetSubscriptionAttributes.html">GetSubscriptionAttributes</a>
                                                </code> in the <em>Amazon Simple Notification
                                                Service API Reference</em> and <a href="https://docs.aws.amazon.com/sns/latest/dg/sns-message-delivery-retries.html">Message Delivery Retries</a> in the <em>Amazon SNS Developer Guide</em>.
                                          </p>
                                          
                                          <p><em>Required</em>: No
                                          </p>
                                          <p><em>Type</em>: Json
                                          </p>
                                          <p><em>Update requires</em>: <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-update-behaviors.html#update-no-interrupt">No interruption</a></p>
                                       </dd>
                                       <dt><a id="cfn-sns-endpoint"></a><span class="term"><code class="code">Endpoint</code></span></dt>
                                       <dd>
                                          
                                          <p>The subscription&apos;s endpoint. The endpoint value depends on the protocol that you
                                             specify. For more information, see the <code class="code">Endpoint</code> parameter of the <code class="code">
                                                <a href="https://docs.aws.amazon.com/sns/latest/api/API_Subscribe.html">Subscribe</a>
                                                </code>
                                             action in the <em>Amazon Simple Notification Service API Reference</em>.
                                          </p>
                                          
                                          <p><em>Required</em>: No
                                          </p>
                                          <p><em>Type</em>: String
                                          </p>
                                          <p><em>Update requires</em>: <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-update-behaviors.html#update-replacement">Replacement</a></p>
                                       </dd>
                                       <dt><a id="cfn-sns-subscription-filterpolicy"></a><span class="term"><code class="code">FilterPolicy</code></span></dt>
                                       <dd>
                                          
                                          <p>The filter policy JSON assigned to the subscription. Enables the subscriber to filter
                                             out unwanted messages. For more information, see
                                             <code class="code">
                                                <a href="https://docs.aws.amazon.com/sns/latest/api/API_GetSubscriptionAttributes.html">GetSubscriptionAttributes</a>
                                                </code> in the <em>Amazon Simple Notification
                                                Service API Reference</em> and <a href="https://docs.aws.amazon.com/sns/latest/dg/sns-message-filtering.html">Message Filtering</a> in the <em>Amazon SNS Developer Guide</em>.
                                          </p>
                                          
                                          <p><em>Required</em>: No
                                          </p>
                                          <p><em>Type</em>: Json
                                          </p>
                                          <p><em>Update requires</em>: <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-update-behaviors.html#update-no-interrupt">No interruption</a></p>
                                       </dd>
                                       <dt><a id="cfn-sns-protocol"></a><span class="term"><code class="code">Protocol</code></span></dt>
                                       <dd>
                                          
                                          <p>The subscription&apos;s protocol. For more information, see the <code class="code">Protocol</code>
                                             parameter of the <code class="code">
                                                <a href="https://docs.aws.amazon.com/sns/latest/api/API_Subscribe.html">Subscribe</a>
                                                </code> action in the <em>Amazon Simple Notification Service
                                                API Reference</em>.
                                          </p>
                                          
                                          <p><em>Required</em>: Yes
                                          </p>
                                          <p><em>Type</em>: String
                                          </p>
                                          <p><em>Update requires</em>: <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-update-behaviors.html#update-replacement">Replacement</a></p>
                                       </dd>
                                       <dt><a id="cfn-sns-subscription-rawmessagedelivery"></a><span class="term"><code class="code">RawMessageDelivery</code></span></dt>
                                       <dd>
                                          
                                          <p>When set to <code class="code">true</code>, enables raw message delivery. Raw messages don&apos;t contain
                                             any JSON formatting and can be sent to Amazon SQS and HTTP/S endpoints. For more
                                             information, see <code class="code">
                                                <a href="https://docs.aws.amazon.com/sns/latest/api/API_GetSubscriptionAttributes.html">GetSubscriptionAttributes</a>
                                                </code> in the <em>Amazon Simple Notification
                                                Service API Reference</em>.
                                          </p>
                                          
                                          <p><em>Required</em>: No
                                          </p>
                                          <p><em>Type</em>: Boolean
                                          </p>
                                          <p><em>Update requires</em>: <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-update-behaviors.html#update-no-interrupt">No interruption</a></p>
                                       </dd>
                                       <dt><a id="cfn-sns-subscription-redrivepolicy"></a><span class="term"><code class="code">RedrivePolicy</code></span></dt>
                                       <dd>
                                          
                                          <p>When specified, sends undeliverable messages to the specified Amazon SQS dead-letter
                                             queue. 
                                             Messages that can&apos;t be delivered due to client errors (for example, when the subscribed
                                             endpoint 
                                             is unreachable) or server errors (for example, when the service that powers the subscribed
                                             
                                             endpoint becomes unavailable) are held in the dead-letter queue for further analysis
                                             or reprocessing.
                                          </p>
                                          
                                          <p><em>Required</em>: No
                                          </p>
                                          <p><em>Type</em>: Json
                                          </p>
                                          <p><em>Update requires</em>: <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-update-behaviors.html#update-no-interrupt">No interruption</a></p>
                                       </dd>
                                       <dt><a id="cfn-sns-subscription-region"></a><span class="term"><code class="code">Region</code></span></dt>
                                       <dd>
                                          
                                          <p>For cross-region subscriptions, the region in which the topic resides.</p>
                                          
                                          <p>If no region is specified, CloudFormation uses the region of the caller as the default.</p>
                                          
                                          <p>If you perform an update operation that only updates the <code class="code">Region</code> property of a <code class="code">AWS::SNS::Subscription</code> resource, that operation will fail unless you are either:
                                          </p>
                                          
                                          <div class="itemizedlist">
                                              
                                              
                                             
                                             <ul class="itemizedlist" type="disc">
                                                <li class="listitem">
                                                   
                                                   <p>Updating the <code class="code">Region</code> from <code class="code">NULL</code> to the caller region.
                                                   </p>
                                                   
                                                </li>
                                                <li class="listitem">
                                                   
                                                   <p>Updating the <code class="code">Region</code> from the caller region to <code class="code">NULL</code>.
                                                   </p>
                                                   
                                                </li>
                                             </ul>
                                          </div>
                                          
                                          <p><em>Required</em>: No
                                          </p>
                                          <p><em>Type</em>: String
                                          </p>
                                          <p><em>Update requires</em>: <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-update-behaviors.html#update-no-interrupt">No interruption</a></p>
                                       </dd>
                                       <dt><a id="cfn-sns-subscription-subscriptionrolearn"></a><span class="term"><code class="code">SubscriptionRoleArn</code></span></dt>
                                       <dd>
                                          <p>Not currently supported by AWS CloudFormation.</p>
                                          <p><em>Required</em>: No
                                          </p>
                                          <p><em>Type</em>: String
                                          </p>
                                          <p><em>Update requires</em>: <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-update-behaviors.html#update-no-interrupt">No interruption</a></p>
                                       </dd>
                                       <dt><a id="topicarn"></a><span class="term"><code class="code">TopicArn</code></span></dt>
                                       <dd>
                                          
                                          <p>The ARN of the topic to subscribe to.</p>
                                          
                                          <p><em>Required</em>: Yes
                                          </p>
                                          <p><em>Type</em>: String
                                          </p>
                                          <p><em>Update requires</em>: <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-update-behaviors.html#update-replacement">Replacement</a></p>
                                       </dd>
                                    </dl>
                                 </div>
                                 <h2 id="aws-resource-sns-subscription--examples">Examples</h2>
                                 <h3 id="aws-resource-sns-subscription--examples--Create_a_subscription_with_mandatory_attributes">Create a subscription with mandatory attributes</h3>
                                 <p>The following example creates a subscription with only an endpoint, protocol, and
                                    topic ARN.
                                 </p>
                                 <div id="JSON" name="JSON" class="section langfilter">
                                    <h4 id="aws-resource-sns-subscription--examples--Create_a_subscription_with_mandatory_attributes--json">JSON</h4><pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="json ">&quot;MySubscription&quot; : <span>{</span>
  &quot;Type&quot; : &quot;AWS::SNS::Subscription&quot;,
  &quot;Properties&quot; : <span>{</span>
    &quot;Endpoint&quot; : &quot;test@example.com&quot;,
    &quot;Protocol&quot; : &quot;email&quot;,
    &quot;TopicArn&quot; : <span>{</span> &quot;Ref&quot; : &quot;MySNSTopic&quot; }
  }
}</code></pre></div>
                                 <div id="YAML" name="YAML" class="section langfilter">
                                    <h4 id="aws-resource-sns-subscription--examples--Create_a_subscription_with_mandatory_attributes--yaml">YAML</h4><pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="yaml ">MySubscription:
  Type: AWS::SNS::Subscription
  Properties:
    Endpoint: test@example.com
    Protocol: email
    TopicArn: !Ref &apos;MySNSTopic&apos;</code></pre></div>
                                 <h3 id="aws-resource-sns-subscription--examples--Create_a_subscription_with_optional_attributes">Create a subscription with optional attributes</h3>
                                 <p>The following example creates a subscription with a filter policy, delivery
                                    policy, and raw message delivery enabled.
                                 </p>
                                 <div class="awsdocs-note">
                                    <div class="awsdocs-note-title">
                                       <awsui-icon name="status-info" variant="link"></awsui-icon><span>Note</span></div>
                                    <div class="awsdocs-note-text">
                                       <p>You can set subscription attributes only on standalone Amazon SNS subscriptions
                                          (not on subscriptions nested in topics).
                                       </p>
                                    </div>
                                 </div>
                                 <div id="YAML" name="YAML" class="section langfilter">
                                    <h4 id="aws-resource-sns-subscription--examples--Create_a_subscription_with_optional_attributes--yaml">YAML</h4><pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="yaml ">AWSTemplateFormatVersion: 2010-09-09
Resources:
  CarSalesTopic:
    Type: &apos;AWS::SNS::Topic&apos;
  ERPSubscription:
    Type: &apos;AWS::SNS::Subscription&apos;
    Properties:
      TopicArn: !Ref CarSalesTopic
      Endpoint: !GetAtt 
        - ERPIntegrationQueue
        - Arn
      Protocol: sqs
      RawMessageDelivery: &apos;true&apos;
  CRMSubscription:
    Type: &apos;AWS::SNS::Subscription&apos;
    Properties:
      TopicArn: !Ref CarSalesTopic
      Endpoint: !GetAtt 
        - CRMIntegrationQueue
        - Arn
      Protocol: sqs
      RawMessageDelivery: &apos;true&apos;
      FilterPolicy:
        buyer-class:
          - vip
  SCMSubscription:
    Type: &apos;AWS::SNS::Subscription&apos;
    Properties:
      TopicArn: !Ref CarSalesTopic
      Endpoint: !Ref myHttpEndpoint
      Protocol: https
      DeliveryPolicy:
        healthyRetryPolicy:
          numRetries: 20
          minDelayTarget: 10
          maxDelayTarget: 30
          numMinDelayRetries: 3
          numMaxDelayRetries: 17
          numNoDelayRetries: 0
          backoffFunction: exponential
  ERPIntegrationQueue:
    Type: &apos;AWS::SQS::Queue&apos;
    Properties: <span>{</span>}
  CRMIntegrationQueue:
    Type: &apos;AWS::SQS::Queue&apos;
    Properties: <span>{</span>}
Parameters:
  myHttpEndpoint:
    Type: String</code></pre></div>
                                 <div id="JSON" name="JSON" class="section langfilter">
                                    <h4 id="aws-resource-sns-subscription--examples--Create_a_subscription_with_optional_attributes--json">JSON</h4><pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="json "><span>{</span>
    &quot;AWSTemplateFormatVersion&quot;: &quot;2010-09-09&quot;,
    &quot;Resources&quot;: <span>{</span>
        &quot;CarSalesTopic&quot;: <span>{</span>
            &quot;Type&quot;: &quot;AWS::SNS::Topic&quot;
        },
        &quot;ERPSubscription&quot;: <span>{</span>
            &quot;Type&quot;: &quot;AWS::SNS::Subscription&quot;,
            &quot;Properties&quot;: <span>{</span>
                &quot;TopicArn&quot;: <span>{</span>
                    &quot;Ref&quot;: &quot;CarSalesTopic&quot;
                },
                &quot;Endpoint&quot;: <span>{</span>
                    &quot;Fn::GetAtt&quot;: [&quot;ERPIntegrationQueue&quot;, &quot;Arn&quot;]
                },
                &quot;Protocol&quot;: &quot;sqs&quot;,
                &quot;RawMessageDelivery&quot;: &quot;true&quot;
            }
        },
        &quot;CRMSubscription&quot;: <span>{</span>
            &quot;Type&quot;: &quot;AWS::SNS::Subscription&quot;,
            &quot;Properties&quot;: <span>{</span>
                &quot;TopicArn&quot;: <span>{</span>
                    &quot;Ref&quot;: &quot;CarSalesTopic&quot;
                },
                &quot;Endpoint&quot;: <span>{</span>
                    &quot;Fn::GetAtt&quot;: [&quot;CRMIntegrationQueue&quot;, &quot;Arn&quot;]
                },
                &quot;Protocol&quot;: &quot;sqs&quot;,
                &quot;RawMessageDelivery&quot;: &quot;true&quot;,
                &quot;FilterPolicy&quot;: <span>{</span>
                    &quot;buyer-class&quot;: [
                        &quot;vip&quot;
                    ]
                }
            }
        },
        &quot;SCMSubscription&quot;: <span>{</span>
            &quot;Type&quot;: &quot;AWS::SNS::Subscription&quot;,
            &quot;Properties&quot;: <span>{</span>
                &quot;TopicArn&quot;: <span>{</span>
                    &quot;Ref&quot;: &quot;CarSalesTopic&quot;
                },
                &quot;Endpoint&quot;: <span>{</span>
                    &quot;Ref&quot;: &quot;myHttpEndpoint&quot;
                },
                &quot;Protocol&quot;: &quot;https&quot;,
                &quot;DeliveryPolicy&quot;: <span>{</span>
                    &quot;healthyRetryPolicy&quot;: <span>{</span>
                        &quot;numRetries&quot;: 20,
                        &quot;minDelayTarget&quot;: 10,
                        &quot;maxDelayTarget&quot;: 30,
                        &quot;numMinDelayRetries&quot;: 3,
                        &quot;numMaxDelayRetries&quot;: 17,
                        &quot;numNoDelayRetries&quot;: 0,
                        &quot;backoffFunction&quot;: &quot;exponential&quot;
                    }
                }
            }
        },
        &quot;ERPIntegrationQueue&quot;: <span>{</span>
            &quot;Type&quot;: &quot;AWS::SQS::Queue&quot;,
            &quot;Properties&quot;: <span>{</span>}
        },
        &quot;CRMIntegrationQueue&quot;: <span>{</span>
            &quot;Type&quot;: &quot;AWS::SQS::Queue&quot;,
            &quot;Properties&quot;: <span>{</span>}
        }
    },
    &quot;Parameters&quot;: <span>{</span>
        &quot;myHttpEndpoint&quot;: <span>{</span>
            &quot;Type&quot;: &quot;String&quot;
        }
    }
}</code></pre></div>
                                 <awsdocs-copyright class="copyright-print"></awsdocs-copyright>
                                 <awsdocs-thumb-feedback right-edge="{{$ctrl.thumbFeedbackRightEdge}}"></awsdocs-thumb-feedback>
                              </div>
                              <noscript>
                                 <div>
                                    <div>
                                       <div>
                                          <div id="js_error_message">
                                             <p><img src="https://d1ge0kk1l5kms0.cloudfront.net/images/G/01/webservices/console/warning.png" alt="Warning"> <strong>Javascript is disabled or is unavailable in your
                                                   browser.</strong></p>
                                             <p>To use the AWS Documentation, Javascript must be
                                                enabled. Please refer to your browser&apos;s Help pages for instructions.
                                             </p>
                                          </div>
                                       </div>
                                    </div>
                                 </div>
                              </noscript>
                              
                              <awsdocs-page-utilities></awsdocs-page-utilities>
                           </div></div>
</body>
</html>