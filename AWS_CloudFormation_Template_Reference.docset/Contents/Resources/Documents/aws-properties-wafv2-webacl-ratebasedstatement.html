<!DOCTYPE html>
<html>
<head>
    <link href="css/awsdocs.css" rel="stylesheet" type="text/css">
    <script type="text/javascript" src="js/jquery.min.js"></script>
    <script type="text/javascript" src="js/awsdocs.min.js"></script>
    <meta charset="utf-8">
</head>
<body>
    <div id="content" style="padding: 10px 30px;">
    <div id="main-content" class="awsui-util-container">
                              <div id="main-col-body">
                                 <awsdocs-language-banner data-service="$ctrl.pageService"></awsdocs-language-banner>
                                 <h1 class="topictitle" id="aws-properties-wafv2-webacl-ratebasedstatement">AWS::WAFv2::WebACL RateBasedStatement</h1>
                                 <div class="awsdocs-page-header-container">
                                    <awsdocs-page-header></awsdocs-page-header>
                                    <awsdocs-filter-selector id="awsdocs-filter-selector"></awsdocs-filter-selector>
                                 </div>
                                 <p>A rate-based rule tracks the rate of requests for each originating IP address, and
                                    triggers the rule action when the rate exceeds a limit that you specify on the number
                                    of requests in any 5-minute time span. You can use this to put a temporary block on
                                    requests from an IP address that is sending excessive requests.
                                 </p>
                                 <p>When the rule action triggers, AWS WAF blocks additional requests from the IP address
                                    until the request rate falls below the limit.
                                 </p>
                                 <p>You can optionally nest another statement inside the rate-based statement, to narrow
                                    the scope of the rule so that it only counts requests that match the nested statement.
                                    For example, based on recent requests that you have seen from an attacker, you might
                                    create a rate-based rule with a nested AND rule statement that contains the following
                                    nested statements:
                                 </p>
                                 <div class="itemizedlist">
                                     
                                     
                                    
                                    <ul class="itemizedlist" type="disc">
                                       <li class="listitem">
                                          
                                          <p>An IP match statement with an IP set that specified the address 192.0.2.44.</p>
                                          
                                       </li>
                                       <li class="listitem">
                                          
                                          <p>A string match statement that searches in the User-Agent header for the string BadBot.</p>
                                          
                                       </li>
                                    </ul>
                                 </div>
                                 <p>In this rate-based rule, you also define a rate limit. For this example, the rate
                                    limit is 1,000. Requests that meet both of the conditions in the statements are counted.
                                    If the count exceeds 1,000 requests per five minutes, the rule action triggers. Requests
                                    that do not meet both conditions are not counted towards the rate limit and are not
                                    affected by this rule.
                                 </p>
                                 <p>You cannot nest a <code class="code">RateBasedStatement</code>, for example for use inside a <code class="code">NotStatement</code> or <code class="code">OrStatement</code>. It can only be referenced as a top-level statement within a rule.
                                 </p>
                                 <h2 id="aws-properties-wafv2-webacl-ratebasedstatement-syntax">Syntax</h2>
                                 <p>To declare this entity in your AWS CloudFormation template, use the following syntax:</p>
                                 <div id="JSON" name="JSON" class="section langfilter">
                                    <h3 id="aws-properties-wafv2-webacl-ratebasedstatement-syntax.json">JSON</h3><pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="json "><span>{</span>
  &quot;<a href="#cfn-wafv2-webacl-ratebasedstatement-aggregatekeytype">AggregateKeyType</a>&quot; : <code class="replaceable">String</code>,
  &quot;<a href="#cfn-wafv2-webacl-ratebasedstatement-forwardedipconfig">ForwardedIPConfig</a>&quot; : <code class="replaceable"><a href="./aws-properties-wafv2-webacl-forwardedipconfiguration.html">ForwardedIPConfiguration</a></code>,
  &quot;<a href="#cfn-wafv2-webacl-ratebasedstatement-limit">Limit</a>&quot; : <code class="replaceable">Integer</code>,
  &quot;<a href="#cfn-wafv2-webacl-ratebasedstatement-scopedownstatement">ScopeDownStatement</a>&quot; : <code class="replaceable"><a href="./aws-properties-wafv2-webacl-statement.html">Statement</a></code>
}
</code></pre></div>
                                 <div id="YAML" name="YAML" class="section langfilter">
                                    <h3 id="aws-properties-wafv2-webacl-ratebasedstatement-syntax.yaml">YAML</h3><pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="yaml ">  <a href="#cfn-wafv2-webacl-ratebasedstatement-aggregatekeytype">AggregateKeyType</a>: <code class="replaceable">String</code>
  <a href="#cfn-wafv2-webacl-ratebasedstatement-forwardedipconfig">ForwardedIPConfig</a>: <code class="replaceable">
    <a href="./aws-properties-wafv2-webacl-forwardedipconfiguration.html">ForwardedIPConfiguration</a></code>
  <a href="#cfn-wafv2-webacl-ratebasedstatement-limit">Limit</a>: <code class="replaceable">Integer</code>
  <a href="#cfn-wafv2-webacl-ratebasedstatement-scopedownstatement">ScopeDownStatement</a>: <code class="replaceable">
    <a href="./aws-properties-wafv2-webacl-statement.html">Statement</a></code>
</code></pre></div>
                                 <h2 id="aws-properties-wafv2-webacl-ratebasedstatement-properties">Properties</h2>
                                 <div class="variablelist">
                                    <dl>
                                       <dt><a id="cfn-wafv2-webacl-ratebasedstatement-aggregatekeytype"></a><span class="term"><code class="code">AggregateKeyType</code></span></dt>
                                       <dd>
                                          
                                          <p>Setting that indicates how to aggregate the request counts. The options are the following:</p> 
                                          
                                          <div class="itemizedlist">
                                              
                                              
                                             
                                             <ul class="itemizedlist" type="disc">
                                                <li class="listitem">
                                                   
                                                   <p>IP - Aggregate the request counts on the IP address from the web request origin.</p>
                                                   
                                                </li>
                                                <li class="listitem">
                                                   
                                                   <p>FORWARDED_IP - Aggregate the request counts on the first IP address in an HTTP header.
                                                      If you use this, configure the <code class="code">ForwardedIPConfig</code>, to specify the header to use. 
                                                   </p>
                                                   
                                                </li>
                                             </ul>
                                          </div>
                                          
                                          <p><em>Required</em>: Yes
                                          </p>
                                          <p><em>Type</em>: String
                                          </p>
                                          <p><em>Allowed values</em>: <code class="code">FORWARDED_IP | IP</code></p>
                                          <p><em>Update requires</em>: <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-update-behaviors.html#update-no-interrupt">No interruption</a></p>
                                       </dd>
                                       <dt><a id="cfn-wafv2-webacl-ratebasedstatement-forwardedipconfig"></a><span class="term"><code class="code">ForwardedIPConfig</code></span></dt>
                                       <dd>
                                          
                                          <p>The configuration for inspecting IP addresses in an HTTP header that you specify,
                                             instead of using the IP address that&apos;s reported by the web request origin. Commonly,
                                             this is the X-Forwarded-For (XFF) header, but you can specify any header name. 
                                          </p>
                                          
                                          
                                          <div class="awsdocs-note">
                                             <div class="awsdocs-note-title">
                                                <awsui-icon name="status-info" variant="link"></awsui-icon><span>Note</span></div>
                                             <div class="awsdocs-note-text">
                                                <p>If the specified header isn&apos;t present in the request, AWS WAF doesn&apos;t apply the rule
                                                   to the web request at all.
                                                </p>
                                             </div>
                                          </div> 
                                          
                                          
                                          
                                          <p>This is required if <code class="code">AggregateKeyType</code> is set to <code class="code">FORWARDED_IP</code>.
                                          </p>
                                          
                                          <p><em>Required</em>: No
                                          </p>
                                          <p><em>Type</em>: <a href="./aws-properties-wafv2-webacl-forwardedipconfiguration.html">ForwardedIPConfiguration</a></p>
                                          <p><em>Update requires</em>: <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-update-behaviors.html#update-no-interrupt">No interruption</a></p>
                                       </dd>
                                       <dt><a id="cfn-wafv2-webacl-ratebasedstatement-limit"></a><span class="term"><code class="code">Limit</code></span></dt>
                                       <dd>
                                          
                                          <p>The limit on requests per 5-minute period for a single originating IP address. If
                                             the statement includes a <code class="code">ScopeDownStatement</code>, this limit is applied only to the requests that match the statement.
                                          </p>
                                          
                                          <p><em>Required</em>: Yes
                                          </p>
                                          <p><em>Type</em>: Integer
                                          </p>
                                          <p><em>Update requires</em>: <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-update-behaviors.html#update-no-interrupt">No interruption</a></p>
                                       </dd>
                                       <dt><a id="cfn-wafv2-webacl-ratebasedstatement-scopedownstatement"></a><span class="term"><code class="code">ScopeDownStatement</code></span></dt>
                                       <dd>
                                          
                                          <p>An optional nested statement that narrows the scope of the rate-based statement to
                                             matching web requests. This can be any nestable statement, and you can nest statements
                                             at any level below this scope-down statement.
                                          </p>
                                          
                                          <p><em>Required</em>: No
                                          </p>
                                          <p><em>Type</em>: <a href="./aws-properties-wafv2-webacl-statement.html">Statement</a></p>
                                          <p><em>Update requires</em>: <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-update-behaviors.html#update-no-interrupt">No interruption</a></p>
                                       </dd>
                                    </dl>
                                 </div>
                                 <awsdocs-copyright class="copyright-print"></awsdocs-copyright>
                                 <awsdocs-thumb-feedback right-edge="{{$ctrl.thumbFeedbackRightEdge}}"></awsdocs-thumb-feedback>
                              </div>
                              <noscript>
                                 <div>
                                    <div>
                                       <div>
                                          <div id="js_error_message">
                                             <p><img src="https://d1ge0kk1l5kms0.cloudfront.net/images/G/01/webservices/console/warning.png" alt="Warning"> <strong>Javascript is disabled or is unavailable in your
                                                   browser.</strong></p>
                                             <p>To use the Amazon Web Services Documentation, Javascript must be
                                                enabled. Please refer to your browser&apos;s Help pages for instructions.
                                             </p>
                                          </div>
                                       </div>
                                    </div>
                                 </div>
                              </noscript>
                              
                              <awsdocs-page-utilities></awsdocs-page-utilities>
                           </div></div>
</body>
</html>