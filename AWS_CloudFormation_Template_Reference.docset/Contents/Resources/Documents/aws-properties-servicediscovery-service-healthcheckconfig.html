<!DOCTYPE html>
<html>
<head>
    <link href="css/awsdocs.css" rel="stylesheet" type="text/css">
    <script type="text/javascript" src="js/jquery.min.js"></script>
    <script type="text/javascript" src="js/awsdocs.min.js"></script>
    <meta charset="utf-8">
</head>
<body>
    <div id="content" style="padding: 10px 30px;">
    <h1 class="topictitle" id="aws-properties-servicediscovery-service-healthcheckconfig">AWS::ServiceDiscovery::Service HealthCheckConfig</h1><p>
                        <em>Public DNS and HTTP namespaces only.</em> A complex type that contains settings for an optional health check. If you 
                        			specify settings for a health check, AWS Cloud Map associates the health check
                        with the records that you specify in 
                        			<code class="code">DnsConfig</code>.
                     </p><div class="aws-note">
                        <p class="aws-note">Important</p>
                        <p>If you specify a health check configuration, you can specify either <code class="code">HealthCheckCustomConfig</code> or 
                           			<code class="code">HealthCheckConfig</code> but not both.
                        </p>
                     </div><p>Health checks are basic Route 53 health checks that monitor an AWS endpoint. For information
                        about pricing for 
                        			health checks, see <a href="http://aws.amazon.com/route53/pricing/" target="_blank">Amazon Route 53 Pricing</a>.
                     </p><p>Note the following about configuring health checks.</p><p>
                        <b>A and AAAA records</b>
                        
                     </p><p>If <code class="code">DnsConfig</code> includes configurations for both A and AAAA records, AWS Cloud Map creates a health
                        check 
                        			that uses the IPv4 address to check the health of the resource. If the endpoint
                        that is specified by the IPv4 address is unhealthy, 
                        			Route 53 considers both the A and AAAA records to be unhealthy. 
                     </p><p>
                        <b>CNAME records</b>
                        
                     </p><p>You can&apos;t specify settings for <code class="code">HealthCheckConfig</code> when the <code class="code">DNSConfig</code> includes <code class="code">CNAME</code> for 
                        			the value of <code class="code">Type</code>. If you do, the <code class="code">CreateService</code> request will fail with an <code class="code">InvalidInput</code> error.
                     </p><p>
                        <b>Request interval</b>
                        
                     </p><p>A Route 53 health checker in each health-checking region sends a health check request
                        to an endpoint every 30 seconds. On average, 
                        			your endpoint receives a health check request about every two seconds. However,
                        health checkers don&apos;t coordinate with one another, 
                        			so you&apos;ll sometimes see several requests per second followed by a few seconds with
                        no health checks at all.
                     </p><p>
                        <b>Health checking regions</b>
                        
                     </p><p>Health checkers perform checks from all Route 53 health-checking regions. For a list
                        of the current regions, see 
                        			<a href="https://docs.aws.amazon.com/Route53/latest/APIReference/API_HealthCheckConfig.html#Route53-Type-HealthCheckConfig-Regions">Regions</a>.
                     </p><p>
                        <b>Alias records</b>
                        
                     </p><p>When you register an instance, if you include the <code class="code">AWS_ALIAS_DNS_NAME</code> attribute, AWS Cloud Map creates a Route 53 alias record. 
                        			Note the following:
                     </p><div class="itemizedlist">
                        			         
                        			         
                        		       
                        <ul class="itemizedlist" type="disc">
                           <li class="listitem">
                              
                              <p>Route 53 automatically sets <code class="code">EvaluateTargetHealth</code> to true for alias records. 
                                 				When <code class="code">EvaluateTargetHealth</code> is true, the alias record inherits the health of the referenced AWS resource. 
                                 				such as an ELB load balancer. For more information, see 
                                 				<a href="https://docs.aws.amazon.com/Route53/latest/APIReference/API_AliasTarget.html#Route53-Type-AliasTarget-EvaluateTargetHealth">EvaluateTargetHealth</a>.
                              </p>
                              			         
                           </li>
                           <li class="listitem">
                              
                              <p>If you include <code class="code">HealthCheckConfig</code> and then use the service to register an instance that creates 
                                 				an alias record, Route 53 doesn&apos;t create the health check.
                              </p>
                              
                           </li>
                        </ul>
                     </div><p>
                        <b>Charges for health checks</b>
                        
                     </p><p>Health checks are basic Route 53 health checks that monitor an AWS endpoint. For information
                        about pricing for 
                        			health checks, see <a href="http://aws.amazon.com/route53/pricing/" target="_blank">Amazon Route 53 Pricing</a>.
                     </p><h2 id="aws-properties-servicediscovery-service-healthcheckconfig-syntax">Syntax</h2><p>To declare this entity in your AWS CloudFormation template, use the following syntax:</p><div id="JSON" name="JSON" class="section langfilter">
                        <h3 id="aws-properties-servicediscovery-service-healthcheckconfig-syntax.json">JSON</h3><pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="json ">{
  &quot;<a href="#cfn-servicediscovery-service-healthcheckconfig-failurethreshold">FailureThreshold</a>&quot; : <em class="replaceable"><code>Double</code></em>,
  &quot;<a href="#cfn-servicediscovery-service-healthcheckconfig-resourcepath">ResourcePath</a>&quot; : <em class="replaceable"><code>String</code></em>,
  &quot;<a href="#cfn-servicediscovery-service-healthcheckconfig-type">Type</a>&quot; : <em class="replaceable"><code>String</code></em>
}
</code></pre></div><div id="YAML" name="YAML" class="section langfilter">
                        <h3 id="aws-properties-servicediscovery-service-healthcheckconfig-syntax.yaml">YAML</h3><pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="yaml ">  <a href="#cfn-servicediscovery-service-healthcheckconfig-failurethreshold">FailureThreshold</a>: <em class="replaceable"><code>Double</code></em>
  <a href="#cfn-servicediscovery-service-healthcheckconfig-resourcepath">ResourcePath</a>: <em class="replaceable"><code>String</code></em>
  <a href="#cfn-servicediscovery-service-healthcheckconfig-type">Type</a>: <em class="replaceable"><code>String</code></em>
</code></pre></div><h2 id="aws-properties-servicediscovery-service-healthcheckconfig-properties">Properties</h2><div class="variablelist">
                        <dl>
                           <dt><a id="cfn-servicediscovery-service-healthcheckconfig-failurethreshold"></a><span class="term"><code class="code">FailureThreshold</code></span></dt>
                           <dd>
                              		       
                              <p>The number of consecutive health checks that an endpoint must pass or fail for Route
                                 53 to change the current status of the endpoint 
                                 			from unhealthy to healthy or vice versa. For more information, see 
                                 			<a href="https://docs.aws.amazon.com/Route53/latest/DeveloperGuide/dns-failover-determining-health-of-endpoints.html">How Route 53 Determines 
                                    				Whether an Endpoint Is Healthy</a> in the <em>Route 53 Developer Guide</em>.
                              </p>
                              	     
                              <p><em>Required</em>: No
                              </p>
                              <p><em>Type</em>: Double
                              </p>
                              <p><em>Minimum</em>: <code class="code">1</code></p>
                              <p><em>Maximum</em>: <code class="code">10</code></p>
                              <p><em>Update requires</em>: <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-update-behaviors.html#update-no-interrupt">No interruption</a></p>
                           </dd>
                           <dt><a id="cfn-servicediscovery-service-healthcheckconfig-resourcepath"></a><span class="term"><code class="code">ResourcePath</code></span></dt>
                           <dd>
                              		       
                              <p>The path that you want Route 53 to request when performing health checks. The path
                                 can be any value for which your endpoint 
                                 			will return an HTTP status code of 2xx or 3xx when the endpoint is healthy, such
                                 as the file <code class="code">/docs/route53-health-check.html</code>. 
                                 			Route 53 automatically adds the DNS name for the service. If you don&apos;t specify
                                 a value for <code class="code">ResourcePath</code>, 
                                 			the default value is <code class="code">/</code>.
                              </p>
                              			      
                              <p>If you specify <code class="code">TCP</code> for <code class="code">Type</code>, you must <em>not</em> specify a value for 
                                 				<code class="code">ResourcePath</code>.
                              </p>
                              	     
                              <p><em>Required</em>: No
                              </p>
                              <p><em>Type</em>: String
                              </p>
                              <p><em>Maximum</em>: <code class="code">255</code></p>
                              <p><em>Update requires</em>: <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-update-behaviors.html#update-no-interrupt">No interruption</a></p>
                           </dd>
                           <dt><a id="cfn-servicediscovery-service-healthcheckconfig-type"></a><span class="term"><code class="code">Type</code></span></dt>
                           <dd>
                              		       
                              <p>The type of health check that you want to create, which indicates how Route 53 determines
                                 whether an endpoint is healthy.
                              </p>
                              		
                              		       
                              <div class="aws-note">
                                 <p class="aws-note">Important</p>
                                 <p>You can&apos;t change the value of <code class="code">Type</code> after you create a health check.
                                 </p>
                              </div>
                              		
                              		       
                              <p>You can create the following types of health checks:</p>
                              		       
                              <div class="itemizedlist">
                                 			         
                                 			         
                                 			         
                                 		       
                                 <ul class="itemizedlist" type="disc">
                                    <li class="listitem">
                                       
                                       <p>
                                          <b>HTTP</b>: Route 53 tries to establish a TCP connection. If successful, Route 53 submits an
                                          
                                          				HTTP request and waits for an HTTP status code of 200 or greater and less than
                                          400.
                                       </p>
                                       			         
                                    </li>
                                    <li class="listitem">
                                       
                                       <p>
                                          <b>HTTPS</b>: Route 53 tries to establish a TCP connection. If successful, Route 53 submits an
                                          
                                          				HTTPS request and waits for an HTTP status code of 200 or greater and less than
                                          400.
                                       </p>
                                       				           
                                       <div class="aws-note">
                                          <p class="aws-note">Important</p>
                                          <p>If you specify HTTPS for the value of <code class="code">Type</code>, the endpoint must support TLS v1.0 or later.
                                          </p>
                                       </div>
                                       			         
                                    </li>
                                    <li class="listitem">
                                       
                                       <p>
                                          <b>TCP</b>: Route 53 tries to establish a TCP connection.
                                       </p>
                                       				           
                                       <p>If you specify <code class="code">TCP</code> for <code class="code">Type</code>, don&apos;t specify a value for <code class="code">ResourcePath</code>.
                                       </p>
                                       			         
                                    </li>
                                 </ul>
                              </div>
                              		       
                              <p>For more information, see 
                                 			<a href="https://docs.aws.amazon.com/Route53/latest/DeveloperGuide/dns-failover-determining-health-of-endpoints.html">How Route 53 Determines 
                                    				Whether an Endpoint Is Healthy</a> in the <em>Route 53 Developer Guide</em>.
                              </p>
                              	     
                              <p><em>Required</em>: Yes
                              </p>
                              <p><em>Type</em>: String
                              </p>
                              <p><em>Allowed Values</em>: <code class="code">HTTP | HTTPS | TCP</code></p>
                              <p><em>Update requires</em>: <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-update-behaviors.html#update-no-interrupt">No interruption</a></p>
                           </dd>
                        </dl>
                     </div><h2 id="aws-properties-servicediscovery-service-healthcheckconfig--seealso">See Also</h2><div class="itemizedlist">
                        				
                        			
                        <ul class="itemizedlist" type="disc">
                           <li class="listitem">
                              					
                              <p>
                                 						<a href="https://docs.aws.amazon.com/cloud-map/latest/api/API_HealthCheckConfig.html">HealthCheckConfig</a> 
                                 						in the <em>AWS Cloud Map API Reference</em>
                                 					
                              </p>
                              				
                           </li>
                        </ul>
                     </div><div id="marketing-target"><span class="close-button"></span><div class="marketing-title" id="marketing-title"></div>
                        <div class="marketing-description"><span id="marketing-description"></span><span id="marketing-cta"></span></div>
                     </div></div>
</body>
</html>