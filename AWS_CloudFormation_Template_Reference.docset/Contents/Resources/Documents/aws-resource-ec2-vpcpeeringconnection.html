<!DOCTYPE html>
<html>
<head>
    <link href="css/awsdocs.css" rel="stylesheet" type="text/css">
    <script type="text/javascript" src="js/jquery.min.js"></script>
    <script type="text/javascript" src="js/awsdocs.min.js"></script>
    <meta charset="utf-8">
</head>
<body>
    <div id="content" style="padding: 10px 30px;">
    <div id="main-content" class="awsui-util-container">
                              <div id="main-col-body">
                                 <awsdocs-language-banner data-service="$ctrl.pageService"></awsdocs-language-banner>
                                 <h1 class="topictitle" id="aws-resource-ec2-vpcpeeringconnection">AWS::EC2::VPCPeeringConnection</h1>
                                 <div class="awsdocs-page-header-container">
                                    <awsdocs-page-header></awsdocs-page-header>
                                    <awsdocs-filter-selector id="awsdocs-filter-selector"></awsdocs-filter-selector>
                                 </div>
                                 <p>Requests a VPC peering connection between two VPCs: a requester VPC that you own and
                                    			an accepter VPC with which to create the connection. The accepter VPC can belong
                                    to
                                    			another AWS account and can be in a different Region to the requester VPC. The
                                    requester
                                    			VPC and accepter VPC cannot have overlapping CIDR blocks.
                                 </p>
                                 <div class="awsdocs-note">
                                    <div class="awsdocs-note-title">
                                       <awsui-icon name="status-info" variant="link"></awsui-icon><span>Note</span></div>
                                    <div class="awsdocs-note-text">
                                       <p>Limitations and rules apply to a VPC peering connection. For more information, see
                                          the <a href="https://docs.aws.amazon.com/vpc/latest/peering/vpc-peering-basics.html#vpc-peering-limitations">limitations</a> section in the <em>VPC Peering Guide</em>.
                                       </p>
                                    </div>
                                 </div>
                                 <p>The owner of the accepter VPC must accept the peering request to activate the peering
                                    connection. The VPC peering connection request expires after 7 days, after which it
                                    cannot be accepted or rejected.
                                 </p>
                                 <p>If you create a VPC peering connection request between VPCs with overlapping CIDR
                                    blocks, the VPC peering connection has a status of <code class="code">failed</code>.
                                 </p>
                                 <h2 id="aws-resource-ec2-vpcpeeringconnection-syntax">Syntax</h2>
                                 <p>To declare this entity in your AWS CloudFormation template, use the following syntax:</p>
                                 <div id="JSON" name="JSON" class="section langfilter">
                                    <h3 id="aws-resource-ec2-vpcpeeringconnection-syntax.json">JSON</h3><pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="json "><span>{</span>
  &quot;Type&quot; : &quot;AWS::EC2::VPCPeeringConnection&quot;,
  &quot;Properties&quot; : <span>{</span>
      &quot;<a href="#cfn-ec2-vpcpeeringconnection-peerownerid">PeerOwnerId</a>&quot; : <code class="replaceable">String</code>,
      &quot;<a href="#cfn-ec2-vpcpeeringconnection-peerregion">PeerRegion</a>&quot; : <code class="replaceable">String</code>,
      &quot;<a href="#cfn-ec2-vpcpeeringconnection-peerrolearn">PeerRoleArn</a>&quot; : <code class="replaceable">String</code>,
      &quot;<a href="#cfn-ec2-vpcpeeringconnection-peervpcid">PeerVpcId</a>&quot; : <code class="replaceable">String</code>,
      &quot;<a href="#cfn-ec2-vpcpeeringconnection-tags">Tags</a>&quot; : <code class="replaceable">[ <a href="aws-properties-resource-tags.html">Tag</a>, ... ]</code>,
      &quot;<a href="#cfn-ec2-vpcpeeringconnection-vpcid">VpcId</a>&quot; : <code class="replaceable">String</code>
    }
}
</code></pre></div>
                                 <div id="YAML" name="YAML" class="section langfilter">
                                    <h3 id="aws-resource-ec2-vpcpeeringconnection-syntax.yaml">YAML</h3><pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="yaml ">Type: AWS::EC2::VPCPeeringConnection
Properties: 
  <a href="#cfn-ec2-vpcpeeringconnection-peerownerid">PeerOwnerId</a>: <code class="replaceable">String</code>
  <a href="#cfn-ec2-vpcpeeringconnection-peerregion">PeerRegion</a>: <code class="replaceable">String</code>
  <a href="#cfn-ec2-vpcpeeringconnection-peerrolearn">PeerRoleArn</a>: <code class="replaceable">String</code>
  <a href="#cfn-ec2-vpcpeeringconnection-peervpcid">PeerVpcId</a>: <code class="replaceable">String</code>
  <a href="#cfn-ec2-vpcpeeringconnection-tags">Tags</a>: <code class="replaceable">
    - <a href="aws-properties-resource-tags.html">Tag</a></code>
  <a href="#cfn-ec2-vpcpeeringconnection-vpcid">VpcId</a>: <code class="replaceable">String</code>
</code></pre></div>
                                 <h2 id="aws-resource-ec2-vpcpeeringconnection-properties">Properties</h2>
                                 <div class="variablelist">
                                    <dl>
                                       <dt><a id="cfn-ec2-vpcpeeringconnection-peerownerid"></a><span class="term"><code class="code">PeerOwnerId</code></span></dt>
                                       <dd>
                                          
                                          <p>The AWS account ID of the owner of the accepter VPC.</p>
                                          
                                          <p>Default: Your AWS account ID</p>
                                          
                                          <p><em>Required</em>: No
                                          </p>
                                          <p><em>Type</em>: String
                                          </p>
                                          <p><em>Update requires</em>: <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-update-behaviors.html#update-replacement">Replacement</a></p>
                                       </dd>
                                       <dt><a id="cfn-ec2-vpcpeeringconnection-peerregion"></a><span class="term"><code class="code">PeerRegion</code></span></dt>
                                       <dd>
                                          
                                          <p>The Region code for the accepter VPC, if the accepter VPC is located in a Region
                                             other than the Region in which you make the request.
                                          </p>
                                          		       
                                          <p>Default: The Region in which you make the request.</p>
                                          
                                          <p><em>Required</em>: No
                                          </p>
                                          <p><em>Type</em>: String
                                          </p>
                                          <p><em>Update requires</em>: <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-update-behaviors.html#update-replacement">Replacement</a></p>
                                       </dd>
                                       <dt><a id="cfn-ec2-vpcpeeringconnection-peerrolearn"></a><span class="term"><code class="code">PeerRoleArn</code></span></dt>
                                       <dd>
                                          
                                          <p>The Amazon Resource Name (ARN) of the VPC peer role for the peering connection in
                                             another AWS account.
                                          </p>
                                          
                                          <p>This is required when you are peering a VPC in a different AWS account.</p>
                                          
                                          <p><em>Required</em>: Conditional
                                          </p>
                                          <p><em>Type</em>: String
                                          </p>
                                          <p><em>Update requires</em>: <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-update-behaviors.html#update-replacement">Replacement</a></p>
                                       </dd>
                                       <dt><a id="cfn-ec2-vpcpeeringconnection-peervpcid"></a><span class="term"><code class="code">PeerVpcId</code></span></dt>
                                       <dd>
                                          
                                          <p>The ID of the VPC with which you are creating the VPC peering connection. You must
                                             			specify this parameter in the request.
                                          </p>
                                          
                                          <p><em>Required</em>: Yes
                                          </p>
                                          <p><em>Type</em>: String
                                          </p>
                                          <p><em>Update requires</em>: <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-update-behaviors.html#update-replacement">Replacement</a></p>
                                       </dd>
                                       <dt><a id="cfn-ec2-vpcpeeringconnection-tags"></a><span class="term"><code class="code">Tags</code></span></dt>
                                       <dd>
                                          
                                          <p>Any tags assigned to the resource.</p>
                                          
                                          <p><em>Required</em>: No
                                          </p>
                                          <p><em>Type</em>: List of <a href="aws-properties-resource-tags.html">Tag</a></p>
                                          <p><em>Update requires</em>: <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-update-behaviors.html#update-no-interrupt">No interruption</a></p>
                                       </dd>
                                       <dt><a id="cfn-ec2-vpcpeeringconnection-vpcid"></a><span class="term"><code class="code">VpcId</code></span></dt>
                                       <dd>
                                          
                                          <p>The ID of the VPC.</p>
                                          
                                          <p><em>Required</em>: Yes
                                          </p>
                                          <p><em>Type</em>: String
                                          </p>
                                          <p><em>Update requires</em>: <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-update-behaviors.html#update-replacement">Replacement</a></p>
                                       </dd>
                                    </dl>
                                 </div>
                                 <h2 id="aws-resource-ec2-vpcpeeringconnection-return-values">Return values</h2>
                                 <h3 id="aws-resource-ec2-vpcpeeringconnection-return-values-ref">Ref</h3>
                                 <p>When you pass the logical ID of this resource to the intrinsic <code class="code">Ref</code> function, <code class="code">Ref</code> returns the ID of the VPC peering connection.
                                 </p>
                                 <p>For more information about using the <code class="code">Ref</code> function, see <a href="intrinsic-function-reference-ref.html">Ref</a>.
                                 </p>
                                 <h2 id="aws-resource-ec2-vpcpeeringconnection--examples">Examples</h2>
                                 <h3 id="aws-resource-ec2-vpcpeeringconnection--examples--VPC_Peering_Connection">VPC Peering Connection</h3>
                                 <p>The following example creates two VPCs (<code class="code">myVPC</code> and
                                    <code class="code">myPrivateVPC</code>) and a subnet in each VPC. The subnet in
                                    <code class="code">myVPC</code> is a public subnet. The example then creates a VPC
                                    peering connection between the VPCs and launches an instance in each VPC. You
                                    can test the peering connection by connecting to the instance in the public
                                    subnet and pinging the private IP address of the instance in the subnet of the
                                    private VPC. The security group rules for the instance in the private subnet
                                    allow incoming ICMP traffic (and therefore allow the <code class="code">ping</code>
                                    command).
                                 </p>
                                 <div id="JSON" name="JSON" class="section langfilter">
                                    <h4 id="aws-resource-ec2-vpcpeeringconnection--examples--VPC_Peering_Connection--json">JSON</h4><pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="json "><span>{</span>
   &quot;AWSTemplateFormatVersion&quot;: &quot;2010-09-09&quot;,
   &quot;Description&quot;: &quot;Creates two VPCs, peers the VPCs, and launches an instance in each VPC.&quot;,
   &quot;Parameters&quot;: <span>{</span>
      &quot;EC2KeyPairName&quot;: <span>{</span>
         &quot;Description&quot;: &quot;Name of an existing EC2 KeyPair to enable SSH access to the instances&quot;,
         &quot;Type&quot;: &quot;AWS::EC2::KeyPair::KeyName&quot;,
         &quot;ConstraintDescription&quot; : &quot;must be the name of an existing EC2 KeyPair.&quot;
       },
   &quot;myVPCIDCIDRRange&quot;: <span>{</span>
        &quot;Description&quot;: &quot;The IP address range for your new VPC.&quot;,
        &quot;Type&quot;: &quot;String&quot;,
        &quot;MinLength&quot;: &quot;9&quot;,
        &quot;MaxLength&quot;: &quot;18&quot;,
        &quot;Default&quot;: &quot;10.1.0.0/16&quot;,
        &quot;AllowedPattern&quot;: &quot;(\\d<span>{</span>1,3})\\.(\\d<span>{</span>1,3})\\.(\\d<span>{</span>1,3})\\.(\\d<span>{</span>1,3})/(\\d<span>{</span>1,2})&quot;,
        &quot;ConstraintDescription&quot;: &quot;must be a valid IP CIDR range of the form x.x.x.x/x.&quot;
   },
   &quot;myPrivateVPCIDCIDRRange&quot;: <span>{</span>
        &quot;Description&quot;: &quot;The IP address range for your new Private VPC.&quot;,
        &quot;Type&quot;: &quot;String&quot;,
        &quot;MinLength&quot;: &quot;9&quot;,
        &quot;MaxLength&quot;: &quot;18&quot;,
        &quot;Default&quot;: &quot;10.0.0.0/16&quot;,
        &quot;AllowedPattern&quot;: &quot;(\\d<span>{</span>1,3})\\.(\\d<span>{</span>1,3})\\.(\\d<span>{</span>1,3})\\.(\\d<span>{</span>1,3})/(\\d<span>{</span>1,2})&quot;,
        &quot;ConstraintDescription&quot;: &quot;must be a valid IP CIDR range of the form x.x.x.x/x.&quot;
    },
    &quot;EC2SubnetCIDRRange&quot;: <span>{</span>
        &quot;Description&quot;: &quot;The IP address range for a subnet in myPrivateVPC.&quot;,
        &quot;Type&quot;: &quot;String&quot;,
        &quot;MinLength&quot;: &quot;9&quot;,
        &quot;MaxLength&quot;: &quot;18&quot;,
        &quot;Default&quot;: &quot;10.0.0.0/24&quot;,
        &quot;AllowedPattern&quot;: &quot;(\\d<span>{</span>1,3})\\.(\\d<span>{</span>1,3})\\.(\\d<span>{</span>1,3})\\.(\\d<span>{</span>1,3})/(\\d<span>{</span>1,2})&quot;,
        &quot;ConstraintDescription&quot;: &quot;must be a valid IP CIDR range of the form x.x.x.x/x.&quot;
     },
     &quot;EC2PublicSubnetCIDRRange&quot;: <span>{</span>
            &quot;Description&quot;: &quot;The IP address range for a subnet in myVPC.&quot;,
            &quot;Type&quot;: &quot;String&quot;,
            &quot;MinLength&quot;: &quot;9&quot;,
            &quot;MaxLength&quot;: &quot;18&quot;,
            &quot;Default&quot;: &quot;10.1.0.0/24&quot;,
            &quot;AllowedPattern&quot;: &quot;(\\d<span>{</span>1,3})\\.(\\d<span>{</span>1,3})\\.(\\d<span>{</span>1,3})\\.(\\d<span>{</span>1,3})/(\\d<span>{</span>1,2})&quot;,
            &quot;ConstraintDescription&quot;: &quot;must be a valid IP CIDR range of the form x.x.x.x/x.&quot;
     }
 },
 &quot;Mappings&quot;: <span>{</span>
      &quot;AWSRegionToAMI&quot;: <span>{</span>
          &quot;us-east-1&quot;: <span>{</span>
              &quot;64&quot;: &quot;ami-0ff8a91507f77f867&quot;
          },
          &quot;us-west-2&quot;: <span>{</span>
             &quot;64&quot;: &quot;ami-a0cfeed8&quot;
          },
          &quot;us-west-1&quot;: <span>{</span>
              &quot;64&quot;: &quot;ami-0bdb828fd58c52235&quot;
          },
          &quot;eu-west-1&quot;: <span>{</span>
              &quot;64&quot;: &quot;ami-047bb4163c506cd98&quot;
          },
          &quot;ap-southeast-1&quot;: <span>{</span>
              &quot;64&quot;: &quot;ami-08569b978cc4dfa10&quot;
          },
          &quot;ap-southeast-2&quot;: <span>{</span>
              &quot;64&quot;: &quot;ami-09b42976632b27e9b&quot;
          },
          &quot;ap-northeast-2&quot;: <span>{</span>
              &quot;64&quot;: &quot;ami-0d097db2fb6e0f05e&quot;
          },
          &quot;ap-northeast-1&quot;: <span>{</span>
              &quot;64&quot;: &quot;ami-06cd52961ce9f0d85&quot;
          },
          &quot;sa-east-1&quot;: <span>{</span>
              &quot;64&quot;: &quot;ami-07b14488da8ea02a0&quot;
          }
      }
   },
   &quot;Resources&quot;: <span>{</span>
      &quot;myPrivateVPC&quot;: <span>{</span>
        &quot;Type&quot;: &quot;AWS::EC2::VPC&quot;,
        &quot;Properties&quot;: <span>{</span>
           &quot;CidrBlock&quot;: <span>{</span>&quot;Ref&quot;: &quot;myPrivateVPCIDCIDRRange&quot;},
           &quot;EnableDnsSupport&quot;: false,
           &quot;EnableDnsHostnames&quot;: false,
           &quot;InstanceTenancy&quot;: &quot;default&quot;
        }
     },
     &quot;myPrivateEC2Subnet&quot; : <span>{</span>
        &quot;Type&quot; : &quot;AWS::EC2::Subnet&quot;,
        &quot;Properties&quot; : <span>{</span>
            &quot;VpcId&quot; : <span>{</span> &quot;Ref&quot; : &quot;myPrivateVPC&quot; },
            &quot;CidrBlock&quot; : <span>{</span>&quot;Ref&quot;: &quot;EC2SubnetCIDRRange&quot;}
          }
     },
     &quot;RouteTable&quot; : <span>{</span>
           &quot;Type&quot; : &quot;AWS::EC2::RouteTable&quot;,
           &quot;Properties&quot; : <span>{</span>
               &quot;VpcId&quot; : <span>{</span>&quot;Ref&quot; : &quot;myPrivateVPC&quot;}
           }
     },
     &quot;PeeringRoute1&quot; : <span>{</span>
         &quot;Type&quot; : &quot;AWS::EC2::Route&quot;,
          &quot;Properties&quot; : <span>{</span>
              &quot;DestinationCidrBlock&quot;: &quot;0.0.0.0/0&quot;,
              &quot;RouteTableId&quot; : <span>{</span> &quot;Ref&quot; : &quot;RouteTable&quot; },
              &quot;VpcPeeringConnectionId&quot; : <span>{</span> &quot;Ref&quot; : &quot;myVPCPeeringConnection&quot; }
           }
     },
     &quot;SubnetRouteTableAssociation&quot; : <span>{</span>
         &quot;Type&quot; : &quot;AWS::EC2::SubnetRouteTableAssociation&quot;,
         &quot;Properties&quot; : <span>{</span>
             &quot;SubnetId&quot; : <span>{</span> &quot;Ref&quot; : &quot;myPrivateEC2Subnet&quot; },
             &quot;RouteTableId&quot; : <span>{</span> &quot;Ref&quot; : &quot;RouteTable&quot; }
         }
     },
     &quot;myVPC&quot;: <span>{</span>
         &quot;Type&quot;: &quot;AWS::EC2::VPC&quot;,
         &quot;Properties&quot;: <span>{</span>
             &quot;CidrBlock&quot;: <span>{</span>&quot;Ref&quot;: &quot;myVPCIDCIDRRange&quot;},
             &quot;EnableDnsSupport&quot;: true,
             &quot;EnableDnsHostnames&quot;: true,
             &quot;InstanceTenancy&quot;: &quot;default&quot;
         }
     },
     &quot;PublicSubnet&quot;: <span>{</span>
          &quot;Type&quot;: &quot;AWS::EC2::Subnet&quot;,
          &quot;Properties&quot;: <span>{</span>
              &quot;CidrBlock&quot;: <span>{</span>&quot;Ref&quot;: &quot;EC2PublicSubnetCIDRRange&quot;},
              &quot;VpcId&quot;: <span>{</span>
                  &quot;Ref&quot;: &quot;myVPC&quot;
              }
          }
     },
     &quot;myInternetGateway&quot;: <span>{</span>
         &quot;Type&quot;: &quot;AWS::EC2::InternetGateway&quot;
     },
     &quot;AttachGateway&quot;: <span>{</span>
         &quot;Type&quot;: &quot;AWS::EC2::VPCGatewayAttachment&quot;,
         &quot;Properties&quot;: <span>{</span>
             &quot;VpcId&quot;: <span>{</span>
                 &quot;Ref&quot;: &quot;myVPC&quot;
            },
            &quot;InternetGatewayId&quot;: <span>{</span>
               &quot;Ref&quot;: &quot;myInternetGateway&quot;
            }
         }
     },
     &quot;PublicRouteTable&quot;: <span>{</span>
         &quot;Type&quot;: &quot;AWS::EC2::RouteTable&quot;,
         &quot;Properties&quot;: <span>{</span>
             &quot;VpcId&quot;: <span>{</span>
                 &quot;Ref&quot;: &quot;myVPC&quot;
             }
         }
     },
     &quot;PeeringRoute2&quot; : <span>{</span>
         &quot;Type&quot; : &quot;AWS::EC2::Route&quot;,
         &quot;Properties&quot; : <span>{</span>
            &quot;DestinationCidrBlock&quot;: <span>{</span> &quot;Ref&quot; : &quot;myPrivateVPCIDCIDRRange&quot; },
            &quot;RouteTableId&quot; : <span>{</span> &quot;Ref&quot; : &quot;PublicRouteTable&quot; },
            &quot;VpcPeeringConnectionId&quot; : <span>{</span> &quot;Ref&quot; : &quot;myVPCPeeringConnection&quot; }
          }
     },
     &quot;PublicRoute&quot;: <span>{</span>
         &quot;Type&quot;: &quot;AWS::EC2::Route&quot;,
          &quot;DependsOn&quot;: &quot;AttachGateway&quot;,
          &quot;Properties&quot;: <span>{</span>
              &quot;RouteTableId&quot;: <span>{</span>
                   &quot;Ref&quot;: &quot;PublicRouteTable&quot;
              },
             &quot;DestinationCidrBlock&quot;: &quot;0.0.0.0/0&quot;,
             &quot;GatewayId&quot;: <span>{</span>
                 &quot;Ref&quot;: &quot;myInternetGateway&quot;
             }
         }
     },
     &quot;PublicSubnetRouteTableAssociation&quot;: <span>{</span>
         &quot;Type&quot;: &quot;AWS::EC2::SubnetRouteTableAssociation&quot;,
         &quot;Properties&quot;: <span>{</span>
             &quot;SubnetId&quot;: <span>{</span>
                    &quot;Ref&quot;: &quot;PublicSubnet&quot;
             },
             &quot;RouteTableId&quot;: <span>{</span>
                    &quot;Ref&quot;: &quot;PublicRouteTable&quot;
             }
         }
     },
     &quot;myPrivateVPCEC2SecurityGroup&quot; : <span>{</span>
         &quot;Type&quot; : &quot;AWS::EC2::SecurityGroup&quot;,
         &quot;Properties&quot; : <span>{</span>
             &quot;GroupDescription&quot;: &quot;Private instance security group&quot;,
             &quot;VpcId&quot; : <span>{</span> &quot;Ref&quot; : &quot;myPrivateVPC&quot; },
             &quot;SecurityGroupIngress&quot; : [
                 <span>{</span>&quot;IpProtocol&quot; : &quot;icmp&quot;, &quot;FromPort&quot; : &quot;-1&quot;, &quot;ToPort&quot; : &quot;-1&quot;, &quot;CidrIp&quot; : &quot;0.0.0.0/0&quot;}
              ]
         }
     },
     &quot;myVPCEC2SecurityGroup&quot; : <span>{</span>
        &quot;Type&quot; : &quot;AWS::EC2::SecurityGroup&quot;,
        &quot;Properties&quot; : <span>{</span>
            &quot;GroupDescription&quot;: &quot;Public instance security group&quot;,
            &quot;VpcId&quot; : <span>{</span> &quot;Ref&quot; : &quot;myVPC&quot; },
            &quot;SecurityGroupIngress&quot; : [
                <span>{</span>&quot;IpProtocol&quot; : &quot;tcp&quot;, &quot;FromPort&quot; : &quot;22&quot;, &quot;ToPort&quot; : &quot;22&quot;, &quot;CidrIp&quot; : &quot;0.0.0.0/0&quot;}
            ]
        }
     },
     &quot;myPrivateInstance&quot; : <span>{</span>
         &quot;Type&quot; : &quot;AWS::EC2::Instance&quot;,
         &quot;Properties&quot; : <span>{</span>
            &quot;SecurityGroupIds&quot; : [<span>{</span> &quot;Ref&quot; : &quot;myPrivateVPCEC2SecurityGroup&quot; }],
            &quot;InstanceType&quot; : &quot;t2.micro&quot;,
            &quot;SubnetId&quot; : <span>{</span> &quot;Ref&quot; : &quot;myPrivateEC2Subnet&quot; },
            &quot;KeyName&quot;: <span>{</span>
                 &quot;Ref&quot;: &quot;EC2KeyPairName&quot;
            },
            &quot;ImageId&quot;: <span>{</span>
                 &quot;Fn::FindInMap&quot;: [
                     &quot;AWSRegionToAMI&quot;,
                     <span>{</span>&quot;Ref&quot;: &quot;AWS::Region&quot;},
                     &quot;64&quot;
                  ]
            }
         }
     },
     &quot;myInstance&quot; : <span>{</span>
         &quot;Type&quot; : &quot;AWS::EC2::Instance&quot;,
         &quot;Properties&quot; : <span>{</span>
             &quot;NetworkInterfaces&quot;: [ <span>{</span>
                 &quot;AssociatePublicIpAddress&quot;: &quot;true&quot;,
                 &quot;DeviceIndex&quot;: &quot;0&quot;,
                 &quot;GroupSet&quot;: [<span>{</span> &quot;Ref&quot; : &quot;myVPCEC2SecurityGroup&quot; }],
                 &quot;SubnetId&quot;: <span>{</span> &quot;Ref&quot; : &quot;PublicSubnet&quot; }
             } ],
            &quot;InstanceType&quot; : &quot;t2.micro&quot;,
            &quot;KeyName&quot;: <span>{</span>
                &quot;Ref&quot;: &quot;EC2KeyPairName&quot;
            },
            &quot;ImageId&quot;: <span>{</span>
                &quot;Fn::FindInMap&quot;: [
                    &quot;AWSRegionToAMI&quot;,
                    <span>{</span>&quot;Ref&quot;: &quot;AWS::Region&quot;},
                    &quot;64&quot;
                 ]
             }
        }
     },
     &quot;myVPCPeeringConnection&quot;: <span>{</span>
        &quot;Type&quot;: &quot;AWS::EC2::VPCPeeringConnection&quot;,
        &quot;Properties&quot;: <span>{</span>
            &quot;VpcId&quot;: <span>{</span>&quot;Ref&quot;: &quot;myVPC&quot;},
            &quot;PeerVpcId&quot;: <span>{</span>&quot;Ref&quot;: &quot;myPrivateVPC&quot;}
        }
    }
  }
}
</code></pre></div>
                                 <div id="YAML" name="YAML" class="section langfilter">
                                    <h4 id="aws-resource-ec2-vpcpeeringconnection--examples--VPC_Peering_Connection--yaml">YAML</h4><pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="yaml ">AWSTemplateFormatVersion: 2010-09-09
Description: &apos;Creates two VPCs, peers the VPCs, and launches an instance in each VPC.&apos;
Parameters:
  EC2KeyPairName:
    Description: Name of an existing EC2 KeyPair to enable SSH access to the instances
    Type: &apos;AWS::EC2::KeyPair::KeyName&apos;
    ConstraintDescription: must be the name of an existing EC2 KeyPair.
  myVPCIDCIDRRange:
    Description: The IP address range for your new VPC.
    Type: String
    MinLength: &apos;9&apos;
    MaxLength: &apos;18&apos;
    Default: 10.1.0.0/16
    AllowedPattern: &apos;(\d<span>{</span>1,3})\.(\d<span>{</span>1,3})\.(\d<span>{</span>1,3})\.(\d<span>{</span>1,3})/(\d<span>{</span>1,2})&apos;
    ConstraintDescription: must be a valid IP CIDR range of the form x.x.x.x/x.
  myPrivateVPCIDCIDRRange:
    Description: The IP address range for your new Private VPC.
    Type: String
    MinLength: &apos;9&apos;
    MaxLength: &apos;18&apos;
    Default: 10.0.0.0/16
    AllowedPattern: &apos;(\d<span>{</span>1,3})\.(\d<span>{</span>1,3})\.(\d<span>{</span>1,3})\.(\d<span>{</span>1,3})/(\d<span>{</span>1,2})&apos;
    ConstraintDescription: must be a valid IP CIDR range of the form x.x.x.x/x.
  EC2SubnetCIDRRange:
    Description: The IP address range for a subnet in myPrivateVPC.
    Type: String
    MinLength: &apos;9&apos;
    MaxLength: &apos;18&apos;
    Default: 10.0.0.0/24
    AllowedPattern: &apos;(\d<span>{</span>1,3})\.(\d<span>{</span>1,3})\.(\d<span>{</span>1,3})\.(\d<span>{</span>1,3})/(\d<span>{</span>1,2})&apos;
    ConstraintDescription: must be a valid IP CIDR range of the form x.x.x.x/x.
  EC2PublicSubnetCIDRRange:
    Description: The IP address range for a subnet in myVPC.
    Type: String
    MinLength: &apos;9&apos;
    MaxLength: &apos;18&apos;
    Default: 10.1.0.0/24
    AllowedPattern: &apos;(\d<span>{</span>1,3})\.(\d<span>{</span>1,3})\.(\d<span>{</span>1,3})\.(\d<span>{</span>1,3})/(\d<span>{</span>1,2})&apos;
    ConstraintDescription: must be a valid IP CIDR range of the form x.x.x.x/x.
Mappings:
  AWSRegionToAMI:
    us-east-1:
      &apos;64&apos;: ami-0ff8a91507f77f867
    us-west-2:
      &apos;64&apos;: ami-a0cfeed8
    us-west-1:
      &apos;64&apos;: ami-0bdb828fd58c52235
    eu-west-1:
      &apos;64&apos;: ami-047bb4163c506cd98
    ap-southeast-1:
      &apos;64&apos;: ami-08569b978cc4dfa10
    ap-southeast-2:
      &apos;64&apos;: ami-09b42976632b27e9b
    ap-northeast-2:
      &apos;64&apos;: ami-0d097db2fb6e0f05e
    ap-northeast-1:
      &apos;64&apos;: ami-06cd52961ce9f0d85
    sa-east-1:
      &apos;64&apos;: ami-07b14488da8ea02a0
Resources:
  myPrivateVPC:
    Type: &apos;AWS::EC2::VPC&apos;
    Properties:
      CidrBlock: !Ref myPrivateVPCIDCIDRRange
      EnableDnsSupport: false
      EnableDnsHostnames: false
      InstanceTenancy: default
  myPrivateEC2Subnet:
    Type: &apos;AWS::EC2::Subnet&apos;
    Properties:
      VpcId: !Ref myPrivateVPC
      CidrBlock: !Ref EC2SubnetCIDRRange
  RouteTable:
    Type: &apos;AWS::EC2::RouteTable&apos;
    Properties:
      VpcId: !Ref myPrivateVPC
  PeeringRoute1:
    Type: &apos;AWS::EC2::Route&apos;
    Properties:
      DestinationCidrBlock: 0.0.0.0/0
      RouteTableId: !Ref RouteTable
      VpcPeeringConnectionId: !Ref myVPCPeeringConnection
  SubnetRouteTableAssociation:
    Type: &apos;AWS::EC2::SubnetRouteTableAssociation&apos;
    Properties:
      SubnetId: !Ref myPrivateEC2Subnet
      RouteTableId: !Ref RouteTable
  myVPC:
    Type: &apos;AWS::EC2::VPC&apos;
    Properties:
      CidrBlock: !Ref myVPCIDCIDRRange
      EnableDnsSupport: true
      EnableDnsHostnames: true
      InstanceTenancy: default
  PublicSubnet:
    Type: &apos;AWS::EC2::Subnet&apos;
    Properties:
      CidrBlock: !Ref EC2PublicSubnetCIDRRange
      VpcId: !Ref myVPC
  myInternetGateway:
    Type: &apos;AWS::EC2::InternetGateway&apos;
  AttachGateway:
    Type: &apos;AWS::EC2::VPCGatewayAttachment&apos;
    Properties:
      VpcId: !Ref myVPC
      InternetGatewayId: !Ref myInternetGateway
  PublicRouteTable:
    Type: &apos;AWS::EC2::RouteTable&apos;
    Properties:
      VpcId: !Ref myVPC
  PeeringRoute2:
    Type: &apos;AWS::EC2::Route&apos;
    Properties:
      DestinationCidrBlock: !Ref myPrivateVPCIDCIDRRange
      RouteTableId: !Ref PublicRouteTable
      VpcPeeringConnectionId: !Ref myVPCPeeringConnection
  PublicRoute:
    Type: &apos;AWS::EC2::Route&apos;
    DependsOn: AttachGateway
    Properties:
      RouteTableId: !Ref PublicRouteTable
      DestinationCidrBlock: 0.0.0.0/0
      GatewayId: !Ref myInternetGateway
  PublicSubnetRouteTableAssociation:
    Type: &apos;AWS::EC2::SubnetRouteTableAssociation&apos;
    Properties:
      SubnetId: !Ref PublicSubnet
      RouteTableId: !Ref PublicRouteTable
  myPrivateVPCEC2SecurityGroup:
    Type: &apos;AWS::EC2::SecurityGroup&apos;
    Properties:
      GroupDescription: Private instance security group
      VpcId: !Ref myPrivateVPC
      SecurityGroupIngress:
        - IpProtocol: icmp
          FromPort: &apos;-1&apos;
          ToPort: &apos;-1&apos;
          CidrIp: 0.0.0.0/0
  myVPCEC2SecurityGroup:
    Type: &apos;AWS::EC2::SecurityGroup&apos;
    Properties:
      GroupDescription: Public instance security group
      VpcId: !Ref myVPC
      SecurityGroupIngress:
        - IpProtocol: tcp
          FromPort: &apos;22&apos;
          ToPort: &apos;22&apos;
          CidrIp: 0.0.0.0/0
  myPrivateInstance:
    Type: &apos;AWS::EC2::Instance&apos;
    Properties:
      SecurityGroupIds:
        - !Ref myPrivateVPCEC2SecurityGroup
      InstanceType: t2.micro
      SubnetId: !Ref myPrivateEC2Subnet
      KeyName: !Ref EC2KeyPairName
      ImageId: !FindInMap 
        - AWSRegionToAMI
        - !Ref &apos;AWS::Region&apos;
        - &apos;64&apos;
  myInstance:
    Type: &apos;AWS::EC2::Instance&apos;
    Properties:
      NetworkInterfaces:
        - AssociatePublicIpAddress: &apos;true&apos;
          DeviceIndex: &apos;0&apos;
          GroupSet:
            - !Ref myVPCEC2SecurityGroup
          SubnetId: !Ref PublicSubnet
      InstanceType: t2.micro
      KeyName: !Ref EC2KeyPairName
      ImageId: !FindInMap 
        - AWSRegionToAMI
        - !Ref &apos;AWS::Region&apos;
        - &apos;64&apos;
  myVPCPeeringConnection:
    Type: &apos;AWS::EC2::VPCPeeringConnection&apos;
    Properties:
      VpcId: !Ref myVPC
      PeerVpcId: !Ref myPrivateVPC</code></pre></div>
                                 <h2 id="aws-resource-ec2-vpcpeeringconnection--seealso">See also</h2>
                                 <div class="itemizedlist">
                                     
                                     
                                    
                                    <ul class="itemizedlist" type="disc">
                                       <li class="listitem">
                                          
                                          <p><a href="https://docs.aws.amazon.com/vpc/latest/peering/what-is-vpc-peering.html">What is VPC peering</a>
                                             in <em>AWS Outposts User Guide</em></p>
                                          
                                       </li>
                                       <li class="listitem">
                                          
                                          <p><a href="https://docs.aws.amazon.com/AWSEC2/latest/APIReference/API_CreateVpcPeeringConnection.html">CreateVpcPeeringConnection</a> in the 
                                             <em>Amazon EC2 API Reference</em></p>
                                          
                                       </li>
                                    </ul>
                                 </div>
                                 <awsdocs-copyright class="copyright-print"></awsdocs-copyright>
                              </div>
                              <noscript>
                                 <div>
                                    <div>
                                       <div>
                                          <div id="js_error_message">
                                             <p><img src="https://d1ge0kk1l5kms0.cloudfront.net/images/G/01/webservices/console/warning.png" alt="Warning"> <strong>Javascript is disabled or is unavailable in your
                                                   browser.</strong></p>
                                             <p>To use the AWS Documentation, Javascript must be
                                                enabled. Please refer to your browser&apos;s Help pages for instructions.
                                             </p>
                                          </div>
                                       </div>
                                    </div>
                                 </div>
                              </noscript>
                              
                              <awsdocs-page-utilities></awsdocs-page-utilities>
                           </div></div>
</body>
</html>