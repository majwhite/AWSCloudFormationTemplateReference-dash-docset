<!DOCTYPE html>
<html>
<head>
    <link href="css/awsdocs.css" rel="stylesheet" type="text/css">
    <script type="text/javascript" src="js/jquery.min.js"></script>
    <script type="text/javascript" src="js/awsdocs.min.js"></script>
    <meta charset="utf-8">
</head>
<body>
    <div id="content" style="padding: 10px 30px;">
    <h1 class="topictitle" id="aws-resource-apigatewayv2-authorizer">AWS::ApiGatewayV2::Authorizer</h1><p>The <code class="code">AWS::ApiGatewayV2::Authorizer</code> resource updates a Lambda
                        authorizer function. For more information about Lambda authorizer functions for
                        WebSocket APIs, see <a href="https://docs.aws.amazon.com/apigateway/latest/developerguide/apigateway-websocket-api-lambda-auth.html">Create a Lambda REQUEST Authorizer Function</a> in the <em>API
                           Gateway Developer Guide</em>.
                     </p><h2 id="aws-resource-apigatewayv2-authorizer-syntax">Syntax</h2><p>To declare this entity in your AWS CloudFormation template, use the following syntax:</p><div id="JSON" name="JSON" class="section langfilter">
                        <h3 id="aws-resource-apigatewayv2-authorizer-syntax.json">JSON</h3><pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="json ">{
  &quot;Type&quot; : &quot;AWS::ApiGatewayV2::Authorizer&quot;,
  &quot;Properties&quot; : {
      &quot;<a href="#cfn-apigatewayv2-authorizer-apiid">ApiId</a>&quot; : <em class="replaceable"><code>String</code></em>,
      &quot;<a href="#cfn-apigatewayv2-authorizer-authorizercredentialsarn">AuthorizerCredentialsArn</a>&quot; : <em class="replaceable"><code>String</code></em>,
      &quot;<a href="#cfn-apigatewayv2-authorizer-authorizerresultttlinseconds">AuthorizerResultTtlInSeconds</a>&quot; : <em class="replaceable"><code>Integer</code></em>,
      &quot;<a href="#cfn-apigatewayv2-authorizer-authorizertype">AuthorizerType</a>&quot; : <em class="replaceable"><code>String</code></em>,
      &quot;<a href="#cfn-apigatewayv2-authorizer-authorizeruri">AuthorizerUri</a>&quot; : <em class="replaceable"><code>String</code></em>,
      &quot;<a href="#cfn-apigatewayv2-authorizer-identitysource">IdentitySource</a>&quot; : <em class="replaceable"><code>[ String, ... ]</code></em>,
      &quot;<a href="#cfn-apigatewayv2-authorizer-identityvalidationexpression">IdentityValidationExpression</a>&quot; : <em class="replaceable"><code>String</code></em>,
      &quot;<a href="#cfn-apigatewayv2-authorizer-name">Name</a>&quot; : <em class="replaceable"><code>String</code></em>
    }
}
</code></pre></div><div id="YAML" name="YAML" class="section langfilter">
                        <h3 id="aws-resource-apigatewayv2-authorizer-syntax.yaml">YAML</h3><pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="yaml ">Type: AWS::ApiGatewayV2::Authorizer
Properties: 
  <a href="#cfn-apigatewayv2-authorizer-apiid">ApiId</a>: <em class="replaceable"><code>String</code></em>
  <a href="#cfn-apigatewayv2-authorizer-authorizercredentialsarn">AuthorizerCredentialsArn</a>: <em class="replaceable"><code>String</code></em>
  <a href="#cfn-apigatewayv2-authorizer-authorizerresultttlinseconds">AuthorizerResultTtlInSeconds</a>: <em class="replaceable"><code>Integer</code></em>
  <a href="#cfn-apigatewayv2-authorizer-authorizertype">AuthorizerType</a>: <em class="replaceable"><code>String</code></em>
  <a href="#cfn-apigatewayv2-authorizer-authorizeruri">AuthorizerUri</a>: <em class="replaceable"><code>String</code></em>
  <a href="#cfn-apigatewayv2-authorizer-identitysource">IdentitySource</a>: <em class="replaceable"><code>
    - String</code></em>
  <a href="#cfn-apigatewayv2-authorizer-identityvalidationexpression">IdentityValidationExpression</a>: <em class="replaceable"><code>String</code></em>
  <a href="#cfn-apigatewayv2-authorizer-name">Name</a>: <em class="replaceable"><code>String</code></em>
</code></pre></div><h2 id="aws-resource-apigatewayv2-authorizer-properties">Properties</h2><div class="variablelist">
                        <dl>
                           <dt><a id="cfn-apigatewayv2-authorizer-apiid"></a><span class="term"><code class="code">ApiId</code></span></dt>
                           <dd>
                              
                              
                              <p>The API identifier.</p>
                              <p><em>Required</em>: Yes
                              </p>
                              <p><em>Type</em>: String
                              </p>
                              <p><em>Update requires</em>: <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-update-behaviors.html#update-replacement">Replacement</a></p>
                           </dd>
                           <dt><a id="cfn-apigatewayv2-authorizer-authorizercredentialsarn"></a><span class="term"><code class="code">AuthorizerCredentialsArn</code></span></dt>
                           <dd>
                              
                              
                              <p>Specifies the required credentials as an IAM role for API Gateway to invoke the authorizer.
                                 To specify an IAM role for API Gateway to assume, use the role&apos;s Amazon Resource Name
                                 (ARN). To use resource-based permissions on the Lambda function, specify null.
                              </p>
                              <p><em>Required</em>: No
                              </p>
                              <p><em>Type</em>: String
                              </p>
                              <p><em>Update requires</em>: <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-update-behaviors.html#update-no-interrupt">No interruption</a></p>
                           </dd>
                           <dt><a id="cfn-apigatewayv2-authorizer-authorizerresultttlinseconds"></a><span class="term"><code class="code">AuthorizerResultTtlInSeconds</code></span></dt>
                           <dd>
                              
                              
                              <p>The time to live (TTL), in seconds, of cached authorizer results. If it is zero, authorization
                                 caching is disabled. If it is greater than zero, API Gateway will cache authorizer
                                 responses. If this field is not set, the default value is 300. The maximum value is
                                 3600, or 1 hour.
                              </p>
                              <p><em>Required</em>: No
                              </p>
                              <p><em>Type</em>: Integer
                              </p>
                              <p><em>Update requires</em>: <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-update-behaviors.html#update-no-interrupt">No interruption</a></p>
                           </dd>
                           <dt><a id="cfn-apigatewayv2-authorizer-authorizertype"></a><span class="term"><code class="code">AuthorizerType</code></span></dt>
                           <dd>
                              
                              
                              <p>The authorizer type. Currently the only valid value is <code class="code">REQUEST</code>, for a Lambda function using incoming request parameters.
                              </p>
                              <p><em>Required</em>: Yes
                              </p>
                              <p><em>Type</em>: String
                              </p>
                              <p><em>Update requires</em>: <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-update-behaviors.html#update-no-interrupt">No interruption</a></p>
                           </dd>
                           <dt><a id="cfn-apigatewayv2-authorizer-authorizeruri"></a><span class="term"><code class="code">AuthorizerUri</code></span></dt>
                           <dd>
                              
                              
                              <p>The authorizer&apos;s Uniform Resource Identifier (URI). For <code class="code">REQUEST</code>
                                 authorizers, this must be a well-formed Lambda function URI, for example,
                                 <code class="code">arn:aws:apigateway:us-west-2:lambda:path/2015-03-31/functions/arn:aws:lambda:us-west-2:<em>{account_id}</em>:function:<em>{lambda_function_name}</em>/invocations</code>.
                                 In general, the URI has this form:
                                 <code class="code">arn:aws:apigateway:<em>{region}</em>:lambda:path/<em>{service_api}</em>
                                    </code>, where <em>{region}</em> is the same as the region hosting the
                                 Lambda function, path indicates that the remaining substring in the URI should be
                                 treated as the path to the resource, including the initial <code class="code">/</code>. For
                                 Lambda functions, this is usually of the form
                                 <code class="code">/2015-03-31/functions/[FunctionARN]/invocations</code>.
                              </p>
                              
                              <p><em>Required</em>: Yes
                              </p>
                              <p><em>Type</em>: String
                              </p>
                              <p><em>Update requires</em>: <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-update-behaviors.html#update-no-interrupt">No interruption</a></p>
                           </dd>
                           <dt><a id="cfn-apigatewayv2-authorizer-identitysource"></a><span class="term"><code class="code">IdentitySource</code></span></dt>
                           <dd>
                              
                              
                              
                              
                              <p>The identity source for which authorization is requested.</p>
                              <p>For the <code class="code">REQUEST</code> authorizer, this is required when authorization caching is enabled. The value is
                                 a comma-separated string of one or more mapping expressions of the specified request
                                 parameters. For example, if an Auth header, a Name query string parameter are defined
                                 as identity sources, this value is <code class="code">$method.request.header.Auth, $method.request.querystring.Name</code>. These parameters will be used to derive the authorization caching key and to perform
                                 runtime validation of the <code class="code">REQUEST</code> authorizer by verifying all of the identity-related request parameters are present,
                                 not null and non-empty. Only when this is true does the authorizer invoke the authorizer
                                 Lambda function, otherwise, it returns a <code class="code">401 Unauthorized</code> response without calling the Lambda function. The valid value is a string of comma-separated
                                 mapping expressions of the specified request parameters. When the authorization caching
                                 is not enabled, this property is
                                 optional.
                              </p>
                              <p><em>Required</em>: Yes
                              </p>
                              <p><em>Type</em>: List of String
                              </p>
                              <p><em>Update requires</em>: <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-update-behaviors.html#update-no-interrupt">No interruption</a></p>
                           </dd>
                           <dt><a id="cfn-apigatewayv2-authorizer-identityvalidationexpression"></a><span class="term"><code class="code">IdentityValidationExpression</code></span></dt>
                           <dd>
                              
                              
                              <p>The validation expression does not apply to the <code class="code">REQUEST</code> authorizer.
                              </p>
                              <p><em>Required</em>: No
                              </p>
                              <p><em>Type</em>: String
                              </p>
                              <p><em>Update requires</em>: <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-update-behaviors.html#update-no-interrupt">No interruption</a></p>
                           </dd>
                           <dt><a id="cfn-apigatewayv2-authorizer-name"></a><span class="term"><code class="code">Name</code></span></dt>
                           <dd>
                              
                              
                              <p>The name of the authorizer.</p>
                              <p><em>Required</em>: Yes
                              </p>
                              <p><em>Type</em>: String
                              </p>
                              <p><em>Update requires</em>: <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-update-behaviors.html#update-no-interrupt">No interruption</a></p>
                           </dd>
                        </dl>
                     </div><h2 id="aws-resource-apigatewayv2-authorizer-return-values">Return Values</h2><h3 id="aws-resource-apigatewayv2-authorizer-return-values-ref">Ref</h3><p>When you pass the logical ID of this resource to the intrinsic <code class="code">Ref</code> function, <code class="code">Ref</code> returns the authorizer&apos;s ID, such as
                        <code class="code">abcde1</code>.
                     </p><p>For more information about using the <code class="code">Ref</code> function, see <a href="intrinsic-function-reference-ref.html">Ref</a>.
                     </p><h2 id="aws-resource-apigatewayv2-authorizer--examples">Examples</h2><h3 id="aws-resource-apigatewayv2-authorizer--examples--Authorizer_creation_example">Authorizer creation example</h3><p>The following example creates a Lambda <code class="code">authorizer</code>
                        resource for the <code class="code">MyApi</code> API.
                     </p><div id="JSON" name="JSON" class="section langfilter">
                        <h4 id="aws-resource-apigatewayv2-authorizer--examples--Authorizer_creation_example--json">JSON</h4><pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="json ">{
    &quot;Authorizer&quot;: {
        &quot;Type&quot;: &quot;AWS::ApiGatewayV2::Authorizer&quot;,
        &quot;Properties&quot;: {
            &quot;Name&quot;: &quot;LambdaAuthorizer&quot;,
            &quot;ApiId&quot;: {
                &quot;Ref&quot;: &quot;MyApi&quot;
            },
            &quot;AuthorizerType&quot;: &quot;REQUEST&quot;,
            &quot;AuthorizerCredentialsArn&quot;: &quot;Arn&quot;,
            &quot;AuthorizerUri&quot;: {
                &quot;Fn::Join&quot;: [
                    &quot;&quot;,
                    [
                        &quot;arn:&quot;,
                        {
                            &quot;Ref&quot;: &quot;AWS::Partition&quot;
                        },
                        &quot;:apigateway:&quot;,
                        {
                            &quot;Ref&quot;: &quot;AWS::Region&quot;
                        },
                        &quot;:lambda:path/2015-03-31/functions/&quot;,
                        &quot;/invocations&quot;
                    ]
                ]
            },
            &quot;AuthorizerResultTtlInSeconds&quot;: 500,
            &quot;IdentitySource&quot;: [
                &quot;route.request.header.Auth&quot;
            ]
        }
    }
}</code></pre></div><div id="YAML" name="YAML" class="section langfilter">
                        <h4 id="aws-resource-apigatewayv2-authorizer--examples--Authorizer_creation_example--yaml">YAML</h4><pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="yaml ">Authorizer:
  Type: &apos;AWS::ApiGatewayV2::Authorizer&apos;
  Properties:
    Name: LambdaAuthorizer
    ApiId: !Ref MyApi
    AuthorizerType: REQUEST
    AuthorizerCredentialsArn: Arn
    AuthorizerUri: !Join 
      - &apos;&apos;
      - - &apos;arn:&apos;
        - !Ref &apos;AWS::Partition&apos;
        - &apos;:apigateway:&apos;
        - !Ref &apos;AWS::Region&apos;
        - &apos;:lambda:path/2015-03-31/functions/&apos;
        - /invocations
    AuthorizerResultTtlInSeconds: 500
    IdentitySource:
      - route.request.header.Auth</code></pre></div><h2 id="aws-resource-apigatewayv2-authorizer--seealso">See Also</h2><div class="itemizedlist">
                        
                        
                        <ul class="itemizedlist" type="disc">
                           <li class="listitem">
                              
                              <p><a href="https://docs.aws.amazon.com/apigatewayv2/latest/api-reference/apis-apiid-authorizers.html#CreateAuthorizer">CreateAuthorizer</a> in the <em>Amazon API
                                    Gateway Version 2 API Reference</em></p>
                              
                           </li>
                        </ul>
                     </div><div id="marketing-target"><span class="close-button"></span><div class="marketing-title" id="marketing-title"></div>
                        <div class="marketing-description"><span id="marketing-description"></span><span id="marketing-cta"></span></div>
                     </div></div>
</body>
</html>