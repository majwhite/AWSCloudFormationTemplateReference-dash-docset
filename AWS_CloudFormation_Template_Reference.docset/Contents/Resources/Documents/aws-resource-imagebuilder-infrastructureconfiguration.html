<!DOCTYPE html>
<html>
<head>
    <link href="css/awsdocs.css" rel="stylesheet" type="text/css">
    <script type="text/javascript" src="js/jquery.min.js"></script>
    <script type="text/javascript" src="js/awsdocs.min.js"></script>
    <meta charset="utf-8">
</head>
<body>
    <div id="content" style="padding: 10px 30px;">
    <div id="main-content" class="awsui-util-container">
                              <div id="main-col-body">
                                 <awsdocs-language-banner data-service="$ctrl.pageService"></awsdocs-language-banner>
                                 <h1 class="topictitle" id="aws-resource-imagebuilder-infrastructureconfiguration">AWS::ImageBuilder::InfrastructureConfiguration</h1>
                                 <div class="awsdocs-page-header-container">
                                    <awsdocs-page-header></awsdocs-page-header>
                                    <awsdocs-filter-selector id="awsdocs-filter-selector"></awsdocs-filter-selector>
                                 </div>
                                 <p> The infrastructure configuration allows you to specify the infrastructure within
                                    which
                                    to build and test your image. In the infrastructure configuration, you can specify
                                    instance
                                    types, subnets, and security groups to associate with your instance. You can also
                                    associate
                                    an Amazon EC2 key pair with the instance used to build your image. This allows you
                                    to log
                                    on to your instance to troubleshoot if your build fails and you set
                                    terminateInstanceOnFailure to false. 
                                 </p>
                                 <h2 id="aws-resource-imagebuilder-infrastructureconfiguration-syntax">Syntax</h2>
                                 <p>To declare this entity in your AWS CloudFormation template, use the following syntax:</p>
                                 <div id="JSON" name="JSON" class="section langfilter">
                                    <h3 id="aws-resource-imagebuilder-infrastructureconfiguration-syntax.json">JSON</h3><pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="json "><span>{</span>
  &quot;Type&quot; : &quot;AWS::ImageBuilder::InfrastructureConfiguration&quot;,
  &quot;Properties&quot; : <span>{</span>
      &quot;<a href="#cfn-imagebuilder-infrastructureconfiguration-description">Description</a>&quot; : <code class="replaceable">String</code>,
      &quot;<a href="#cfn-imagebuilder-infrastructureconfiguration-instanceprofilename">InstanceProfileName</a>&quot; : <code class="replaceable">String</code>,
      &quot;<a href="#cfn-imagebuilder-infrastructureconfiguration-instancetypes">InstanceTypes</a>&quot; : <code class="replaceable">[ String, ... ]</code>,
      &quot;<a href="#cfn-imagebuilder-infrastructureconfiguration-keypair">KeyPair</a>&quot; : <code class="replaceable">String</code>,
      &quot;<a href="#cfn-imagebuilder-infrastructureconfiguration-logging">Logging</a>&quot; : <code class="replaceable"><a href="./aws-properties-imagebuilder-infrastructureconfiguration-logging.html">Logging</a></code>,
      &quot;<a href="#cfn-imagebuilder-infrastructureconfiguration-name">Name</a>&quot; : <code class="replaceable">String</code>,
      &quot;<a href="#cfn-imagebuilder-infrastructureconfiguration-resourcetags">ResourceTags</a>&quot; : <code class="replaceable"><span>{</span><code class="replaceable">Key</code> : <code class="replaceable">Value</code>, ...}</code>,
      &quot;<a href="#cfn-imagebuilder-infrastructureconfiguration-securitygroupids">SecurityGroupIds</a>&quot; : <code class="replaceable">[ String, ... ]</code>,
      &quot;<a href="#cfn-imagebuilder-infrastructureconfiguration-snstopicarn">SnsTopicArn</a>&quot; : <code class="replaceable">String</code>,
      &quot;<a href="#cfn-imagebuilder-infrastructureconfiguration-subnetid">SubnetId</a>&quot; : <code class="replaceable">String</code>,
      &quot;<a href="#cfn-imagebuilder-infrastructureconfiguration-tags">Tags</a>&quot; : <code class="replaceable"><span>{</span><code class="replaceable">Key</code> : <code class="replaceable">Value</code>, ...}</code>,
      &quot;<a href="#cfn-imagebuilder-infrastructureconfiguration-terminateinstanceonfailure">TerminateInstanceOnFailure</a>&quot; : <code class="replaceable">Boolean</code>
    }
}
</code></pre></div>
                                 <div id="YAML" name="YAML" class="section langfilter">
                                    <h3 id="aws-resource-imagebuilder-infrastructureconfiguration-syntax.yaml">YAML</h3><pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="yaml ">Type: AWS::ImageBuilder::InfrastructureConfiguration
Properties: 
  <a href="#cfn-imagebuilder-infrastructureconfiguration-description">Description</a>: <code class="replaceable">String</code>
  <a href="#cfn-imagebuilder-infrastructureconfiguration-instanceprofilename">InstanceProfileName</a>: <code class="replaceable">String</code>
  <a href="#cfn-imagebuilder-infrastructureconfiguration-instancetypes">InstanceTypes</a>: <code class="replaceable">
    - String</code>
  <a href="#cfn-imagebuilder-infrastructureconfiguration-keypair">KeyPair</a>: <code class="replaceable">String</code>
  <a href="#cfn-imagebuilder-infrastructureconfiguration-logging">Logging</a>: <code class="replaceable">
    <a href="./aws-properties-imagebuilder-infrastructureconfiguration-logging.html">Logging</a></code>
  <a href="#cfn-imagebuilder-infrastructureconfiguration-name">Name</a>: <code class="replaceable">String</code>
  <a href="#cfn-imagebuilder-infrastructureconfiguration-resourcetags">ResourceTags</a>: <code class="replaceable">
    <code class="replaceable">Key</code> : <code class="replaceable">Value</code></code>
  <a href="#cfn-imagebuilder-infrastructureconfiguration-securitygroupids">SecurityGroupIds</a>: <code class="replaceable">
    - String</code>
  <a href="#cfn-imagebuilder-infrastructureconfiguration-snstopicarn">SnsTopicArn</a>: <code class="replaceable">String</code>
  <a href="#cfn-imagebuilder-infrastructureconfiguration-subnetid">SubnetId</a>: <code class="replaceable">String</code>
  <a href="#cfn-imagebuilder-infrastructureconfiguration-tags">Tags</a>: <code class="replaceable">
    <code class="replaceable">Key</code> : <code class="replaceable">Value</code></code>
  <a href="#cfn-imagebuilder-infrastructureconfiguration-terminateinstanceonfailure">TerminateInstanceOnFailure</a>: <code class="replaceable">Boolean</code>
</code></pre></div>
                                 <h2 id="aws-resource-imagebuilder-infrastructureconfiguration-properties">Properties</h2>
                                 <div class="variablelist">
                                    <dl>
                                       <dt><a id="cfn-imagebuilder-infrastructureconfiguration-description"></a><span class="term"><code class="code">Description</code></span></dt>
                                       <dd>
                                          
                                          <p>The description of the infrastructure configuration.</p>
                                          
                                          <p><em>Required</em>: No
                                          </p>
                                          <p><em>Type</em>: String
                                          </p>
                                          <p><em>Minimum</em>: <code class="code">1</code></p>
                                          <p><em>Maximum</em>: <code class="code">1024</code></p>
                                          <p><em>Update requires</em>: <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-update-behaviors.html#update-no-interrupt">No interruption</a></p>
                                       </dd>
                                       <dt><a id="cfn-imagebuilder-infrastructureconfiguration-instanceprofilename"></a><span class="term"><code class="code">InstanceProfileName</code></span></dt>
                                       <dd>
                                          
                                          <p>The instance profile of the infrastructure configuration.</p>
                                          
                                          <p><em>Required</em>: Yes
                                          </p>
                                          <p><em>Type</em>: String
                                          </p>
                                          <p><em>Minimum</em>: <code class="code">1</code></p>
                                          <p><em>Maximum</em>: <code class="code">1024</code></p>
                                          <p><em>Update requires</em>: <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-update-behaviors.html#update-no-interrupt">No interruption</a></p>
                                       </dd>
                                       <dt><a id="cfn-imagebuilder-infrastructureconfiguration-instancetypes"></a><span class="term"><code class="code">InstanceTypes</code></span></dt>
                                       <dd>
                                          
                                          <p>The instance types of the infrastructure configuration.</p>
                                          
                                          <p><em>Required</em>: No
                                          </p>
                                          <p><em>Type</em>: List of String
                                          </p>
                                          <p><em>Update requires</em>: <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-update-behaviors.html#update-no-interrupt">No interruption</a></p>
                                       </dd>
                                       <dt><a id="cfn-imagebuilder-infrastructureconfiguration-keypair"></a><span class="term"><code class="code">KeyPair</code></span></dt>
                                       <dd>
                                          
                                          <p>The EC2 key pair of the infrastructure configuration.</p>
                                          
                                          <p><em>Required</em>: No
                                          </p>
                                          <p><em>Type</em>: String
                                          </p>
                                          <p><em>Minimum</em>: <code class="code">1</code></p>
                                          <p><em>Maximum</em>: <code class="code">1024</code></p>
                                          <p><em>Update requires</em>: <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-update-behaviors.html#update-no-interrupt">No interruption</a></p>
                                       </dd>
                                       <dt><a id="cfn-imagebuilder-infrastructureconfiguration-logging"></a><span class="term"><code class="code">Logging</code></span></dt>
                                       <dd>
                                          
                                          <p>The logging configuration of the infrastructure configuration.</p>
                                          
                                          <p><em>Required</em>: No
                                          </p>
                                          <p><em>Type</em>: <a href="./aws-properties-imagebuilder-infrastructureconfiguration-logging.html">Logging</a></p>
                                          <p><em>Update requires</em>: <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-update-behaviors.html#update-no-interrupt">No interruption</a></p>
                                       </dd>
                                       <dt><a id="cfn-imagebuilder-infrastructureconfiguration-name"></a><span class="term"><code class="code">Name</code></span></dt>
                                       <dd>
                                          
                                          <p>The name of the infrastructure configuration.</p>
                                          
                                          <p><em>Required</em>: Yes
                                          </p>
                                          <p><em>Type</em>: String
                                          </p>
                                          <p><em>Pattern</em>: <code class="code">^[-_A-Za-z-0-9][-_A-Za-z0-9 ]<span>{</span>1,126}[-_A-Za-z-0-9]$</code></p>
                                          <p><em>Update requires</em>: <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-update-behaviors.html#update-replacement">Replacement</a></p>
                                       </dd>
                                       <dt><a id="cfn-imagebuilder-infrastructureconfiguration-resourcetags"></a><span class="term"><code class="code">ResourceTags</code></span></dt>
                                       <dd>
                                          
                                          <p>The tags attached to the resource created by Image Builder.</p>
                                          
                                          <p><em>Required</em>: No
                                          </p>
                                          <p><em>Type</em>: Map of String
                                          </p>
                                          <p><em>Update requires</em>: <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-update-behaviors.html#update-no-interrupt">No interruption</a></p>
                                       </dd>
                                       <dt><a id="cfn-imagebuilder-infrastructureconfiguration-securitygroupids"></a><span class="term"><code class="code">SecurityGroupIds</code></span></dt>
                                       <dd>
                                          
                                          <p>The security group IDs of the infrastructure configuration.</p>
                                          
                                          <p><em>Required</em>: No
                                          </p>
                                          <p><em>Type</em>: List of String
                                          </p>
                                          <p><em>Update requires</em>: <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-update-behaviors.html#update-no-interrupt">No interruption</a></p>
                                       </dd>
                                       <dt><a id="cfn-imagebuilder-infrastructureconfiguration-snstopicarn"></a><span class="term"><code class="code">SnsTopicArn</code></span></dt>
                                       <dd>
                                          
                                          <p>The Amazon Resource Name (ARN) of the SNS topic for the infrastructure
                                             configuration.
                                          </p>
                                          
                                          <p><em>Required</em>: No
                                          </p>
                                          <p><em>Type</em>: String
                                          </p>
                                          <p><em>Minimum</em>: <code class="code">1</code></p>
                                          <p><em>Maximum</em>: <code class="code">1024</code></p>
                                          <p><em>Update requires</em>: <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-update-behaviors.html#update-no-interrupt">No interruption</a></p>
                                       </dd>
                                       <dt><a id="cfn-imagebuilder-infrastructureconfiguration-subnetid"></a><span class="term"><code class="code">SubnetId</code></span></dt>
                                       <dd>
                                          
                                          <p>The subnet ID of the infrastructure configuration.</p>
                                          
                                          <p><em>Required</em>: No
                                          </p>
                                          <p><em>Type</em>: String
                                          </p>
                                          <p><em>Minimum</em>: <code class="code">1</code></p>
                                          <p><em>Maximum</em>: <code class="code">1024</code></p>
                                          <p><em>Update requires</em>: <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-update-behaviors.html#update-no-interrupt">No interruption</a></p>
                                       </dd>
                                       <dt><a id="cfn-imagebuilder-infrastructureconfiguration-tags"></a><span class="term"><code class="code">Tags</code></span></dt>
                                       <dd>
                                          
                                          <p>The tags of the infrastructure configuration.</p>
                                          
                                          <p><em>Required</em>: No
                                          </p>
                                          <p><em>Type</em>: Map of String
                                          </p>
                                          <p><em>Update requires</em>: <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-update-behaviors.html#update-no-interrupt">No interruption</a></p>
                                       </dd>
                                       <dt><a id="cfn-imagebuilder-infrastructureconfiguration-terminateinstanceonfailure"></a><span class="term"><code class="code">TerminateInstanceOnFailure</code></span></dt>
                                       <dd>
                                          
                                          <p>The terminate instance on failure configuration of the infrastructure
                                             configuration.
                                          </p>
                                          
                                          <p><em>Required</em>: No
                                          </p>
                                          <p><em>Type</em>: Boolean
                                          </p>
                                          <p><em>Update requires</em>: <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-update-behaviors.html#update-no-interrupt">No interruption</a></p>
                                       </dd>
                                    </dl>
                                 </div>
                                 <h2 id="aws-resource-imagebuilder-infrastructureconfiguration-return-values">Return values</h2>
                                 <h3 id="aws-resource-imagebuilder-infrastructureconfiguration-return-values-ref">Ref</h3>
                                 <p>When you pass the logical ID of this resource to the intrinsic <code class="code">Ref</code> function, <code class="code">Ref</code> returns the resource ARN, such as
                                    <code class="code">arn:aws:imagebuilder:us-west-2:123456789012:infrastructure-configuration/my-example-infrastructure</code>.
                                 </p>
                                 <p>For more information about using the <code class="code">Ref</code> function, see <a href="intrinsic-function-reference-ref.html">Ref</a>.
                                 </p>
                                 <h3 id="aws-resource-imagebuilder-infrastructureconfiguration-return-values-fn--getatt">Fn::GetAtt</h3>
                                 <p>The <code class="code">Fn::GetAtt</code> intrinsic function returns a value for a specified attribute of this type. The following
                                    are the available attributes and sample return values.
                                 </p> 
                                 
                                 <p>For more information about using the <code class="code">Fn::GetAtt</code> intrinsic function, see <a href="intrinsic-function-reference-getatt.html">Fn::GetAtt</a>.
                                 </p>
                                 <h4 id="aws-resource-imagebuilder-infrastructureconfiguration-return-values-fn--getatt-fn--getatt"></h4>
                                 <div class="variablelist">
                                    <dl>
                                       <dt><a id="Arn-fn::getatt"></a><span class="term"><code class="code">Arn</code></span></dt>
                                       <dd>
                                          
                                          <p>Returns the Amazon Resource Name (ARN) of the infrastructure configuration. The
                                             following pattern is applied:
                                             <code class="code">^arn:aws[^:]*:imagebuilder:[^:]+:(?:\d<span>{</span>12}|aws):(?:image-recipe|infrastructure-configuration|distribution-configuration|component|image|image-pipeline)/[a-z0-9-_]+(?:/(?:(?:x|\d+)\.(?:x|\d+)\.(?:x|\d+))(?:/\d+)?)?$</code>.
                                          </p>
                                          
                                       </dd>
                                    </dl>
                                 </div>
                                 <h2 id="aws-resource-imagebuilder-infrastructureconfiguration--examples">Examples</h2>
                                 <p></p>
                                 <h3 id="aws-resource-imagebuilder-infrastructureconfiguration--examples--Create_an_infrastructure_configuration">Create an infrastructure configuration</h3>
                                 <p>The following example shows the schema for all of the parameters of the
                                    InfrastructureConfiguration resource document in both YAML and JSON format .
                                 </p>
                                 <div id="YAML" name="YAML" class="section langfilter">
                                    <h4 id="aws-resource-imagebuilder-infrastructureconfiguration--examples--Create_an_infrastructure_configuration--yaml">YAML</h4><pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="yaml ">Resources:
  InfrastructureConfigurationAll:
    Type: &apos;AWS::ImageBuilder::InfrastructureConfiguration&apos;
    Properties:
      Name: &apos;infrastructure-configuration-name&apos;
      InstanceProfileName: &apos;instance-profile-name&apos;
      Description: &apos;description&apos;
      InstanceTypes:
        - &apos;m4.large&apos;
        - &apos;m5.large&apos;
      KeyPair: &apos;key-pair&apos;
      Logging:
        S3Logs:
          S3BucketName: &apos;imagebuilder-logging-bucket&apos;
          S3KeyPrefix: &apos;imagebuilder-bucket-prefix&apos;
      SnsTopicArn: !Ref SnsTopicArn
      TerminateInstanceOnFailure: true
      SecurityGroupIds:
        - &apos;security-group-id-1&apos;
        - &apos;security-group-id-2&apos;
      SubnetId: &apos;subnet-id&apos;
      Tags:
        CustomerInfraConfigTagKey1: &apos;CustomerInfraConfigTagValue1&apos;
        CustomerInfraConfigTagKey2: &apos;CustomerInfraConfigTagValue2&apos;</code></pre></div>
                                 <div id="JSON" name="JSON" class="section langfilter">
                                    <h4 id="aws-resource-imagebuilder-infrastructureconfiguration--examples--Create_an_infrastructure_configuration--json">JSON</h4><pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="json "><span>{</span>
    &quot;Resources&quot;: <span>{</span>
        &quot;InfrastructureConfigurationAll&quot;: <span>{</span>
            &quot;Type&quot;: &quot;AWS::ImageBuilder::InfrastructureConfiguration&quot;,
            &quot;Properties&quot;: <span>{</span>
                &quot;Name&quot;: &quot;infrastructure-configuration-name&quot;,
                &quot;InstanceProfileName&quot;: &quot;instance-profile-name&quot;,
                &quot;Description&quot;: &quot;description&quot;,
                &quot;InstanceTypes&quot;: [
                    &quot;m4.large&quot;,
                    &quot;m5.large&quot;
                ],
                &quot;KeyPair&quot;: &quot;key-pair&quot;,
                &quot;Logging&quot;: <span>{</span>
                    &quot;S3Logs&quot;: <span>{</span>
                        &quot;S3BucketName&quot;: &quot;imagebuilder-logging-bucket&quot;,
                        &quot;S3KeyPrefix&quot;: &quot;imagebuilder-bucket-prefix&quot;
                    }
                },
                &quot;SnsTopicArn&quot;: <span>{</span>
                    &quot;Ref&quot;: &quot;SnsTopicArn&quot;
                },
                &quot;TerminateInstanceOnFailure&quot;: true,
                &quot;SecurityGroupIds&quot;: [
                    &quot;security-group-id-1&quot;,
                    &quot;security-group-id-2&quot;
                ],
                &quot;SubnetId&quot;: &quot;subnet-id&quot;,
                &quot;Tags&quot;: <span>{</span>
                    &quot;CustomerInfraConfigTagKey1&quot;: &quot;CustomerInfraConfigTagValue1&quot;,
                    &quot;CustomerInfraConfigTagKey2&quot;: &quot;CustomerInfraConfigTagValue2&quot;
                }
            }
        }
    }
}</code></pre></div>
                                 <awsdocs-copyright class="copyright-print"></awsdocs-copyright>
                                 <awsdocs-thumb-feedback right-edge="{{$ctrl.thumbFeedbackRightEdge}}"></awsdocs-thumb-feedback>
                              </div>
                              <noscript>
                                 <div>
                                    <div>
                                       <div>
                                          <div id="js_error_message">
                                             <p><img src="https://d1ge0kk1l5kms0.cloudfront.net/images/G/01/webservices/console/warning.png" alt="Warning"> <strong>Javascript is disabled or is unavailable in your
                                                   browser.</strong></p>
                                             <p>To use the AWS Documentation, Javascript must be
                                                enabled. Please refer to your browser&apos;s Help pages for instructions.
                                             </p>
                                          </div>
                                       </div>
                                    </div>
                                 </div>
                              </noscript>
                              
                              <awsdocs-page-utilities></awsdocs-page-utilities>
                           </div></div>
</body>
</html>